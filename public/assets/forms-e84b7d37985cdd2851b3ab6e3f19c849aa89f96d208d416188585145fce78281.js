if(function(t){function e(t,e,r){var s=t[0],o=/er/.test(r)?_indeterminate:/bl/.test(r)?f:u,a=r==_update?{checked:s[u],disabled:s[f],indeterminate:"true"==t.attr(_indeterminate)||"false"==t.attr(_determinate)}:s[o];if(/^(ch|di|in)/.test(r)&&!a)i(t,o);else if(/^(un|en|de)/.test(r)&&a)n(t,o);else if(r==_update)for(var l in a)a[l]?i(t,l,!0):n(t,l,!0);else e&&"toggle"!=r||(e||t[_callback]("ifClicked"),a?s[_type]!==h&&n(t,o):i(t,o))}function i(e,i,r){var p=e[0],m=e.parent(),g=i==u,v=i==_indeterminate,y=i==f,b=v?_determinate:g?d:"enabled",w=s(e,b+o(p[_type])),k=s(e,i+o(p[_type]));if(!0!==p[i]){if(!r&&i==u&&p[_type]==h&&p.name){var x=e.closest("form"),_='input[name="'+p.name+'"]',_=x.length?x.find(_):t(_);_.each(function(){this!==p&&t(this).data(l)&&n(t(this),i)})}v?(p[i]=!0,p[u]&&n(e,u,"force")):(r||(p[i]=!0),g&&p[_indeterminate]&&n(e,_indeterminate,!1)),a(e,g,i,r)}p[f]&&s(e,_cursor,!0)&&m.find("."+c).css(_cursor,"default"),m[_add](k||s(e,i)||""),m.attr("role")&&!v&&m.attr("aria-"+(y?f:u),"true"),m[_remove](w||s(e,b)||"")}function n(t,e,i){var n=t[0],r=t.parent(),l=e==u,h=e==_indeterminate,p=e==f,m=h?_determinate:l?d:"enabled",g=s(t,m+o(n[_type])),v=s(t,e+o(n[_type]));!1!==n[e]&&(!h&&i&&"force"!=i||(n[e]=!1),a(t,l,m,i)),!n[f]&&s(t,_cursor,!0)&&r.find("."+c).css(_cursor,"pointer"),r[_remove](v||s(t,e)||""),r.attr("role")&&!h&&r.attr("aria-"+(p?f:u),"false"),r[_add](g||s(t,m)||"")}function r(e,i){e.data(l)&&(e.parent().html(e.attr("style",e.data(l).s||"")),i&&e[_callback](i),e.off(".i").unwrap(),t(_label+'[for="'+e[0].id+'"]').add(e.closest(_label)).off(".i"))}function s(t,e,i){if(t.data(l))return t.data(l).o[e+(i?"":"Class")]}function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t,e,i,n){n||(e&&t[_callback]("ifToggled"),t[_callback]("ifChanged")[_callback]("if"+o(i)))}var l="iCheck",c=l+"-helper",h="radio",u="checked",d="un"+u,f="disabled";_determinate="determinate",_indeterminate="in"+_determinate,_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent),t.fn[l]=function(s,o){var a='input[type="checkbox"], input[type="'+h+'"]',d=t(),p=function(e){e.each(function(){var e=t(this);d=e.is(a)?d.add(e):d.add(e.find(a))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(s))return s=s.toLowerCase(),p(this),d.each(function(){var i=t(this);"destroy"==s?r(i,"ifDestroyed"):e(i,!0,s),t.isFunction(o)&&o()});if("object"!=typeof s&&s)return this;var m=t.extend({checkedClass:u,disabledClass:f,indeterminateClass:_indeterminate,labelHover:!0},s),g=m.handle,v=m.hoverClass||"hover",y=m.focusClass||"focus",b=m.activeClass||"active",w=!!m.labelHover,k=m.labelHoverClass||"hover",x=0|(""+m.increaseArea).replace("%","");return"checkbox"!=g&&g!=h||(a='input[type="'+g+'"]'),-50>x&&(x=-50),p(this),d.each(function(){var s=t(this);r(s);var o=this,a=o.id,d=-x+"%",p=100+2*x+"%",p={position:"absolute",top:d,left:d,display:"block",width:p,height:p,margin:0,padding:0,background:"#fff",border:0,opacity:0},d=_mobile?{position:"absolute",visibility:"hidden"}:x?p:{position:"absolute",opacity:0},g="checkbox"==o[_type]?m.checkboxClass||"icheckbox":m.radioClass||"i"+h,_=t(_label+'[for="'+a+'"]').add(s.closest(_label)),C=!!m.aria,D=l+"-"+Math.random().toString(36).substr(2,6),S='<div class="'+g+'" '+(C?'role="'+o[_type]+'" ':"");C&&_.each(function(){S+='aria-labelledby="',this.id?S+=this.id:(this.id=D,S+=D),S+='"'}),S=s.wrap(S+"/>")[_callback]("ifCreated").parent().append(m.insert),p=t('<ins class="'+c+'"/>').css(p).appendTo(S),s.data(l,{o:m,s:s.attr("style")}).css(d),m.inheritClass&&S[_add](o.className||""),m.inheritID&&a&&S.attr("id",l+"-"+a),"static"==S.css("position")&&S.css("position","relative"),e(s,!0,_update),_.length&&_.on(_click+".i mouseover.i mouseout.i "+_touch,function(i){var n=i[_type],r=t(this);if(!o[f]){if(n==_click){if(t(i.target).is("a"))return;e(s,!1,!0)}else w&&(/ut|nd/.test(n)?(S[_remove](v),r[_remove](k)):(S[_add](v),r[_add](k)));if(!_mobile)return!1;i.stopPropagation()}}),s.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(t){var e=t[_type];return t=t.keyCode,e!=_click&&("keydown"==e&&32==t?(o[_type]==h&&o[u]||(o[u]?n(s,u):i(s,u)),!1):void("keyup"==e&&o[_type]==h?!o[u]&&i(s,u):/us|ur/.test(e)&&S["blur"==e?_remove:_add](y)))}),p.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(t){var i=t[_type],n=/wn|up/.test(i)?b:v;if(!o[f]){if(i==_click?e(s,!1,!0):(/wn|er|in/.test(i)?S[_add](n):S[_remove](n+" "+b),_.length&&w&&n==v&&_[/ut|nd/.test(i)?_remove:_add](k)),!_mobile)return!1;t.stopPropagation()}})})}}(window.jQuery||window.Zepto),function(t,e){function i(t,e){p(t).push(e)}function n(n,r,s){var o=n.children(r.headerTag),a=n.children(r.bodyTag);o.length>a.length?W(Z,"contents"):o.length<a.length&&W(Z,"titles");var l=r.startIndex;if(s.stepCount=o.length,r.saveState&&t.cookie){var c=t.cookie(q+g(n)),h=parseInt(c,0);!isNaN(h)&&h<s.stepCount&&(l=h)}s.currentIndex=l,o.each(function(r){var s=t(this),o=a.eq(r),l=o.data("mode"),c=null==l?Q.html:v(Q,/^\s*$/.test(l)||isNaN(l)?l:parseInt(l,0)),h=c===Q.html||o.data("url")===e?"":o.data("url"),u=c!==Q.html&&"1"===o.data("loaded"),d=t.extend({},et,{title:s.html(),content:c===Q.html?o.html():"",contentUrl:h,contentMode:c,contentLoaded:u});i(n,d)})}function r(t){t.triggerHandler("canceled")}function s(t,e){return t.currentIndex-e}function o(e,i){var n=l(e);e.unbind(n).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(n),e.removeClass(i.clearFixCssClass+" vertical");var r=e.find(".content > *");r.removeData("loaded").removeData("mode").removeData("url"),r.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),e.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var s=t('<{0} class="{1}"></{0}>'.format(e.get(0).tagName,e.attr("class"))),o=e._id();return null!=o&&""!==o&&s._id(o),s.html(e.find(".content").html()),e.after(s),e.remove(),s}function a(t,e){var i=t.find(".steps li").eq(e.currentIndex);t.triggerHandler("finishing",[e.currentIndex])?(i.addClass("done").removeClass("error"),t.triggerHandler("finished",[e.currentIndex])):i.addClass("error")}function l(t){var e=t.data("eventNamespace");return null==e&&(e="."+g(t),t.data("eventNamespace",e)),e}function c(t,e){var i=g(t);return t.find("#"+i+V+e)}function h(t,e){var i=g(t);return t.find("#"+i+G+e)}function u(t,e){var i=g(t);return t.find("#"+i+K+e)}function d(t){return t.data("options")}function f(t){return t.data("state")}function p(t){return t.data("steps")}function m(t,e){var i=p(t);return(0>e||e>=i.length)&&W(X),i[e]}function g(t){var e=t.data("uid");return null==e&&(e=t._id(),null==e&&(e="steps-uid-".concat(Y),t._id(e)),Y++,t.data("uid",e)),e}function v(t,i){if(j("enumType",t),j("keyOrValue",i),"string"==typeof i){var n=t[i];return n===e&&W("The enum key '{0}' does not exist.",i),n}if("number"==typeof i){for(var r in t)if(t[r]===i)return i;W("Invalid enum value '{0}'.",i)}else W("Invalid key or value type.")}function y(t,e,i){return T(t,e,i,k(i,1))}function b(t,e,i){return T(t,e,i,s(i,1))}function w(t,e,i,n){if((0>n||n>=i.stepCount)&&W(X),!(e.forceMoveForward&&n<i.currentIndex)){var r=i.currentIndex;return t.triggerHandler("stepChanging",[i.currentIndex,n])?(i.currentIndex=n,R(t,e,i),E(t,e,i,r),L(t,e,i),S(t,e,i),U(t,e,i,n,r,function(){t.triggerHandler("stepChanged",[n,r])})):t.find(".steps li").eq(r).addClass("error"),!0}}function k(t,e){return t.currentIndex+e}function x(e){var i=t.extend(!0,{},it,e);return this.each(function(){var e=t(this),r={currentIndex:i.startIndex,currentStep:null,stepCount:0,transitionElement:null};e.data("options",i),e.data("state",r),e.data("steps",[]),n(e,i,r),F(e,i,r),A(e,i),i.autoFocus&&0===Y&&c(e,i.startIndex).focus(),e.triggerHandler("init",[i.startIndex])})}function _(e,i,n,r,s){(0>r||r>n.stepCount)&&W(X),s=t.extend({},et,s),C(e,r,s),n.currentIndex!==n.stepCount&&n.currentIndex>=r&&(n.currentIndex++,R(e,i,n)),n.stepCount++;var o=e.find(".content"),a=t("<{0}>{1}</{0}>".format(i.headerTag,s.title)),l=t("<{0}></{0}>".format(i.bodyTag));return(null==s.contentMode||s.contentMode===Q.html)&&l.html(s.content),0===r?o.prepend(l).prepend(a):h(e,r-1).after(l).after(a),P(e,n,l,r),z(e,i,n,a,r),$(e,i,n,r),r===n.currentIndex&&E(e,i,n),L(e,i,n),e}function C(t,e,i){p(t).splice(e,0,i)}function D(e){var i=t(this),n=d(i),r=f(i);if(n.suppressPaginationOnFocus&&i.find(":focus").is(":input"))return e.preventDefault(),!1;var s={left:37,right:39};e.keyCode===s.left?(e.preventDefault(),b(i,n,r)):e.keyCode===s.right&&(e.preventDefault(),y(i,n,r))}function S(e,i,n){if(n.stepCount>0){var r=n.currentIndex,s=m(e,r);if(!i.enableContentCache||!s.contentLoaded)switch(v(Q,s.contentMode)){case Q.iframe:e.find(".content > .body").eq(n.currentIndex).empty().html('<iframe src="'+s.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case Q.async:var o=h(e,r)._aria("busy","true").empty().append(H(i.loadingTemplate,{text:i.labels.loading}));t.ajax({url:s.contentUrl,cache:!1}).done(function(t){o.empty().html(t)._aria("busy","false").data("loaded","1"),e.triggerHandler("contentLoaded",[r])})}}}function T(t,e,i,n){var r=i.currentIndex;if(n>=0&&n<i.stepCount&&!(e.forceMoveForward&&n<i.currentIndex)){var s=c(t,n),o=s.parent(),a=o.hasClass("disabled");return o._enableAria(),s.click(),r!==i.currentIndex||!a||(o._enableAria(!1),!1)}return!1}function M(e){e.preventDefault();var i=t(this),n=i.parent().parent().parent().parent(),s=d(n),o=f(n),l=i.attr("href");switch(l.substring(l.lastIndexOf("#")+1)){case"cancel":r(n);break;case"finish":a(n,o);break;case"next":y(n,s,o);break;case"previous":b(n,s,o)}}function L(t,e,i){if(e.enablePagination){var n=t.find(".actions a[href$='#finish']").parent(),r=t.find(".actions a[href$='#next']").parent();if(!e.forceMoveForward){t.find(".actions a[href$='#previous']").parent()._enableAria(i.currentIndex>0)}e.enableFinishButton&&e.showFinishButtonAlways?(n._enableAria(i.stepCount>0),r._enableAria(i.stepCount>1&&i.stepCount>i.currentIndex+1)):(n._showAria(e.enableFinishButton&&i.stepCount===i.currentIndex+1),r._showAria(0===i.stepCount||i.stepCount>i.currentIndex+1)._enableAria(i.stepCount>i.currentIndex+1||!e.enableFinishButton))}}function E(e,i,n,r){var s=c(e,n.currentIndex),o=t('<span class="current-info audible">'+i.labels.current+" </span>"),a=e.find(".content > .title");if(null!=r){var l=c(e,r);l.parent().addClass("done").removeClass("error")._selectAria(!1),a.eq(r).removeClass("current").next(".body").removeClass("current"),o=l.find(".current-info"),s.focus()}s.prepend(o).parent()._selectAria().removeClass("done")._enableAria(),a.eq(n.currentIndex).addClass("current").next(".body").addClass("current")}function $(t,e,i,n){for(var r=g(t),s=n;s<i.stepCount;s++){var o=r+V+s,a=r+G+s,l=r+K+s,c=t.find(".title").eq(s)._id(l);t.find(".steps a").eq(s)._id(o)._aria("controls",a).attr("href","#"+l).html(H(e.titleTemplate,{index:s+1,title:c.html()})),t.find(".body").eq(s)._id(a)._aria("labelledby",l)}}function A(t,e){var i=l(t);t.bind("canceled"+i,e.onCanceled),t.bind("contentLoaded"+i,e.onContentLoaded),t.bind("finishing"+i,e.onFinishing),t.bind("finished"+i,e.onFinished),t.bind("init"+i,e.onInit),t.bind("stepChanging"+i,e.onStepChanging),t.bind("stepChanged"+i,e.onStepChanged),e.enableKeyNavigation&&t.bind("keyup"+i,D),t.find(".actions a").bind("click"+i,M)}function I(t,e,i,n){return!(0>n||n>=i.stepCount||i.currentIndex===n)&&(N(t,n),i.currentIndex>n&&(i.currentIndex--,R(t,e,i)),i.stepCount--,u(t,n).remove(),h(t,n).remove(),c(t,n).parent().remove(),0===n&&t.find(".steps li").first().addClass("first"),n===i.stepCount&&t.find(".steps li").eq(n).addClass("last"),$(t,e,i,n),L(t,e,i),!0)}function N(t,e){p(t).splice(e,1)}function F(e,i,n){var r='<{0} class="{1}">{2}</{0}>',s=v(J,i.stepsOrientation),o=s===J.vertical?" vertical":"",a=t(r.format(i.contentContainerTag,"content "+i.clearFixCssClass,e.html())),l=t(r.format(i.stepsContainerTag,"steps "+i.clearFixCssClass,'<ul role="tablist"></ul>')),c=a.children(i.headerTag),h=a.children(i.bodyTag);e.attr("role","application").empty().append(l).append(a).addClass(i.cssClass+" "+i.clearFixCssClass+o),h.each(function(i){P(e,n,t(this),i)}),c.each(function(r){z(e,i,n,t(this),r)}),E(e,i,n),O(e,i,n)}function P(t,e,i,n){var r=g(t),s=r+G+n,o=r+K+n;i._id(s).attr("role","tabpanel")._aria("labelledby",o).addClass("body")._showAria(e.currentIndex===n)}function O(t,e,i){if(e.enablePagination){var n='<li><a href="#{0}" role="menuitem">{1}</a></li>',r="";e.forceMoveForward||(r+=n.format("previous",e.labels.previous)),r+=n.format("next",e.labels.next),e.enableFinishButton&&(r+=n.format("finish",e.labels.finish)),e.enableCancelButton&&(r+=n.format("cancel",e.labels.cancel)),t.append('<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>'.format(e.actionContainerTag,e.clearFixCssClass,e.labels.pagination,r)),L(t,e,i),S(t,e,i)}}function H(t,i){for(var n=t.match(/#([a-z]*)#/gi),r=0;r<n.length;r++){var s=n[r],o=s.substring(1,s.length-1);i[o]===e&&W("The key '{0}' does not exist in the substitute collection!",o),t=t.replace(s,i[o])}return t}function z(e,i,n,r,s){var o=g(e),a=o+V+s,c=o+G+s,h=o+K+s,u=e.find(".steps > ul"),d=H(i.titleTemplate,{index:s+1,title:r.html()}),f=t('<li role="tab"><a id="'+a+'" href="#'+h+'" aria-controls="'+c+'">'+d+"</a></li>");f._enableAria(i.enableAllSteps||n.currentIndex>s),n.currentIndex>s&&f.addClass("done"),r._id(h).attr("tabindex","-1").addClass("title"),0===s?u.prepend(f):u.find("li").eq(s-1).after(f),0===s&&u.find("li").removeClass("first").eq(s).addClass("first"),s===n.stepCount-1&&u.find("li").removeClass("last").eq(s).addClass("last"),f.children("a").bind("click"+l(e),B)}function R(e,i,n){i.saveState&&t.cookie&&t.cookie(q+g(e),n.currentIndex)}function U(e,i,n,r,s,o){var a=e.find(".content > .body"),l=v(tt,i.transitionEffect),c=i.transitionEffectSpeed,h=a.eq(r),u=a.eq(s);switch(l){case tt.fade:case tt.slide:var d=l===tt.fade?"fadeOut":"slideUp",p=l===tt.fade?"fadeIn":"slideDown";n.transitionElement=h,u[d](c,function(){var e=t(this)._showAria(!1).parent().parent(),i=f(e);i.transitionElement&&(i.transitionElement[p](c,function(){t(this)._showAria()}).promise().done(o),i.transitionElement=null)});break;case tt.slideLeft:var m=u.outerWidth(!0),g=r>s?-m:m,y=r>s?m:-m;t.when(u.animate({left:g},c,function(){t(this)._showAria(!1)}),h.css("left",y+"px")._showAria().animate({left:0},c)).done(o);break;default:t.when(u._showAria(!1),h._showAria()).done(o)}}function B(e){e.preventDefault();var i=t(this),n=i.parent().parent().parent().parent(),r=d(n),s=f(n),o=s.currentIndex;if(i.parent().is(":not(.disabled):not(.current)")){var a=i.attr("href");w(n,r,s,parseInt(a.substring(a.lastIndexOf("-")+1),0))}return o===s.currentIndex?(c(n,o).focus(),!1):void 0}function W(t){throw arguments.length>1&&(t=t.format(Array.prototype.slice.call(arguments,1))),new Error(t)}function j(t,e){null==e&&W("The argument '{0}' is null or undefined.",t)}t.fn.extend({_aria:function(t,e){return this.attr("aria-"+t,e)},_removeAria:function(t){return this.removeAttr("aria-"+t)},_enableAria:function(t){return null==t||t?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(t){return null==t||t?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(t){return null==t||t?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(t){return t?this.attr("id",t):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var e=1===arguments.length&&t.isArray(arguments[0])?arguments[0]:arguments,i=this,n=0;n<e.length;n++){var r=new RegExp("\\{"+n+"\\}","gm");i=i.replace(r,e[n])}return i});var Y=0,q="jQu3ry_5teps_St@te_",V="-t-",G="-p-",K="-h-",X="Index out of range.",Z="One or more corresponding step {0} are missing.";t.fn.steps=function(e){return t.fn.steps[e]?t.fn.steps[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.steps"):x.apply(this,arguments)},t.fn.steps.add=function(t){var e=f(this);return _(this,d(this),e,e.stepCount,t)},t.fn.steps.destroy=function(){return o(this,d(this))},t.fn.steps.finish=function(){a(this,f(this))},t.fn.steps.getCurrentIndex=function(){return f(this).currentIndex},t.fn.steps.getCurrentStep=function(){return m(this,f(this).currentIndex)},t.fn.steps.getStep=function(t){return m(this,t)},t.fn.steps.insert=function(t,e){return _(this,d(this),f(this),t,e)},t.fn.steps.next=function(){return y(this,d(this),f(this))},t.fn.steps.previous=function(){return b(this,d(this),f(this))},t.fn.steps.remove=function(t){return I(this,d(this),f(this),t)},t.fn.steps.setStep=function(){throw new Error("Not yet implemented!")},t.fn.steps.skip=function(){throw new Error("Not yet implemented!")};var Q=t.fn.steps.contentMode={html:0,iframe:1,async:2},J=t.fn.steps.stepsOrientation={horizontal:0,vertical:1},tt=t.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},et=t.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:Q.html,contentLoaded:!1},it=t.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:J.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:tt.none,transitionEffectSpeed:200,onStepChanging:function(){return!0},onStepChanged:function(){},onCanceled:function(){},onFinishing:function(){return!0},onFinished:function(){},onContentLoaded:function(){},onInit:function(){},labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}}}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=t.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(e){function n(){var n,r;return!i.settings.submitHandler||(i.submitButton&&(n=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),r=i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&n.remove(),void 0!==r&&r)}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){var e,i,n;return t(this[0]).is("form")?e=this.validate().form():(n=[],e=!0,i=t(this[0].form).validate(),this.each(function(){(e=i.element(this)&&e)||(n=n.concat(i.errorList))}),i.errorList=n),e},rules:function(e,i){var n,r,s,o,a,l,c=this[0];if(null!=c&&null!=c.form){if(e)switch(n=t.data(c.form,"validator").settings,r=n.rules,s=t.validator.staticRules(c),e){case"add":t.extend(s,t.validator.normalizeRule(i)),delete s.messages,r[c.name]=s,i.messages&&(n.messages[c.name]=t.extend(n.messages[c.name],i.messages));break;case"remove":return i?(l={},t.each(i.split(/\s/),function(e,i){l[i]=s[i],delete s[i],"required"===i&&t(c).removeAttr("aria-required")}),l):(delete r[c.name],s)}return o=t.validator.normalizeRules(t.extend({},t.validator.classRules(c),t.validator.attributeRules(c),t.validator.dataRules(c),t.validator.staticRules(c)),c),o.required&&(a=o.required,delete o.required,o=t.extend({required:a},o),t(c).attr("aria-required","true")),o.remote&&(a=o.remote,delete o.remote,o=t.extend(o,{remote:a})),o}}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){var i=t(e).val();return null!==i&&!!t.trim(""+i)},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:void 0===i?e:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(e,i){var n=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===i.which&&""===this.elementValue(e)||-1!==t.inArray(i.keyCode,n)||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(n):t(e).addClass(i).removeClass(n)},unhighlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(n):t(e).removeClass(i).addClass(n)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}."),step:t.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){!this.form&&this.hasAttribute("contenteditable")&&(this.form=t(this).closest("form")[0]);var i=t.data(this.form,"validator"),n="on"+e.type.replace(/^validate/,""),r=i.settings;r[n]&&!t(this).is(r.ignore)&&r[n].call(i,this,e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,n=this.groups={};t.each(this.settings.groups,function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,function(t,i){n[i]=e})}),i=this.settings.rules,t.each(i,function(e,n){i[e]=t.validator.normalizeRule(n)}),t(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&t(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var i,n,r=this.clean(e),s=this.validationTargetFor(r),o=this,a=!0;return void 0===s?delete this.invalid[r.name]:(this.prepareElement(s),this.currentElements=t(s),n=this.groups[s.name],n&&t.each(this.groups,function(t,e){e===n&&t!==s.name&&(r=o.validationTargetFor(o.clean(o.findByName(t))))&&r.name in o.invalid&&(o.currentElements.push(r),a=o.check(r)&&a)}),i=!1!==this.check(s),a=a&&i,this.invalid[s.name]=!i,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t(e).attr("aria-invalid",!i)),a},showErrors:function(e){if(e){var i=this;t.extend(this.errorMap,e),this.errorList=t.map(this.errorMap,function(t,e){return{message:t,element:i.findByName(e)[0]}}),this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)t[e]&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var n=this.name||t(this).attr("name");return!n&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=t(this).closest("form")[0]),!(n in i||!e.objectLength(t(this).rules())||(i[n]=!0,0))})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([])},reset:function(){this.resetInternals(),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i,n,r=t(e),s=e.type;return"radio"===s||"checkbox"===s?this.findByName(e.name).filter(":checked").val():"number"===s&&"undefined"!=typeof e.validity?e.validity.badInput?"NaN":r.val():(i=e.hasAttribute("contenteditable")?r.text():r.val(),"file"===s?"C:\\fakepath\\"===i.substr(0,12)?i.substr(12):(n=i.lastIndexOf("/"),n>=0?i.substr(n+1):(n=i.lastIndexOf("\\"),n>=0?i.substr(n+1):i)):"string"==typeof i?i.replace(/\r/g,""):i)},check:function(e){e=this.validationTargetFor(this.clean(e));var i,n,r,s=t(e).rules(),o=t.map(s,function(t,e){return e}).length,a=!1,l=this.elementValue(e);if("function"==typeof s.normalizer){if("string"!=typeof(l=s.normalizer.call(e,l)))throw new TypeError("The normalizer should return a string value.");delete s.normalizer}for(n in s){r={method:n,parameters:s[n]};try{if("dependency-mismatch"===(i=t.validator.methods[n].call(this,l,e,r.parameters))&&1===o){a=!0;continue}if(a=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,r),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+r.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+r.method+"' method."),t}}if(!a)return this.objectLength(s)&&this.successList.push(e),!0},customDataMessage:function(e,i){return t(e).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,i){"string"==typeof i&&(i={method:i});var n=this.findDefined(this.customMessage(e.name,i.method),this.customDataMessage(e,i.method),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),r=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,i.parameters,e):r.test(n)&&(n=t.validator.format(n.replace(r,"{$1}"),i.parameters)),n},formatAndAdd:function(t,e){var i=this.defaultMessage(t,e);this.errorList.push({message:i,element:t,method:e.method}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var n,r,s,o,a=this.errorsFor(e),l=this.idOrName(e),c=t(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(i)):(a=t("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(i||""),n=a,this.settings.wrapper&&(n=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement.call(this,n,t(e)):n.insertAfter(e),a.is("label")?a.attr("for",l):0===a.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(s=a.attr("id"),c?c.match(new RegExp("\\b"+this.escapeCssMeta(s)+"\\b"))||(c+=" "+s):c=s,t(e).attr("aria-describedby",c),(r=this.groups[e.name])&&(o=this,t.each(o.groups,function(e,i){i===r&&t("[name='"+o.escapeCssMeta(e)+"']",o.currentForm).attr("aria-describedby",a.attr("id"))})))),!i&&this.settings.success&&(a.text(""),
"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var i=this.escapeCssMeta(this.idOrName(e)),n=t(e).attr("aria-describedby"),r="label[for='"+i+"'], label[for='"+i+"'] *";return n&&(r=r+", #"+this.escapeCssMeta(n).replace(/\s+/g,", #")),this.errors().filter(r)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,t(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t(e).removeClass(this.settings.pendingClass),i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,i){return i="string"==typeof i&&i||"remote",t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:i})})},destroy:function(){this.resetForm(),t(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},n=t(e).attr("class");return n&&t.each(n.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(t,e,i,n){/min|max|step/.test(i)&&(null===e||/number|range|text/.test(e))&&(n=Number(n),isNaN(n)&&(n=void 0)),n||0===n?t[i]=n:e===i&&"range"!==e&&(t[i]=!0)},attributeRules:function(e){var i,n,r={},s=t(e),o=e.getAttribute("type");for(i in t.validator.methods)"required"===i?(n=e.getAttribute(i),""===n&&(n=!0),n=!!n):n=s.attr(i),this.normalizeAttributeRule(r,o,i,n);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var i,n,r={},s=t(e),o=e.getAttribute("type");for(i in t.validator.methods)n=s.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),this.normalizeAttributeRule(r,o,i,n);return r},staticRules:function(e){var i={},n=t.data(e.form,"validator");return n.settings.rules&&(i=t.validator.normalizeRule(n.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(n,r){if(!1===r)return void delete e[n];if(r.param||r.depends){var s=!0;switch(typeof r.depends){case"string":s=!!t(r.depends,i.form).length;break;case"function":s=r.depends.call(i,i)}s?e[n]=void 0===r.param||r.param:(t.data(i.form,"validator").resetElements(t(i)),delete e[n])}}),t.each(e,function(n,r){e[n]=t.isFunction(r)&&"normalizer"!==n?r(i):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,n){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==n?n:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=t(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(e,i)>0:e.length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(e,i,n){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||r>=n},maxlength:function(e,i,n){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||r<=n},rangelength:function(e,i,n){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||r>=n[0]&&r<=n[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},step:function(e,i,n){var r,s=t(i).attr("type"),o="Step attribute on input type "+s+" is not supported.",a=["text","number","range"],l=new RegExp("\\b"+s+"\\b"),c=s&&!l.test(a.join()),h=function(t){var e=(""+t).match(/(?:\.(\d+))?$/);return e&&e[1]?e[1].length:0},u=function(t){return Math.round(t*Math.pow(10,r))},d=!0;if(c)throw new Error(o);return r=h(n),(h(e)>r||u(e)%u(n)!=0)&&(d=!1),this.optional(i)||d},equalTo:function(e,i,n){var r=t(n);return this.settings.onfocusout&&r.not(".validate-equalTo-blur").length&&r.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){t(i).valid()}),e===r.val()},remote:function(e,i,n,r){if(this.optional(i))return"dependency-mismatch";r="string"==typeof r&&r||"remote";var s,o,a,l=this.previousValue(i,r);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[i.name][r],this.settings.messages[i.name][r]=l.message,n="string"==typeof n&&{url:n}||n,a=t.param(t.extend({data:e},n.data)),l.old===a?l.valid:(l.old=a,s=this,this.startRequest(i),o={},o[i.name]=e,t.ajax(t.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:o,context:s.currentForm,success:function(t){var n,o,a,c=!0===t||"true"===t;s.settings.messages[i.name][r]=l.originalMessage,c?(a=s.formSubmitted,s.resetInternals(),s.toHide=s.errorsFor(i),s.formSubmitted=a,s.successList.push(i),s.invalid[i.name]=!1,s.showErrors()):(n={},o=t||s.defaultMessage(i,{method:r,parameters:e}),n[i.name]=l.message=o,s.invalid[i.name]=!0,s.showErrors(n)),l.valid=c,s.stopRequest(i,c)}},n)),"pending")}}});var e,i={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,n){var r=t.port;"abort"===t.mode&&(i[r]&&i[r].abort(),i[r]=n)}):(e=t.ajax,t.ajax=function(n){var r=("mode"in n?n:t.ajaxSettings).mode,s=("port"in n?n:t.ajaxSettings).port;return"abort"===r?(i[s]&&i[s].abort(),i[s]=e.apply(this,arguments),i[s]):e.apply(this,arguments)})}),function(){var t,e,i,n,r,s,o,a,l=[].slice,c={}.hasOwnProperty,h=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};o=function(){},e=function(){function t(){}return t.prototype.addEventListener=t.prototype.on,t.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},t.prototype.emit=function(){var t,e,i,n,r,s;if(n=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},i=this._callbacks[n])for(r=0,s=i.length;r<s;r++)e=i[r],e.apply(this,t);return this},t.prototype.removeListener=t.prototype.off,t.prototype.removeAllListeners=t.prototype.off,t.prototype.removeEventListener=t.prototype.off,t.prototype.off=function(t,e){var i,n,r,s;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(!(i=this._callbacks[t]))return this;if(1===arguments.length)return delete this._callbacks[t],this;for(n=r=0,s=i.length;r<s;n=++r)if(i[n]===e){i.splice(n,1);break}return this},t}(),t=function(t){function i(t,e){var r,s,o;if(this.element=t,this.version=i.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(i.instances.push(this),this.element.dropzone=this,r=null!=(o=i.optionsForElement(this.element))?o:{},this.options=n({},this.defaultOptions,r,null!=e?e:{}),this.options.forceFallback||!i.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(s=this.getExistingFallback())&&s.parentNode&&s.parentNode.removeChild(s),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=i.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=i.getElements(this.options.clickable,"clickable")),this.init()}var n,r;return h(i,t),i.prototype.Emitter=e,i.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],i.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return o},forceFallback:!1,fallback:function(){var t,e,n,r,s,o;for(this.element.className=this.element.className+" dz-browser-not-supported",o=this.element.getElementsByTagName("div"),r=0,s=o.length;r<s;r++)t=o[r],/(^| )dz-message($| )/.test(t.className)&&(e=t,t.className="dz-message");return e||(e=i.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e)),n=e.getElementsByTagName("span")[0],n&&(null!=n.textContent?n.textContent=this.options.dictFallbackMessage:null!=n.innerText&&(n.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,i,n;return e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},i=t.width/t.height,e.optWidth=this.options.thumbnailWidth,e.optHeight=this.options.thumbnailHeight,null==e.optWidth&&null==e.optHeight?(e.optWidth=e.srcWidth,e.optHeight=e.srcHeight):null==e.optWidth?e.optWidth=i*e.optHeight:null==e.optHeight&&(e.optHeight=1/i*e.optWidth),n=e.optWidth/e.optHeight,t.height<e.optHeight||t.width<e.optWidth?(e.trgHeight=e.srcHeight,e.trgWidth=e.srcWidth):i>n?(e.srcHeight=t.height,e.srcWidth=e.srcHeight*n):(e.srcWidth=t.width,e.srcHeight=e.srcWidth/n),e.srcX=(t.width-e.srcWidth)/2,e.srcY=(t.height-e.srcHeight)/2,e},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:o,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:o,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var e,n,r,s,o,a,l,c,h,u,d,f,p;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(t.previewElement=i.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),u=t.previewElement.querySelectorAll("[data-dz-name]"),s=0,l=u.length;s<l;s++)e=u[s],e.textContent=this._renameFilename(t.name);for(d=t.previewElement.querySelectorAll("[data-dz-size]"),o=0,c=d.length;o<c;o++)e=d[o],e.innerHTML=this.filesize(t.size);for(this.options.addRemoveLinks&&(t._removeLink=i.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),t.previewElement.appendChild(t._removeLink)),n=function(e){return function(n){return n.preventDefault(),n.stopPropagation(),t.status===i.UPLOADING?i.confirm(e.options.dictCancelUploadConfirmation,function(){return e.removeFile(t)}):e.options.dictRemoveFileConfirmation?i.confirm(e.options.dictRemoveFileConfirmation,function(){return e.removeFile(t)}):e.removeFile(t)}}(this),f=t.previewElement.querySelectorAll("[data-dz-remove]"),p=[],a=0,h=f.length;a<h;a++)r=f[a],p.push(r.addEventListener("click",n));return p}},removedfile:function(t){var e;return t.previewElement&&null!=(e=t.previewElement)&&e.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var i,n,r,s;if(t.previewElement){for(t.previewElement.classList.remove("dz-file-preview"),s=t.previewElement.querySelectorAll("[data-dz-thumbnail]"),n=0,r=s.length;n<r;n++)i=s[n],i.alt=t.name,i.src=e;return setTimeout(function(){return function(){return t.previewElement.classList.add("dz-image-preview")}}(),1)}},error:function(t,e){var i,n,r,s,o;if(t.previewElement){for(t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error),s=t.previewElement.querySelectorAll("[data-dz-errormessage]"),o=[],n=0,r=s.length;n<r;n++)i=s[n],o.push(i.textContent=e);return o}},errormultiple:o,processing:function(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:o,uploadprogress:function(t,e){var i,n,r,s,o;if(t.previewElement){for(s=t.previewElement.querySelectorAll("[data-dz-uploadprogress]"),o=[],n=0,r=s.length;n<r;n++)i=s[n],"PROGRESS"===i.nodeName?o.push(i.value=e):o.push(i.style.width=e+"%");return o}},totaluploadprogress:o,sending:o,sendingmultiple:o,success:function(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple:o,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:o,complete:function(t){if(t._removeLink&&(t._removeLink.textContent=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple:o,maxfilesexceeded:o,maxfilesreached:o,queuecomplete:o,addedfiles:o,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},n=function(){var t,e,i,n,r,s,o;for(n=arguments[0],i=2<=arguments.length?l.call(arguments,1):[],s=0,o=i.length;s<o;s++){e=i[s];for(t in e)r=e[t],n[t]=r}return n},i.prototype.getAcceptedFiles=function(){var t,e,i,n,r;for(n=this.files,r=[],e=0,i=n.length;e<i;e++)t=n[e],t.accepted&&r.push(t);return r},i.prototype.getRejectedFiles=function(){var t,e,i,n,r;for(n=this.files,r=[],e=0,i=n.length;e<i;e++)t=n[e],t.accepted||r.push(t);return r},i.prototype.getFilesWithStatus=function(t){var e,i,n,r,s;for(r=this.files,s=[],i=0,n=r.length;i<n;i++)e=r[i],e.status===t&&s.push(e);return s},i.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(i.QUEUED)},i.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(i.UPLOADING)},i.prototype.getAddedFiles=function(){return this.getFilesWithStatus(i.ADDED)},i.prototype.getActiveFiles=function(){var t,e,n,r,s;for(r=this.files,s=[],e=0,n=r.length;e<n;e++)t=r[e],t.status!==i.UPLOADING&&t.status!==i.QUEUED||s.push(t);return s},i.prototype.init=function(){var t,e,n,r,s,o,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(i.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(n=function(t){return function(){return t.hiddenFileInput&&t.hiddenFileInput.parentNode.removeChild(t.hiddenFileInput),t.hiddenFileInput=document.createElement("input"),t.hiddenFileInput.setAttribute("type","file"),(null==t.options.maxFiles||t.options.maxFiles>1)&&t.hiddenFileInput.setAttribute("multiple","multiple"),t.hiddenFileInput.className="dz-hidden-input",null!=t.options.acceptedFiles&&t.hiddenFileInput.setAttribute("accept",t.options.acceptedFiles),null!=t.options.capture&&t.hiddenFileInput.setAttribute("capture",t.options.capture),t.hiddenFileInput.style.visibility="hidden",t.hiddenFileInput.style.position="absolute",t.hiddenFileInput.style.top="0",t.hiddenFileInput.style.left="0",t.hiddenFileInput.style.height="0",t.hiddenFileInput.style.width="0",document.querySelector(t.options.hiddenInputContainer).appendChild(t.hiddenFileInput),t.hiddenFileInput.addEventListener("change",function(){var e,i,r,s;if(i=t.hiddenFileInput.files,i.length)for(r=0,s=i.length;r<s;r++)e=i[r],t.addFile(e);return t.emit("addedfiles",i),n()})}}(this))(),this.URL=null!=(o=window.URL)?o:window.webkitURL,a=this.events,r=0,s=a.length;r<s;r++)t=a[r],this.on(t,this.options[t]);return this.on("uploadprogress",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("canceled",function(t){return function(e){return t.emit("complete",e)}}(this)),this.on("complete",function(t){return function(){if(0===t.getAddedFiles().length&&0===t.getUploadingFiles().length&&0===t.getQueuedFiles().length)return setTimeout(function(){return t.emit("queuecomplete")},0)}}(this)),e=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return function(e){return t.emit("dragstart",e)}}(this),dragenter:function(t){return function(i){return e(i),t.emit("dragenter",i)}}(this),dragover:function(t){return function(i){var n;try{n=i.dataTransfer.effectAllowed}catch(t){}return i.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",e(i),t.emit("dragover",i)}}(this),dragleave:function(t){return function(e){return t.emit("dragleave",e)}}(this),drop:function(t){return function(i){return e(i),t.drop(i)}}(this),dragend:function(t){return function(e){return t.emit("dragend",e)}}(this)}}],this.clickableElements.forEach(function(t){return function(e){return t.listeners.push({element:e,events:{click:function(n){return(e!==t.element||n.target===t.element||i.elementInside(n.target,t.element.querySelector(".dz-message")))&&t.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},i.prototype.destroy=function(){var t;return this.disable(),this.removeAllFiles(!0),(null!=(t=this.hiddenFileInput)?t.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,i.instances.splice(i.instances.indexOf(this),1)},i.prototype.updateTotalUploadProgress=function(){var t,e,i,n,r,s,o,a;if(n=0,i=0,t=this.getActiveFiles(),t.length){for(a=this.getActiveFiles(),s=0,o=a.length;s<o;s++)e=a[s],n+=e.upload.bytesSent,i+=e.upload.total;r=100*n/i}else r=100;return this.emit("totaluploadprogress",r,i,n)},i.prototype._getParamName=function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")},i.prototype._renameFilename=function(t){return"function"!=typeof this.options.renameFilename?t:this.options.renameFilename(t)},i.prototype.getFallbackForm=function(){var t,e,n,r;return(t=this.getExistingFallback())?t:(n='<div class="dz-fallback">',this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',e=i.createElement(n),"FORM"!==this.element.tagName?(r=i.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),r.appendChild(e)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=r?r:e)},i.prototype.getExistingFallback=function(){var t,e,i,n,r,s;for(e=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++)if(e=t[i],/(^| )fallback($| )/.test(e.className))return e},s=["div","form"],n=0,r=s.length;n<r;n++)if(i=s[n],t=e(this.element.getElementsByTagName(i)))return t},i.prototype.setupEventListeners=function(){var t,e,i,n,r,s,o;for(s=this.listeners,o=[],n=0,r=s.length;n<r;n++)t=s[n],o.push(function(){var n,r;n=t.events,r=[];for(e in n)i=n[e],r.push(t.element.addEventListener(e,i,!1));return r}());return o},i.prototype.removeEventListeners=function(){var t,e,i,n,r,s,o;for(s=this.listeners,o=[],n=0,r=s.length;n<r;n++)t=s[n],o.push(function(){var n,r;n=t.events,r=[];for(e in n)i=n[e],r.push(t.element.removeEventListener(e,i,!1));return r}());return o},i.prototype.disable=function(){var t,e,i,n,r;for(this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),n=this.files,r=[],e=0,i=n.length;e<i;e++)t=n[e],r.push(this.cancelUpload(t));return r},i.prototype.enable=function(){return this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()},i.prototype.filesize=function(t){var e,i,n,r,s,o,a,l;if(n=0,r="b",t>0){for(o=["TB","GB","MB","KB","b"],i=a=0,l=o.length;a<l;i=++a)if(s=o[i],e=Math.pow(this.options.filesizeBase,4-i)/10,t>=e){n=t/Math.pow(this.options.filesizeBase,4-i),r=s;break}n=Math.round(10*n)/10}return"<strong>"+n+"</strong> "+r},i.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},i.prototype.drop=function(t){var e,i;t.dataTransfer&&(this.emit("drop",t),e=t.dataTransfer.files,this.emit("addedfiles",e),e.length&&(i=t.dataTransfer.items,i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(e)))},i.prototype.paste=function(t){var e,i;if(null!=(null!=t&&null!=(i=t.clipboardData)?i.items:void 0))return this.emit("paste",t),e=t.clipboardData.items,e.length?this._addFilesFromItems(e):void 0},i.prototype.handleFiles=function(t){var e,i,n,r;for(r=[],i=0,n=t.length;i<n;i++)e=t[i],r.push(this.addFile(e));return r},i.prototype._addFilesFromItems=function(t){var e,i,n,r,s;for(s=[],n=0,r=t.length;n<r;n++)i=t[n],null!=i.webkitGetAsEntry&&(e=i.webkitGetAsEntry())?e.isFile?s.push(this.addFile(i.getAsFile())):e.isDirectory?s.push(this._addFilesFromDirectory(e,e.name)):s.push(void 0):null!=i.getAsFile&&(null==i.kind||"file"===i.kind)?s.push(this.addFile(i.getAsFile())):s.push(void 0);return s},i.prototype._addFilesFromDirectory=function(t,e){var i,n,r;return i=t.createReader(),n=function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(t):void 0},(r=function(t){return function(){return i.readEntries(function(i){var n,s,o;if(i.length>0){for(s=0,o=i.length;s<o;s++)n=i[s],n.isFile?n.file(function(i){if(!t.options.ignoreHiddenFiles||"."!==i.name.substring(0,1))return i.fullPath=e+"/"+i.name,t.addFile(i)}):n.isDirectory&&t._addFilesFromDirectory(n,e+"/"+n.name);r()}return null},n)}}(this))()},i.prototype.accept=function(t,e){return t.size>1024*this.options.maxFilesize*1024?e(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):i.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(e(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,e):e(this.options.dictInvalidFileType)},i.prototype.addFile=function(t){return t.upload={progress:0,total:t.size,bytesSent:0},this.files.push(t),t.status=i.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,function(e){return function(i){return i?(t.accepted=!1,e._errorProcessing([t],i)):(t.accepted=!0,e.options.autoQueue&&e.enqueueFile(t)),e._updateMaxFilesReachedClass()}}(this))},i.prototype.enqueueFiles=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++)e=t[i],this.enqueueFile(e);return null},i.prototype.enqueueFile=function(t){if(t.status!==i.ADDED||!0!==t.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(t.status=i.QUEUED,this.options.autoProcessQueue)return setTimeout(function(t){return function(){return t.processQueue()}}(this),0)},i.prototype._thumbnailQueue=[],i.prototype._processingThumbnail=!1,i.prototype._enqueueThumbnail=function(t){if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(t),setTimeout(function(t){return function(){return t._processThumbnailQueue()}}(this),0)},i.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(t){return function(){return t._processingThumbnail=!1,t._processThumbnailQueue()}}(this))},i.prototype.removeFile=function(t){if(t.status===i.UPLOADING&&this.cancelUpload(t),this.files=a(this.files,t),this.emit("removedfile",t),0===this.files.length)return this.emit("reset")},i.prototype.removeAllFiles=function(t){var e,n,r,s;for(null==t&&(t=!1),s=this.files.slice(),n=0,r=s.length;n<r;n++)e=s[n],(e.status!==i.UPLOADING||t)&&this.removeFile(e);return null},i.prototype.createThumbnail=function(t,e){var i;return i=new FileReader,i.onload=function(n){return function(){return"image/svg+xml"===t.type?(n.emit("thumbnail",t,i.result),void(null!=e&&e())):n.createThumbnailFromUrl(t,i.result,e)}}(this),i.readAsDataURL(t)},i.prototype.createThumbnailFromUrl=function(t,e,i,n){var r;return r=document.createElement("img"),n&&(r.crossOrigin=n),r.onload=function(e){return function(){var n,o,a,l,c,h,u,d;if(t.width=r.width,t.height=r.height,
a=e.options.resize.call(e,t),null==a.trgWidth&&(a.trgWidth=a.optWidth),null==a.trgHeight&&(a.trgHeight=a.optHeight),n=document.createElement("canvas"),o=n.getContext("2d"),n.width=a.trgWidth,n.height=a.trgHeight,s(o,r,null!=(c=a.srcX)?c:0,null!=(h=a.srcY)?h:0,a.srcWidth,a.srcHeight,null!=(u=a.trgX)?u:0,null!=(d=a.trgY)?d:0,a.trgWidth,a.trgHeight),l=n.toDataURL("image/png"),e.emit("thumbnail",t,l),null!=i)return i()}}(this),null!=i&&(r.onerror=i),r.src=e},i.prototype.processQueue=function(){var t,e,i,n;if(e=this.options.parallelUploads,i=this.getUploadingFiles().length,t=i,!(i>=e)&&(n=this.getQueuedFiles(),n.length>0)){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,e-i));for(;t<e;){if(!n.length)return;this.processFile(n.shift()),t++}}},i.prototype.processFile=function(t){return this.processFiles([t])},i.prototype.processFiles=function(t){var e,n,r;for(n=0,r=t.length;n<r;n++)e=t[n],e.processing=!0,e.status=i.UPLOADING,this.emit("processing",e);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)},i.prototype._getFilesWithXhr=function(t){var e;return function(){var i,n,r,s;for(r=this.files,s=[],i=0,n=r.length;i<n;i++)e=r[i],e.xhr===t&&s.push(e);return s}.call(this)},i.prototype.cancelUpload=function(t){var e,n,r,s,o,a,l;if(t.status===i.UPLOADING){for(n=this._getFilesWithXhr(t.xhr),r=0,o=n.length;r<o;r++)e=n[r],e.status=i.CANCELED;for(t.xhr.abort(),s=0,a=n.length;s<a;s++)e=n[s],this.emit("canceled",e);this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else(l=t.status)!==i.ADDED&&l!==i.QUEUED||(t.status=i.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));if(this.options.autoProcessQueue)return this.processQueue()},r=function(){var t,e;return e=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],"function"==typeof e?e.apply(this,t):e},i.prototype.uploadFile=function(t){return this.uploadFiles([t])},i.prototype.uploadFiles=function(t){var e,s,o,a,l,c,h,u,d,f,p,m,g,v,y,b,w,k,x,_,C,D,S,T,M,L,E,$,A,I,N,F,P,O;for(x=new XMLHttpRequest,_=0,T=t.length;_<T;_++)e=t[_],e.xhr=x;m=r(this.options.method,t),w=r(this.options.url,t),x.open(m,w,!0),x.withCredentials=!!this.options.withCredentials,y=null,o=function(i){return function(){var n,r,s;for(s=[],n=0,r=t.length;n<r;n++)e=t[n],s.push(i._errorProcessing(t,y||i.options.dictResponseError.replace("{{statusCode}}",x.status),x));return s}}(this),b=function(i){return function(n){var r,s,o,a,l,c,h,u,d;if(null!=n)for(s=100*n.loaded/n.total,o=0,c=t.length;o<c;o++)e=t[o],e.upload={progress:s,total:n.total,bytesSent:n.loaded};else{for(r=!0,s=100,a=0,h=t.length;a<h;a++)e=t[a],100===e.upload.progress&&e.upload.bytesSent===e.upload.total||(r=!1),e.upload.progress=s,e.upload.bytesSent=e.upload.total;if(r)return}for(d=[],l=0,u=t.length;l<u;l++)e=t[l],d.push(i.emit("uploadprogress",e,s,e.upload.bytesSent));return d}}(this),x.onload=function(e){return function(n){var r;if(t[0].status!==i.CANCELED&&4===x.readyState){if(y=x.responseText,x.getResponseHeader("content-type")&&~x.getResponseHeader("content-type").indexOf("application/json"))try{y=JSON.parse(y)}catch(t){n=t,y="Invalid JSON response from server."}return b(),200<=(r=x.status)&&r<300?e._finished(t,y,n):o()}}}(this),x.onerror=function(){return function(){if(t[0].status!==i.CANCELED)return o()}}(),v=null!=(A=x.upload)?A:x,v.onprogress=b,c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&n(c,this.options.headers);for(a in c)(l=c[a])&&x.setRequestHeader(a,l);if(s=new FormData,this.options.params){I=this.options.params;for(p in I)k=I[p],s.append(p,k)}for(C=0,M=t.length;C<M;C++)e=t[C],this.emit("sending",e,x,s);if(this.options.uploadMultiple&&this.emit("sendingmultiple",t,x,s),"FORM"===this.element.tagName)for(N=this.element.querySelectorAll("input, textarea, select, button"),D=0,L=N.length;D<L;D++)if(u=N[D],d=u.getAttribute("name"),f=u.getAttribute("type"),"SELECT"===u.tagName&&u.hasAttribute("multiple"))for(F=u.options,S=0,E=F.length;S<E;S++)g=F[S],g.selected&&s.append(d,g.value);else(!f||"checkbox"!==(P=f.toLowerCase())&&"radio"!==P||u.checked)&&s.append(d,u.value);for(h=$=0,O=t.length-1;0<=O?$<=O:$>=O;h=0<=O?++$:--$)s.append(this._getParamName(h),t[h],this._renameFilename(t[h].name));return this.submitRequest(x,s,t)},i.prototype.submitRequest=function(t,e){return t.send(e)},i.prototype._finished=function(t,e,n){var r,s,o;for(s=0,o=t.length;s<o;s++)r=t[s],r.status=i.SUCCESS,this.emit("success",r,e,n),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("successmultiple",t,e,n),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},i.prototype._errorProcessing=function(t,e,n){var r,s,o;for(s=0,o=t.length;s<o;s++)r=t[s],r.status=i.ERROR,this.emit("error",r,e,n),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("errormultiple",t,e,n),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},i}(e),t.version="4.3.0",t.options={},t.optionsForElement=function(e){return e.getAttribute("id")?t.options[i(e.getAttribute("id"))]:void 0},t.instances=[],t.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},t.autoDiscover=!0,t.discover=function(){var e,i,n,r,s,o;for(document.querySelectorAll?n=document.querySelectorAll(".dropzone"):(n=[],e=function(t){var e,i,r,s;for(s=[],i=0,r=t.length;i<r;i++)e=t[i],/(^| )dropzone($| )/.test(e.className)?s.push(n.push(e)):s.push(void 0);return s},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),o=[],r=0,s=n.length;r<s;r++)i=n[r],!1!==t.optionsForElement(i)?o.push(new t(i)):o.push(void 0);return o},t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],t.isBrowserSupported=function(){var e,i,n,r,s;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(s=t.blacklistedBrowsers,n=0,r=s.length;n<r;n++)i=s[n],i.test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},a=function(t,e){var i,n,r,s;for(s=[],n=0,r=t.length;n<r;n++)(i=t[n])!==e&&s.push(i);return s},i=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})},t.createElement=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.childNodes[0]},t.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},t.getElement=function(t,e){var i;if("string"==typeof t?i=document.querySelector(t):null!=t.nodeType&&(i=t),null==i)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},t.getElements=function(t,e){var i,n,r,s,o,a,l;if(t instanceof Array){n=[];try{for(r=0,o=t.length;r<o;r++)i=t[r],n.push(this.getElement(i,e))}catch(t){t,n=null}}else if("string"==typeof t)for(n=[],l=document.querySelectorAll(t),s=0,a=l.length;s<a;s++)i=l[s],n.push(i);else null!=t.nodeType&&(n=[t]);if(null==n||!n.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},t.confirm=function(t,e,i){return window.confirm(t)?e():null!=i?i():void 0},t.isValidFile=function(t,e){var i,n,r,s,o;if(!e)return!0;for(e=e.split(","),n=t.type,i=n.replace(/\/.*$/,""),s=0,o=e.length;s<o;s++)if(r=e[s],r=r.trim(),"."===r.charAt(0)){if(-1!==t.name.toLowerCase().indexOf(r.toLowerCase(),t.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(i===r.replace(/\/.*$/,""))return!0}else if(n===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}),"undefined"!=typeof module&&null!==module?module.exports=t:window.Dropzone=t,t.ADDED="added",t.QUEUED="queued",t.ACCEPTED=t.QUEUED,t.UPLOADING="uploading",t.PROCESSING=t.UPLOADING,t.CANCELED="canceled",t.ERROR="error",t.SUCCESS="success",r=function(t){var e,i,n,r,s,o,a,l,c;for(t.naturalWidth,o=t.naturalHeight,i=document.createElement("canvas"),i.width=1,i.height=o,n=i.getContext("2d"),n.drawImage(t,0,0),r=n.getImageData(0,0,1,o).data,c=0,s=o,a=o;a>c;)e=r[4*(a-1)+3],0===e?s=a:c=a,a=s+c>>1;return l=a/o,0===l?1:l},s=function(t,e,i,n,s,o,a,l,c,h){var u;return u=r(e),t.drawImage(e,i,n,s,o,a,l,c,h/u)},n=function(t,e){var i,n,r,s,o,a,l,c,h;if(r=!1,h=!0,n=t.document,c=n.documentElement,i=n.addEventListener?"addEventListener":"attachEvent",l=n.addEventListener?"removeEventListener":"detachEvent",a=n.addEventListener?"":"on",s=function(i){if("readystatechange"!==i.type||"complete"===n.readyState)return("load"===i.type?t:n)[l](a+i.type,s,!1),!r&&(r=!0)?e.call(t,i.type||i):void 0},o=function(){try{c.doScroll("left")}catch(t){return t,void setTimeout(o,50)}return s("poll")},"complete"!==n.readyState){if(n.createEventObject&&c.doScroll){try{h=!t.frameElement}catch(t){}h&&o()}return n[i](a+"DOMContentLoaded",s,!1),n[i](a+"readystatechange",s,!1),t[i](a+"load",s,!1)}},t._autoDiscoverFunction=function(){if(t.autoDiscover)return t.discover()},n(window,t._autoDiscoverFunction)}.call(this),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function($){"use strict";var func=function(){var t=function(t){return function(e){return t===e}},e=function(t,e){return t===e},i=function(t){return function(e,i){return e[t]===i[t]}},n=function(){return!0},r=function(){return!1},s=function(t){return function(){return!t.apply(t,arguments)}},o=function(t,e){return function(i){return t(i)&&e(i)}},a=function(t){return t},l=function(t,e){return function(){return t[e].apply(t,arguments)}},c=0,h=function(t){var e=++c+"";return t?t+e:e},u=function(t){var e=$(document);return{top:t.top+e.scrollTop(),left:t.left+e.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}},d=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e},f=function(t,e){return(e=e||"")+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")},p=function(t,e,i){var n;return function(){var r=this,s=arguments,o=function(){n=null,i||t.apply(r,s)},a=i&&!n;clearTimeout(n),n=setTimeout(o,e),a&&t.apply(r,s)}};return{eq:t,eq2:e,peq2:i,ok:n,fail:r,self:a,not:s,and:o,invoke:l,uniqueId:h,rect2bnd:u,invertObject:d,namespaceToCamel:f,debounce:p}}(),list=function(){var t=function(t){return t[0]},e=function(t){return t[t.length-1]},i=function(t){return t.slice(0,t.length-1)},n=function(t){return t.slice(1)},r=function(t,e){for(var i=0,n=t.length;n>i;i++){var r=t[i];if(e(r))return r}},s=function(t,e){for(var i=0,n=t.length;n>i;i++)if(!e(t[i]))return!1;return!0},o=function(t,e){return $.inArray(e,t)},a=function(t,e){return-1!==o(t,e)},l=function(t,e){return e=e||func.self,t.reduce(function(t,i){return t+e(i)},0)},c=function(t){for(var e=[],i=-1,n=t.length;++i<n;)e[i]=t[i];return e},h=function(t){return!t||!t.length},u=function(i,r){return i.length?n(i).reduce(function(t,i){var n=e(t);return r(e(n),i)?n[n.length]=i:t[t.length]=[i],t},[[t(i)]]):[]},d=function(t){for(var e=[],i=0,n=t.length;n>i;i++)t[i]&&e.push(t[i]);return e},f=function(t){for(var e=[],i=0,n=t.length;n>i;i++)a(e,t[i])||e.push(t[i]);return e},p=function(t,e){var i=o(t,e);return-1===i?null:t[i+1]};return{head:t,last:e,initial:i,tail:n,prev:function(t,e){var i=o(t,e);return-1===i?null:t[i-1]},next:p,find:r,contains:a,all:s,sum:l,from:c,isEmpty:h,clusterBy:u,compact:d,unique:f}}(),isSupportAmd="function"==typeof define&&define.amd,isFontInstalled=function(t){var e="Comic Sans MS"===t?"Courier New":"Comic Sans MS",i=$("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),n=i.css("fontFamily",e).width(),r=i.css("fontFamily",t+","+e).width();return i.remove(),n!==r},userAgent=navigator.userAgent,isMSIE=/MSIE|Trident/i.test(userAgent),browserVersion;if(isMSIE){var matches=/MSIE (\d+[.]\d+)/.exec(userAgent);matches&&(browserVersion=parseFloat(matches[1])),(matches=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(userAgent))&&(browserVersion=parseFloat(matches[1]))}var isEdge=/Edge\/\d+/.test(userAgent),hasCodeMirror=!!window.CodeMirror;if(!hasCodeMirror&&isSupportAmd&&"undefined"!=typeof require)if("undefined"!=typeof require.resolve)try{require.resolve("codemirror"),hasCodeMirror=!0}catch(t){}else"undefined"!=typeof eval("require").specified&&(hasCodeMirror=eval("require").specified("codemirror"));var agent={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:isMSIE,isEdge:isEdge,isFF:!isEdge&&/firefox/i.test(userAgent),isPhantom:/PhantomJS/i.test(userAgent),isWebkit:!isEdge&&/webkit/i.test(userAgent),isChrome:!isEdge&&/chrome/i.test(userAgent),isSafari:!isEdge&&/safari/i.test(userAgent),browserVersion:browserVersion,jqueryVersion:parseFloat($.fn.jquery),isSupportAmd:isSupportAmd,hasCodeMirror:hasCodeMirror,isFontInstalled:isFontInstalled,isW3CRangeSupport:!!document.createRange},NBSP_CHAR=String.fromCharCode(160),ZERO_WIDTH_NBSP_CHAR="\ufeff",dom=function(){var t=function(t){return t&&$(t).hasClass("note-editable")},e=function(t){return t&&$(t).hasClass("note-control-sizing")},i=function(t){return t=t.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===t}},n=function(t){return t&&3===t.nodeType},r=function(t){return t&&1===t.nodeType},s=function(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(t.nodeName.toUpperCase())},o=function(e){return!t(e)&&(e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase()))},a=function(t){return t&&/^H[1-7]/.test(t.nodeName.toUpperCase())},l=i("PRE"),c=i("LI"),h=function(t){return o(t)&&!c(t)},u=i("TABLE"),d=i("DATA"),f=function(t){return!(y(t)||p(t)||m(t)||o(t)||u(t)||v(t)||d(t))},p=function(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())},m=i("HR"),g=function(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())},v=i("BLOCKQUOTE"),y=function(e){return g(e)||v(e)||t(e)},b=i("A"),w=function(t){return f(t)&&!!L(t,o)},k=function(t){return f(t)&&!L(t,o)},x=i("BODY"),_=function(t,e){return t.nextSibling===e||t.previousSibling===e},C=function(t,e){e=e||func.ok;var i=[];return t.previousSibling&&e(t.previousSibling)&&i.push(t.previousSibling),i.push(t),t.nextSibling&&e(t.nextSibling)&&i.push(t.nextSibling),i},D=agent.isMSIE&&agent.browserVersion<11?"&nbsp;":"<br>",S=function(t){return n(t)?t.nodeValue.length:t?t.childNodes.length:0},T=function(t){var e=S(t);return 0===e||(!n(t)&&1===e&&t.innerHTML===D||!(!list.all(t.childNodes,n)||""!==t.innerHTML))},M=function(t){s(t)||S(t)||(t.innerHTML=D)},L=function(e,i){for(;e;){if(i(e))return e;if(t(e))break;e=e.parentNode}return null},E=function(e,i){for(e=e.parentNode;e&&1===S(e);){if(i(e))return e;if(t(e))break;e=e.parentNode}return null},A=function(e,i){i=i||func.fail;var n=[];return L(e,function(e){return t(e)||n.push(e),i(e)}),n},I=function(t,e){var i=A(t);return list.last(i.filter(e))},N=function(t,e){for(var i=A(t),n=e;n;n=n.parentNode)if($.inArray(n,i)>-1)return n;return null},F=function(t,e){e=e||func.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.previousSibling;return i},P=function(t,e){e=e||func.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.nextSibling;return i},O=function(t,e){var i=[];return e=e||func.ok,function n(r){t!==r&&e(r)&&i.push(r);for(var s=0,o=r.childNodes.length;o>s;s++)n(r.childNodes[s])}(t),i},H=function(t,e){var i=t.parentNode,n=$("<"+e+">")[0];return i.insertBefore(n,t),n.appendChild(t),n},z=function(t,e){var i=e.nextSibling,n=e.parentNode;return i?n.insertBefore(t,i):n.appendChild(t),t},R=function(t,e){return $.each(e,function(e,i){t.appendChild(i)}),t},U=function(t){return 0===t.offset},B=function(t){return t.offset===S(t.node)},W=function(t){return U(t)||B(t)},j=function(t,e){for(;t&&t!==e;){if(0!==G(t))return!1;t=t.parentNode}return!0},Y=function(t,e){if(!e)return!1;for(;t&&t!==e;){if(G(t)!==S(t.parentNode)-1)return!1;t=t.parentNode}return!0},q=function(t,e){return U(t)&&j(t.node,e)},V=function(t,e){return B(t)&&Y(t.node,e)},G=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},K=function(t){return!!(t&&t.childNodes&&t.childNodes.length)},X=function(e,i){var n,r;if(0===e.offset){if(t(e.node))return null;n=e.node.parentNode,r=G(e.node)}else K(e.node)?(n=e.node.childNodes[e.offset-1],r=S(n)):(n=e.node,r=i?0:e.offset-1);return{node:n,offset:r}},Z=function(e,i){var n,r;if(S(e.node)===e.offset){if(t(e.node))return null;n=e.node.parentNode,r=G(e.node)+1}else K(e.node)?(n=e.node.childNodes[e.offset],r=0):(n=e.node,r=i?S(e.node):e.offset+1);return{node:n,offset:r}},Q=function(t,e){return t.node===e.node&&t.offset===e.offset},J=function(t){if(n(t.node)||!K(t.node)||T(t.node))return!0;var e=t.node.childNodes[t.offset-1],i=t.node.childNodes[t.offset];return!(e&&!s(e)||i&&!s(i))},tt=function(t,e){for(;t;){if(e(t))return t;t=X(t)}return null},et=function(t,e){for(;t;){if(e(t))return t;t=Z(t)}return null},it=function(t){if(!n(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==NBSP_CHAR},nt=function(t,e,i,n){for(var r=t;r&&(i(r),!Q(r,e));){var s=n&&t.node!==r.node&&e.node!==r.node;r=Z(r,s)}},rt=function(t,e){return A(e,func.eq(t)).map(G).reverse()},st=function(t,e){for(var i=t,n=0,r=e.length;r>n;n++)i=i.childNodes.length<=e[n]?i.childNodes[i.childNodes.length-1]:i.childNodes[e[n]];return i},ot=function(t,e){var i=e&&e.isSkipPaddingBlankHTML,r=e&&e.isNotSplitEdgePoint;if(W(t)&&(n(t.node)||r)){if(U(t))return t.node;if(B(t))return t.node.nextSibling}if(n(t.node))return t.node.splitText(t.offset);var s=t.node.childNodes[t.offset],o=z(t.node.cloneNode(!1),t.node);return R(o,P(s)),i||(M(t.node),M(o)),o},at=function(t,e,i){var n=A(e.node,func.eq(t));return n.length?1===n.length?ot(e,i):n.reduce(function(t,n){return t===e.node&&(t=ot(e,i)),ot({node:n,offset:t?dom.position(t):S(n)},i)}):null},lt=function(t,e){var i,n,r=e?o:y,s=A(t.node,r),a=list.last(s)||t.node;r(a)?(i=s[s.length-2],n=a):(i=a,n=i.parentNode);var l=i&&at(i,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return l||n!==t.node||(l=t.node.childNodes[t.offset]),{rightNode:l,container:n}},ct=function(t){return document.createElement(t)},ht=function(t){return document.createTextNode(t)},ut=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var i=t.parentNode;if(!e){var n,r,s=[];for(n=0,r=t.childNodes.length;r>n;n++)s.push(t.childNodes[n]);for(n=0,r=s.length;r>n;n++)i.insertBefore(s[n],t)}i.removeChild(t)}},dt=function(e,i){for(;e&&!t(e)&&i(e);){var n=e.parentNode;ut(e),e=n}},ft=function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var i=ct(e);return t.style.cssText&&(i.style.cssText=t.style.cssText),R(i,list.from(t.childNodes)),z(i,t),ut(t),i},pt=i("TEXTAREA"),mt=function(t,e){var i=pt(t[0])?t.val():t.html();return e?i.replace(/[\n\r]/g,""):i},gt=function(t,e){var i=mt(t);if(e){var n=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;i=i.replace(n,function(t,e,i){i=i.toUpperCase();var n=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!e,r=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return t+(n||r?"\n":"")}),i=$.trim(i)}return i},vt=function(t){var e=$(t),i=e.offset(),n=e.outerHeight(!0);return{left:i.left,top:i.top+n}},yt=function(t,e){Object.keys(e).forEach(function(i){t.on(i,e[i])})},bt=function(t,e){Object.keys(e).forEach(function(i){t.off(i,e[i])})};return{NBSP_CHAR:NBSP_CHAR,ZERO_WIDTH_NBSP_CHAR:ZERO_WIDTH_NBSP_CHAR,blank:D,emptyPara:"<p>"+D+"</p>",makePredByNodeName:i,isEditable:t,isControlSizing:e,isText:n,isElement:r,isVoid:s,isPara:o,isPurePara:h,isHeading:a,isInline:f,isBlock:func.not(f),isBodyInline:k,isBody:x,isParaInline:w,isPre:l,isList:p,isTable:u,isData:d,isCell:g,isBlockquote:v,isBodyContainer:y,isAnchor:b,isDiv:i("DIV"),isLi:c,isBR:i("BR"),isSpan:i("SPAN"),isB:i("B"),isU:i("U"),isS:i("S"),isI:i("I"),isImg:i("IMG"),isTextarea:pt,isEmpty:T,isEmptyAnchor:func.and(b,T),isClosestSibling:_,withClosestSiblings:C,nodeLength:S,isLeftEdgePoint:U,isRightEdgePoint:B,isEdgePoint:W,isLeftEdgeOf:j,isRightEdgeOf:Y,isLeftEdgePointOf:q,isRightEdgePointOf:V,prevPoint:X,nextPoint:Z,isSamePoint:Q,isVisiblePoint:J,prevPointUntil:tt,nextPointUntil:et,isCharPoint:it,walkPoint:nt,ancestor:L,singleChildAncestor:E,listAncestor:A,lastAncestor:I,listNext:P,listPrev:F,listDescendant:O,commonAncestor:N,wrap:H,insertAfter:z,appendChildNodes:R,position:G,hasChildren:K,makeOffsetPath:rt,fromOffsetPath:st,splitTree:at,splitPoint:lt,create:ct,createText:ht,remove:ut,removeWhile:dt,replace:ft,html:gt,value:mt,posFromPlaceholder:vt,attachEvents:yt,detachEvents:bt}}(),Context=function(t,e){var i=this,n=$.summernote.ui;return this.memos={},this.modules={},this.layoutInfo={},this.options=e,this.initialize=function(){return this.layoutInfo=n.createLayout(t,e),this._initialize(),t.hide(),this},this.destroy=function(){this._destroy(),t.removeData("summernote"),n.removeLayout(t,this.layoutInfo)},this.reset=function(){var t=i.isDisabled();this.code(dom.emptyPara),this._destroy(),this._initialize(),t&&i.disable()},this._initialize=function(){var t=$.extend({},this.options.buttons);Object.keys(t).forEach(function(e){i.memo("button."+e,t[e])});var e=$.extend({},this.options.modules,$.summernote.plugins||{});Object.keys(e).forEach(function(t){i.module(t,e[t],!0)}),Object.keys(this.modules).forEach(function(t){i.initializeModule(t)})},this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(t){i.removeModule(t)}),Object.keys(this.memos).forEach(function(t){i.removeMemo(t)})},this.code=function(e){var i=this.invoke("codeview.isActivated");return void 0===e?(this.invoke("codeview.sync"),i?this.layoutInfo.codable.val():this.layoutInfo.editable.html()):(i?this.layoutInfo.codable.val(e):this.layoutInfo.editable.html(e),t.val(e),void this.triggerEvent("change",e))},this.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0)},this.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0)},this.triggerEvent=function(){var e=list.head(arguments),i=list.tail(list.from(arguments)),n=this.options.callbacks[func.namespaceToCamel(e,"on")];n&&n.apply(t[0],i),t.trigger("summernote."+e,i)},this.initializeModule=function(e){var i=this.modules[e];i.shouldInitialize=i.shouldInitialize||func.ok,i.shouldInitialize()&&(i.initialize&&i.initialize(),i.events&&dom.attachEvents(t,i.events))},this.module=function(t,e,i){return 1===arguments.length?this.modules[t]:(this.modules[t]=new e(this),void(i||this.initializeModule(t)))},this.removeModule=function(e){var i=this.modules[e];i.shouldInitialize()&&(i.events&&dom.detachEvents(t,i.events),i.destroy&&i.destroy()),delete this.modules[e]},this.memo=function(t,e){return 1===arguments.length?this.memos[t]:void(this.memos[t]=e)},this.removeMemo=function(t){this.memos[t]&&this.memos[t].destroy&&this.memos[t].destroy(),delete this.memos[t]},this.createInvokeHandler=function(t,e){return function(n){n.preventDefault(),i.invoke(t,e||$(n.target).closest("[data-value]").data("value"))}},this.invoke=function(){var t=list.head(arguments),e=list.tail(list.from(arguments)),i=t.split("."),n=i.length>1,r=n&&list.head(i),s=n?list.last(i):list.head(i),o=this.modules[r||"editor"];return!r&&this[s]?this[s].apply(this,e):o&&o[s]&&o.shouldInitialize()?o[s].apply(o,e):void 0},this.initialize()};$.fn.extend({summernote:function(){var t=$.type(list.head(arguments)),e="string"===t,i="object"===t,n=i?list.head(arguments):{};n=$.extend({},$.summernote.options,n),n.langInfo=$.extend(!0,{},$.summernote.lang["en-US"],$.summernote.lang[n.lang]),n.icons=$.extend(!0,{},$.summernote.options.icons,n.icons),this.each(function(t,e){var i=$(e);if(!i.data("summernote")){var r=new Context(i,n);i.data("summernote",r),i.data("summernote").triggerEvent("init",r.layoutInfo)}});var r=this.first();if(r.length){var s=r.data("summernote");if(e)return s.invoke.apply(s,list.from(arguments));n.focus&&s.invoke("editor.focus")}return this}});var Renderer=function(t,e,i,n){this.render=function(r){var s=$(t);if(i&&i.contents&&s.html(i.contents),i&&i.className&&s.addClass(i.className),i&&i.data&&$.each(i.data,function(t,e){s.attr("data-"+t,e)}),i&&i.click&&s.on("click",i.click),e){var o=s.find(".note-children-container");e.forEach(function(t){t.render(o.length?o:s)})}return n&&n(s,i),i&&i.callback&&i.callback(s),r&&r.append(s),s}},renderer={create:function(t,e){return function(){var i=$.isArray(arguments[0])?arguments[0]:[],n="object"==typeof arguments[1]?arguments[1]:arguments[0];return n&&n.children&&(i=n.children),new Renderer(t,i,n,e)}}},editor=renderer.create('<div class="note-editor note-frame panel panel-default"/>'),toolbar=renderer.create('<div class="note-toolbar panel-heading"/>'),editingArea=renderer.create('<div class="note-editing-area"/>'),codable=renderer.create('<textarea class="note-codable"/>'),editable=renderer.create('<div class="note-editable panel-body" contentEditable="true"/>'),statusbar=renderer.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),airEditor=renderer.create('<div class="note-editor"/>'),airEditable=renderer.create('<div class="note-editable" contentEditable="true"/>'),buttonGroup=renderer.create('<div class="note-btn-group btn-group">'),button=renderer.create('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1">',function(t,e){e&&e.tooltip&&t.attr({title:e.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}),dropdown=renderer.create('<div class="dropdown-menu">',function(t,e){var i=$.isArray(e.items)?e.items.map(function(t){return'<li><a href="#" data-value="'+("string"==typeof t?t:t.value||"")+'">'+(e.template?e.template(t):t)+"</a></li>"}).join(""):e.items;t.html(i)}),dropdownCheck=renderer.create('<div class="dropdown-menu note-check">',function(t,e){var i=$.isArray(e.items)?e.items.map(function(t){var i="string"==typeof t?t:t.value||"",n=e.template?e.template(t):t;return'<li><a href="#" data-value="'+i+'">'+icon(e.checkClassName)+" "+n+"</a></li>"}).join(""):e.items;t.html(i)}),palette=renderer.create('<div class="note-color-palette"/>',function(t,e){for(var i=[],n=0,r=e.colors.length;r>n;n++){for(var s=e.eventName,o=e.colors[n],a=[],l=0,c=o.length;c>l;l++){var h=o[l];a.push(['<button type="button" class="note-color-btn"','style="background-color:',h,'" ','data-event="',s,'" ','data-value="',h,'" ','title="',h,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}i.push('<div class="note-color-row">'+a.join("")+"</div>")}t.html(i.join("")),t.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),dialog=renderer.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(t,e){e.fade&&t.addClass("fade"),t.html(['<div class="modal-dialog">','  <div class="modal-content">',e.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>      <h4 class="modal-title">'+e.title+"</h4>    </div>":"",'    <div class="modal-body">'+e.body+"</div>",e.footer?'    <div class="modal-footer">'+e.footer+"</div>":"","  </div>","</div>"].join(""))}),popover=renderer.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(t,e){var i="undefined"!=typeof e.direction?e.direction:"bottom";t.addClass(i),e.hideArrow&&t.find(".arrow").hide()}),icon=function(t,e){return"<"+(e=e||"i")+' class="'+t+'"/>'},ui={editor:editor,toolbar:toolbar,editingArea:editingArea,codable:codable,editable:editable,statusbar:statusbar,airEditor:airEditor,airEditable:airEditable,buttonGroup:buttonGroup,button:button,dropdown:dropdown,dropdownCheck:dropdownCheck,palette:palette,dialog:dialog,popover:popover,icon:icon,toggleBtn:function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},onDialogShown:function(t,e){t.one("shown.bs.modal",e)},onDialogHidden:function(t,e){t.one("hidden.bs.modal",e)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t,e){var i=(e.airMode?ui.airEditor([ui.editingArea([ui.airEditable()])]):ui.editor([ui.toolbar(),ui.editingArea([ui.codable(),ui.editable()]),ui.statusbar()])).render();return i.insertAfter(t),{note:t,editor:i,toolbar:i.find(".note-toolbar"),editingArea:i.find(".note-editing-area"),editable:i.find(".note-editable"),codable:i.find(".note-codable"),statusbar:i.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html()),e.editor.remove(),t.show()}};$.summernote=$.summernote||{lang:{}},$.extend($.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var key=function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(e){
return list.contains([t.BACKSPACE,t.TAB,t.ENTER,t.SPACE],e)},isMove:function(e){return list.contains([t.LEFT,t.UP,t.RIGHT,t.DOWN],e)},nameFromCode:func.invertObject(t),code:t}}(),range=function(){var t=function(t,e){var i,n,r=t.parentElement(),s=document.body.createTextRange(),o=list.from(r.childNodes);for(i=0;i<o.length;i++)if(!dom.isText(o[i])){if(s.moveToElementText(o[i]),s.compareEndPoints("StartToStart",t)>=0)break;n=o[i]}if(0!==i&&dom.isText(o[i-1])){var a=document.body.createTextRange(),l=null;a.moveToElementText(n||r),a.collapse(!n),l=n?n.nextSibling:r.firstChild;var c=t.duplicate();c.setEndPoint("StartToStart",a);for(var h=c.text.replace(/[\r\n]/g,"").length;h>l.nodeValue.length&&l.nextSibling;)h-=l.nodeValue.length,l=l.nextSibling;l.nodeValue,e&&l.nextSibling&&dom.isText(l.nextSibling)&&h===l.nodeValue.length&&(h-=l.nodeValue.length,l=l.nextSibling),r=l,i=h}return{cont:r,offset:i}},e=function(t){var e=function(t,i){var n,r;if(dom.isText(t)){var s=dom.listPrev(t,func.not(dom.isText)),o=list.last(s).previousSibling;n=o||t.parentNode,i+=list.sum(list.tail(s),dom.nodeLength),r=!o}else{if(n=t.childNodes[i]||t,dom.isText(n))return e(n,0);i=0,r=!1}return{node:n,collapseToStart:r,offset:i}},i=document.body.createTextRange(),n=e(t.node,t.offset);return i.moveToElementText(n.node),i.collapse(n.collapseToStart),i.moveStart("character",n.offset),i},i=function(t,n,r,s){this.sc=t,this.so=n,this.ec=r,this.eo=s;var o=function(){if(agent.isW3CRangeSupport){var i=document.createRange();return i.setStart(t,n),i.setEnd(r,s),i}var o=e({node:t,offset:n});return o.setEndPoint("EndToEnd",e({node:r,offset:s})),o};this.getPoints=function(){return{sc:t,so:n,ec:r,eo:s}},this.getStartPoint=function(){return{node:t,offset:n}},this.getEndPoint=function(){return{node:r,offset:s}},this.select=function(){var t=o();if(agent.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},this.scrollIntoView=function(t){var e=$(t).height();return t.scrollTop+e<this.sc.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+e-this.sc.offsetTop)),this},this.normalize=function(){var t=function(t,e){if(dom.isVisiblePoint(t)&&!dom.isEdgePoint(t)||dom.isVisiblePoint(t)&&dom.isRightEdgePoint(t)&&!e||dom.isVisiblePoint(t)&&dom.isLeftEdgePoint(t)&&e||dom.isVisiblePoint(t)&&dom.isBlock(t.node)&&dom.isEmpty(t.node))return t;var i=dom.ancestor(t.node,dom.isBlock);if((dom.isLeftEdgePointOf(t,i)||dom.isVoid(dom.prevPoint(t).node))&&!e||(dom.isRightEdgePointOf(t,i)||dom.isVoid(dom.nextPoint(t).node))&&e){if(dom.isVisiblePoint(t))return t;e=!e}return(e?dom.nextPointUntil(dom.nextPoint(t),dom.isVisiblePoint):dom.prevPointUntil(dom.prevPoint(t),dom.isVisiblePoint))||t},e=t(this.getEndPoint(),!1),n=this.isCollapsed()?e:t(this.getStartPoint(),!0);return new i(n.node,n.offset,e.node,e.offset)},this.nodes=function(t,e){t=t||func.ok;var i=e&&e.includeAncestor,n=e&&e.fullyContains,r=this.getStartPoint(),s=this.getEndPoint(),o=[],a=[];return dom.walkPoint(r,s,function(e){if(!dom.isEditable(e.node)){var r;n?(dom.isLeftEdgePoint(e)&&a.push(e.node),dom.isRightEdgePoint(e)&&list.contains(a,e.node)&&(r=e.node)):r=i?dom.ancestor(e.node,t):e.node,r&&t(r)&&o.push(r)}},!0),list.unique(o)},this.commonAncestor=function(){return dom.commonAncestor(t,r)},this.expand=function(e){var o=dom.ancestor(t,e),a=dom.ancestor(r,e);if(!o&&!a)return new i(t,n,r,s);var l=this.getPoints();return o&&(l.sc=o,l.so=0),a&&(l.ec=a,l.eo=dom.nodeLength(a)),new i(l.sc,l.so,l.ec,l.eo)},this.collapse=function(e){return e?new i(t,n,t,n):new i(r,s,r,s)},this.splitText=function(){var e=t===r,o=this.getPoints();return dom.isText(r)&&!dom.isEdgePoint(this.getEndPoint())&&r.splitText(s),dom.isText(t)&&!dom.isEdgePoint(this.getStartPoint())&&(o.sc=t.splitText(n),o.so=0,e&&(o.ec=o.sc,o.eo=s-n)),new i(o.sc,o.so,o.ec,o.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var t=this.splitText(),e=t.nodes(null,{fullyContains:!0}),n=dom.prevPointUntil(t.getStartPoint(),function(t){return!list.contains(e,t.node)}),r=[];return $.each(e,function(t,e){var i=e.parentNode;n.node!==i&&1===dom.nodeLength(i)&&r.push(i),dom.remove(e,!1)}),$.each(r,function(t,e){dom.remove(e,!1)}),new i(n.node,n.offset,n.node,n.offset).normalize()};var a=function(e){return function(){var i=dom.ancestor(t,e);return!!i&&i===dom.ancestor(r,e)}};this.isOnEditable=a(dom.isEditable),this.isOnList=a(dom.isList),this.isOnAnchor=a(dom.isAnchor),this.isOnCell=a(dom.isCell),this.isOnData=a(dom.isData),this.isLeftEdgeOf=function(t){if(!dom.isLeftEdgePoint(this.getStartPoint()))return!1;var e=dom.ancestor(this.sc,t);return e&&dom.isLeftEdgeOf(this.sc,e)},this.isCollapsed=function(){return t===r&&n===s},this.wrapBodyInlineWithPara=function(){if(dom.isBodyContainer(t)&&dom.isEmpty(t))return t.innerHTML=dom.emptyPara,new i(t.firstChild,0,t.firstChild,0);var e=this.normalize();if(dom.isParaInline(t)||dom.isPara(t))return e;var n;if(dom.isInline(e.sc)){var r=dom.listAncestor(e.sc,func.not(dom.isInline));n=list.last(r),dom.isInline(n)||(n=r[r.length-2]||e.sc.childNodes[e.so])}else n=e.sc.childNodes[e.so>0?e.so-1:0];var s=dom.listPrev(n,dom.isParaInline).reverse();if(s=s.concat(dom.listNext(n.nextSibling,dom.isParaInline)),s.length){var o=dom.wrap(list.head(s),"p");dom.appendChildNodes(o,list.tail(s))}return this.normalize()},this.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),i=dom.splitPoint(e.getStartPoint(),dom.isInline(t));return i.rightNode?i.rightNode.parentNode.insertBefore(t,i.rightNode):i.container.appendChild(t),t},this.pasteHTML=function(t){var e=$("<div></div>").html(t)[0],i=list.from(e.childNodes),n=this.wrapBodyInlineWithPara().deleteContents();return i.reverse().map(function(t){return n.insertNode(t)}).reverse()},this.toString=function(){var t=o();return agent.isW3CRangeSupport?t.toString():t.text},this.getWordRange=function(t){var e=this.getEndPoint();if(!dom.isCharPoint(e))return this;var n=dom.prevPointUntil(e,function(t){return!dom.isCharPoint(t)});return t&&(e=dom.nextPointUntil(e,function(t){return!dom.isCharPoint(t)})),new i(n.node,n.offset,e.node,e.offset)},this.bookmark=function(e){return{s:{path:dom.makeOffsetPath(e,t),offset:n},e:{path:dom.makeOffsetPath(e,r),offset:s}}},this.paraBookmark=function(e){return{s:{path:list.tail(dom.makeOffsetPath(list.head(e),t)),offset:n},e:{path:list.tail(dom.makeOffsetPath(list.last(e),r)),offset:s}}},this.getClientRects=function(){return o().getClientRects()}};return{create:function(t,e,n,r){if(4===arguments.length)return new i(t,e,n,r);if(2===arguments.length)return n=t,r=e,new i(t,e,n,r);var s=this.createFromSelection();return s||1!==arguments.length?s:(s=this.createFromNode(arguments[0]),s.collapse(dom.emptyPara===arguments[0].innerHTML))},createFromSelection:function(){var e,n,r,s;if(agent.isW3CRangeSupport){var o=document.getSelection();if(!o||0===o.rangeCount)return null;if(dom.isBody(o.anchorNode))return null;var a=o.getRangeAt(0);e=a.startContainer,n=a.startOffset,r=a.endContainer,s=a.endOffset}else{var l=document.selection.createRange(),c=l.duplicate();c.collapse(!1);var h=l;h.collapse(!0);var u=t(h,!0),d=t(c,!1);dom.isText(u.node)&&dom.isLeftEdgePoint(u)&&dom.isTextNode(d.node)&&dom.isRightEdgePoint(d)&&d.node.nextSibling===u.node&&(u=d),e=u.cont,n=u.offset,r=d.cont,s=d.offset}return new i(e,n,r,s)},createFromNode:function(t){var e=t,i=0,n=t,r=dom.nodeLength(n);return dom.isVoid(e)&&(i=dom.listPrev(e).length-1,e=e.parentNode),dom.isBR(n)?(r=dom.listPrev(n).length-1,n=n.parentNode):dom.isVoid(n)&&(r=dom.listPrev(n).length,n=n.parentNode),this.create(e,i,n,r)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var n=dom.fromOffsetPath(t,e.s.path),r=e.s.offset,s=dom.fromOffsetPath(t,e.e.path),o=e.e.offset;return new i(n,r,s,o)},createFromParaBookmark:function(t,e){var n=t.s.offset,r=t.e.offset,s=dom.fromOffsetPath(list.head(e),t.s.path),o=dom.fromOffsetPath(list.last(e),t.e.path);return new i(s,n,o,r)}}}(),async=function(){return{readFileAsDataURL:function(t){return $.Deferred(function(e){$.extend(new FileReader,{onload:function(t){var i=t.target.result;e.resolve(i)},onerror:function(){e.reject(this)}}).readAsDataURL(t)}).promise()},createImage:function(t){return $.Deferred(function(e){var i=$("<img>");i.one("load",function(){i.off("error abort"),e.resolve(i)}).one("error abort",function(){i.off("load").detach(),e.reject(i)}).css({display:"none"}).appendTo(document.body).attr("src",t)}).promise()}}}(),History=function(t){var e=[],i=-1,n=t[0],r=function(){var e=range.create(n),i={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:t.html(),bookmark:e?e.bookmark(n):i}},s=function(e){null!==e.contents&&t.html(e.contents),null!==e.bookmark&&range.createFromBookmark(n,e.bookmark).select()};this.rewind=function(){t.html()!==e[i].contents&&this.recordUndo(),i=0,s(e[i])},this.reset=function(){e=[],i=-1,t.html(""),this.recordUndo()},this.undo=function(){t.html()!==e[i].contents&&this.recordUndo(),i>0&&(i--,s(e[i]))},this.redo=function(){e.length-1>i&&(i++,s(e[i]))},this.recordUndo=function(){i++,e.length>i&&(e=e.slice(0,i)),e.push(r())}},Style=function(){var t=function(t,e){if(agent.jqueryVersion<1.9){var i={};return $.each(e,function(e,n){i[n]=t.css(n)}),i}return t.css.call(t,e)};this.fromNode=function(e){var i=["font-family","font-size","text-align","list-style-type","line-height"],n=t(e,i)||{};return n["font-size"]=parseInt(n["font-size"],10),n},this.stylePara=function(t,e){$.each(t.nodes(dom.isPara,{includeAncestor:!0}),function(t,i){$(i).css(e)})},this.styleNodes=function(t,e){t=t.splitText();var i=e&&e.nodeName||"SPAN",n=!(!e||!e.expandClosestSibling),r=!(!e||!e.onlyPartialContains);if(t.isCollapsed())return[t.insertNode(dom.create(i))];var s=dom.makePredByNodeName(i),o=t.nodes(dom.isText,{fullyContains:!0}).map(function(t){return dom.singleChildAncestor(t,s)||dom.wrap(t,i)});if(n){if(r){var a=t.nodes();s=func.and(s,function(t){return list.contains(a,t)})}return o.map(function(t){var e=dom.withClosestSiblings(t,s),i=list.head(e),n=list.tail(e);return $.each(n,function(t,e){dom.appendChildNodes(i,e.childNodes),dom.remove(e)}),list.head(e)})}return o},this.current=function(t){var e=$(dom.isElement(t.sc)?t.sc:t.sc.parentNode),i=this.fromNode(e);try{i=$.extend(i,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(t){}if(t.isOnList()){var n=["circle","disc","disc-leading-zero","square"],r=$.inArray(i["list-style-type"],n)>-1;i["list-style"]=r?"unordered":"ordered"}else i["list-style"]="none";var s=dom.ancestor(t.sc,dom.isPara);if(s&&s.style["line-height"])i["line-height"]=s.style.lineHeight;else{var o=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=o.toFixed(1)}return i.anchor=t.isOnAnchor()&&dom.ancestor(t.sc,dom.isAnchor),i.ancestors=dom.listAncestor(t.sc,dom.isEditable),i.range=t,i}},Bullet=function(){var t=this;this.insertOrderedList=function(t){this.toggleList("OL",t)},this.insertUnorderedList=function(t){this.toggleList("UL",t)},this.indent=function(t){var e=this,i=range.create(t).wrapBodyInlineWithPara(),n=i.nodes(dom.isPara,{includeAncestor:!0}),r=list.clusterBy(n,func.peq2("parentNode"));$.each(r,function(t,i){var n=list.head(i);dom.isLi(n)?e.wrapList(i,n.parentNode.nodeName):$.each(i,function(t,e){$(e).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}),i.select()},this.outdent=function(t){var e=this,i=range.create(t).wrapBodyInlineWithPara(),n=i.nodes(dom.isPara,{includeAncestor:!0}),r=list.clusterBy(n,func.peq2("parentNode"));$.each(r,function(t,i){var n=list.head(i);dom.isLi(n)?e.releaseList([i]):$.each(i,function(t,e){$(e).css("marginLeft",function(t,e){return e=parseInt(e,10)||0,e>25?e-25:""})})}),i.select()},this.toggleList=function(e,i){var n=range.create(i).wrapBodyInlineWithPara(),r=n.nodes(dom.isPara,{includeAncestor:!0}),s=n.paraBookmark(r),o=list.clusterBy(r,func.peq2("parentNode"));if(list.find(r,dom.isPurePara)){var a=[];$.each(o,function(i,n){a=a.concat(t.wrapList(n,e))}),r=a}else{var l=n.nodes(dom.isList,{includeAncestor:!0}).filter(function(t){return!$.nodeName(t,e)});l.length?$.each(l,function(t,i){dom.replace(i,e)}):r=this.releaseList(o,!0)}range.createFromParaBookmark(s,r).select()},this.wrapList=function(t,e){var i=list.head(t),n=list.last(t),r=dom.isList(i.previousSibling)&&i.previousSibling,s=dom.isList(n.nextSibling)&&n.nextSibling,o=r||dom.insertAfter(dom.create(e||"UL"),n);return t=t.map(function(t){return dom.isPurePara(t)?dom.replace(t,"LI"):t}),dom.appendChildNodes(o,t),s&&(dom.appendChildNodes(o,list.from(s.childNodes)),dom.remove(s)),t},this.releaseList=function(t,e){var i=[];return $.each(t,function(t,n){var r=list.head(n),s=list.last(n),o=e?dom.lastAncestor(r,dom.isList):r.parentNode,a=o.childNodes.length>1?dom.splitTree(o,{node:s.parentNode,offset:dom.position(s)+1},{isSkipPaddingBlankHTML:!0}):null,l=dom.splitTree(o,{node:r.parentNode,offset:dom.position(r)},{isSkipPaddingBlankHTML:!0});n=e?dom.listDescendant(l,dom.isLi):list.from(l.childNodes).filter(dom.isLi),(e||!dom.isList(o.parentNode))&&(n=n.map(function(t){return dom.replace(t,"P")})),$.each(list.from(n).reverse(),function(t,e){dom.insertAfter(e,o)});var c=list.compact([o,l,a]);$.each(c,function(t,e){var i=[e].concat(dom.listDescendant(e,dom.isList));$.each(i.reverse(),function(t,e){dom.nodeLength(e)||dom.remove(e,!0)})}),i=i.concat(n)}),i}},Typing=function(){var t=new Bullet;this.insertTab=function(t,e){var i=dom.createText(new Array(e+1).join(dom.NBSP_CHAR));t=t.deleteContents(),t.insertNode(i,!0),t=range.create(i,e),t.select()},this.insertParagraph=function(e){var i=range.create(e);i=i.deleteContents(),i=i.wrapBodyInlineWithPara();var n,r=dom.ancestor(i.sc,dom.isPara);if(r){if(dom.isEmpty(r)&&dom.isLi(r))return void t.toggleList(r.parentNode.nodeName);if(dom.isEmpty(r)&&dom.isPara(r)&&dom.isBlockquote(r.parentNode))dom.insertAfter(r,r.parentNode),n=r;else{n=dom.splitTree(r,i.getStartPoint());var s=dom.listDescendant(r,dom.isEmptyAnchor);s=s.concat(dom.listDescendant(n,dom.isEmptyAnchor)),$.each(s,function(t,e){dom.remove(e)}),(dom.isHeading(n)||dom.isPre(n))&&dom.isEmpty(n)&&(n=dom.replace(n,"p"))}}else{var o=i.sc.childNodes[i.so];n=$(dom.emptyPara)[0],o?i.sc.insertBefore(n,o):i.sc.appendChild(n)}range.create(n,0).normalize().select().scrollIntoView(e)}},Table=function(){this.tab=function(t,e){var i=dom.ancestor(t.commonAncestor(),dom.isCell),n=dom.ancestor(i,dom.isTable),r=dom.listDescendant(n,dom.isCell),s=list[e?"prev":"next"](r,i);s&&range.create(s,0).select()},this.createTable=function(t,e,i){for(var n,r=[],s=0;t>s;s++)r.push("<td>"+dom.blank+"</td>");n=r.join("");for(var o,a=[],l=0;e>l;l++)a.push("<tr>"+n+"</tr>");o=a.join("");var c=$("<table>"+o+"</table>");return i&&i.tableClassName&&c.addClass(i.tableClassName),c[0]}},KEY_BOGUS="bogus",Editor=function(t){var e=this,i=t.layoutInfo.note,n=t.layoutInfo.editor,r=t.layoutInfo.editable,s=t.options,o=s.langInfo,a=r[0],l=null,c=new Style,h=new Table,u=new Typing,d=new Bullet,f=new History(r);this.initialize=function(){r.on("keydown",function(i){i.keyCode===key.code.ENTER&&t.triggerEvent("enter",i),t.triggerEvent("keydown",i),i.isDefaultPrevented()||(s.shortcuts?e.handleKeyMap(i):e.preventDefaultEditableShortCuts(i))}).on("keyup",function(e){t.triggerEvent("keyup",e)}).on("focus",function(e){t.triggerEvent("focus",e)}).on("blur",function(e){t.triggerEvent("blur",e)}).on("mousedown",function(e){t.triggerEvent("mousedown",e)}).on("mouseup",function(e){t.triggerEvent("mouseup",e)}).on("scroll",function(e){t.triggerEvent("scroll",e)}).on("paste",function(e){t.triggerEvent("paste",e)}),r.html(dom.html(i)||dom.emptyPara);var o=agent.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";r.on(o,func.debounce(function(){t.triggerEvent("change",r.html())},250)),n.on("focusin",function(e){t.triggerEvent("focusin",e)}).on("focusout",function(e){t.triggerEvent("focusout",e)}),s.airMode||(s.width&&n.outerWidth(s.width),s.height&&r.outerHeight(s.height),s.maxHeight&&r.css("max-height",s.maxHeight),s.minHeight&&r.css("min-height",s.minHeight)),f.recordUndo()},this.destroy=function(){r.off()},this.handleKeyMap=function(e){var i=s.keyMap[agent.isMac?"mac":"pc"],n=[];e.metaKey&&n.push("CMD"),e.ctrlKey&&!e.altKey&&n.push("CTRL"),e.shiftKey&&n.push("SHIFT");var r=key.nameFromCode[e.keyCode];r&&n.push(r);var o=i[n.join("+")];o?(e.preventDefault(),t.invoke(o)):key.isEdit(e.keyCode)&&this.afterCommand()},this.preventDefaultEditableShortCuts=function(t){(t.ctrlKey||t.metaKey)&&list.contains([66,73,85],t.keyCode)&&t.preventDefault()},this.createRange=function(){return this.focus(),range.create(a)},this.saveRange=function(t){l=this.createRange(),t&&l.collapse().select()},this.restoreRange=function(){l&&(l.select(),this.focus())},this.saveTarget=function(t){r.data("target",t)},this.clearTarget=function(){r.removeData("target")},this.restoreTarget=function(){return r.data("target")},this.currentStyle=function(){var t=range.create();return t&&(t=t.normalize()),t?c.current(t):c.fromNode(r)},this.styleFromNode=function(t){return c.fromNode(t)},this.undo=function(){t.triggerEvent("before.command",r.html()),f.undo(),t.triggerEvent("change",r.html())},t.memo("help.undo",o.help.undo),this.redo=function(){t.triggerEvent("before.command",r.html()),f.redo(),t.triggerEvent("change",r.html())},t.memo("help.redo",o.help.redo);for(var p=this.beforeCommand=function(){t.triggerEvent("before.command",r.html()),e.focus()},m=this.afterCommand=function(e){f.recordUndo(),e||t.triggerEvent("change",r.html())},g=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],v=0,y=g.length;y>v;v++)this[g[v]]=function(t){return function(e){p(),document.execCommand(t,!1,e),m(!0)}}(g[v]),t.memo("help."+g[v],o.help[g[v]]);this.tab=function(){var t=this.createRange();t.isCollapsed()&&t.isOnCell()?h.tab(t):(p(),u.insertTab(t,s.tabSize),m())},t.memo("help.tab",o.help.tab),this.untab=function(){var t=this.createRange();t.isCollapsed()&&t.isOnCell()&&h.tab(t,!0)},t.memo("help.untab",o.help.untab),this.wrapCommand=function(t){return function(){p(),t.apply(e,arguments),m()}},this.insertParagraph=this.wrapCommand(function(){u.insertParagraph(a)}),t.memo("help.insertParagraph",o.help.insertParagraph),this.insertOrderedList=this.wrapCommand(function(){d.insertOrderedList(a)}),t.memo("help.insertOrderedList",o.help.insertOrderedList),this.insertUnorderedList=this.wrapCommand(function(){d.insertUnorderedList(a)}),t.memo("help.insertUnorderedList",o.help.insertUnorderedList),this.indent=this.wrapCommand(function(){d.indent(a)}),t.memo("help.indent",o.help.indent),this.outdent=this.wrapCommand(function(){d.outdent(a)}),t.memo("help.outdent",o.help.outdent),this.insertImage=function(e,i){return async.createImage(e,i).then(function(t){p(),"function"==typeof i?i(t):("string"==typeof i&&t.attr("data-filename",i),t.css("width",Math.min(r.width(),t.width()))),t.show(),range.create(a).insertNode(t[0]),range.createFromNodeAfter(t[0]).select(),m()}).fail(function(e){t.triggerEvent("image.upload.error",e)})},this.insertImages=function(i){$.each(i,function(i,n){var r=n.name;s.maximumImageFileSize&&s.maximumImageFileSize<n.size?t.triggerEvent("image.upload.error",o.image.maximumFileSizeError):async.readFileAsDataURL(n).then(function(t){return e.insertImage(t,r)}).fail(function(){t.triggerEvent("image.upload.error")})})},this.insertImagesOrCallback=function(e){s.callbacks.onImageUpload?t.triggerEvent("image.upload",e):this.insertImages(e)},this.insertNode=this.wrapCommand(function(t){this.createRange().insertNode(t),range.createFromNodeAfter(t).select()}),this.insertText=this.wrapCommand(function(t){var e=this.createRange(),i=e.insertNode(dom.createText(t));range.create(i,dom.nodeLength(i)).select()}),this.getSelectedText=function(){var t=this.createRange();return t.isOnAnchor()&&(t=range.createFromNode(dom.ancestor(t.sc,dom.isAnchor))),t.toString()},this.pasteHTML=this.wrapCommand(function(t){var e=this.createRange().pasteHTML(t);range.createFromNodeAfter(list.last(e)).select()}),this.formatBlock=this.wrapCommand(function(t){t=agent.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t)}),this.formatPara=function(){this.formatBlock("P")},t.memo("help.formatPara",o.help.formatPara);for(var v=1;6>=v;v++)this["formatH"+v]=function(t){return function(){this.formatBlock("H"+t)}}(v),t.memo("help.formatH"+v,o.help["formatH"+v]);this.fontSize=function(t){var e=this.createRange();if(e&&e.isCollapsed()){var i=c.styleNodes(e),n=list.head(i);$(i).css({"font-size":t+"px"}),n&&!dom.nodeLength(n)&&(n.innerHTML=dom.ZERO_WIDTH_NBSP_CHAR,range.createFromNodeAfter(n.firstChild).select(),r.data(KEY_BOGUS,n))}else p(),$(c.styleNodes(e)).css({"font-size":t+"px"}),m()},this.insertHorizontalRule=this.wrapCommand(function(){var t=this.createRange().insertNode(dom.create("HR"));t.nextSibling&&range.create(t.nextSibling,0).normalize().select()}),t.memo("help.insertHorizontalRule",o.help.insertHorizontalRule),this.removeBogus=function(){var t=r.data(KEY_BOGUS);if(t){var e=list.find(list.from(t.childNodes),dom.isText),i=e.nodeValue.indexOf(dom.ZERO_WIDTH_NBSP_CHAR);-1!==i&&e.deleteData(i,1),dom.isEmpty(t)&&dom.remove(t),r.removeData(KEY_BOGUS)}},this.lineHeight=this.wrapCommand(function(t){c.stylePara(this.createRange(),{lineHeight:t})}),this.unlink=function(){var t=this.createRange();if(t.isOnAnchor()){var e=dom.ancestor(t.sc,dom.isAnchor);t=range.createFromNode(e),t.select(),p(),document.execCommand("unlink"),m()}},this.createLink=this.wrapCommand(function(t){var e=t.url,i=t.text,n=t.isNewWindow,r=t.range||this.createRange(),o=r.toString()!==i;"string"==typeof e&&(e=e.trim()),s.onCreateLink&&(e=s.onCreateLink(e));var a=[];if(o){r=r.deleteContents();var l=r.insertNode($("<A>"+i+"</A>")[0]);a.push(l)}else a=c.styleNodes(r,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});$.each(a,function(t,i){e=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(e)?e:"http://"+e,$(i).attr("href",e),n?$(i).attr("target","_blank"):$(i).removeAttr("target")});var h=range.createFromNodeBefore(list.head(a)),u=h.getStartPoint(),d=range.createFromNodeAfter(list.last(a)),f=d.getEndPoint();range.create(u.node,u.offset,f.node,f.offset).select()}),this.getLinkInfo=function(){var t=this.createRange().expand(dom.isAnchor),e=$(list.head(t.nodes(dom.isAnchor)));return{range:t,text:t.toString(),isNewWindow:!!e.length&&"_blank"===e.attr("target"),url:e.length?e.attr("href"):""}},this.color=this.wrapCommand(function(t){var e=t.foreColor,i=t.backColor;e&&document.execCommand("foreColor",!1,e),i&&document.execCommand("backColor",!1,i)}),this.insertTable=this.wrapCommand(function(t){var e=t.split("x");this.createRange().deleteContents().insertNode(h.createTable(e[0],e[1],s))}),this.floatMe=this.wrapCommand(function(t){$(this.restoreTarget()).css("float",t)}),this.resize=this.wrapCommand(function(t){$(this.restoreTarget()).css({width:100*t+"%",height:""})}),this.resizeTo=function(t,e,i){var n;if(i){var r=t.y/t.x,s=e.data("ratio");n={width:s>r?t.x:t.y/s,height:s>r?t.x*s:t.y}}else n={width:t.x,height:t.y};e.css(n)},this.removeMedia=this.wrapCommand(function(){var e=$(this.restoreTarget()).detach();t.triggerEvent("media.delete",e,r)}),this.hasFocus=function(){return r.is(":focus")},this.focus=function(){this.hasFocus()||r.focus()},this.isEmpty=function(){return dom.isEmpty(r[0])||dom.emptyPara===r.html()},this.empty=function(){t.invoke("code",dom.emptyPara)}},Clipboard=function(t){var e=this,i=t.layoutInfo.editable;this.events={"summernote.keydown":function(i,n){e.needKeydownHook()&&(n.ctrlKey||n.metaKey)&&n.keyCode===key.code.V&&(t.invoke("editor.saveRange"),e.$paste.focus(),setTimeout(function(){e.pasteByHook()},0))}},this.needKeydownHook=function(){return agent.isMSIE&&agent.browserVersion>10||agent.isFF},this.initialize=function(){this.needKeydownHook()?(this.$paste=$('<div tabindex="-1" />').attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),i.before(this.$paste),this.$paste.on("paste",function(e){t.triggerEvent("paste",e)})):i.on("paste",this.pasteByEvent)},this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)},this.pasteByHook=function(){var e=this.$paste[0].firstChild;if(dom.isImg(e)){for(var i=e.src,n=atob(i.split(",")[1]),r=new Uint8Array(n.length),s=0;s<n.length;s++)r[s]=n.charCodeAt(s);var o=new Blob([r],{type:"image/png"});o.name="clipboard.png",t.invoke("editor.restoreRange"),t.invoke("editor.focus"),t.invoke("editor.insertImagesOrCallback",[o])}else{var a=$("<div />").html(this.$paste.html()).html();t.invoke("editor.restoreRange"),t.invoke("editor.focus"),a&&t.invoke("editor.pasteHTML",a)}this.$paste.empty()},this.pasteByEvent=function(e){var i=e.originalEvent.clipboardData;if(i&&i.items&&i.items.length){var n=list.head(i.items);"file"===n.kind&&-1!==n.type.indexOf("image/")&&t.invoke("editor.insertImagesOrCallback",[n.getAsFile()]),t.invoke("editor.afterCommand")}}},Dropzone=function(t){var e=$(document),i=t.layoutInfo.editor,n=t.layoutInfo.editable,r=t.options,s=r.langInfo,o={},a=$(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(i),l=function(){Object.keys(o).forEach(function(t){e.off(t.substr(2).toLowerCase(),o[t])}),o={}};this.initialize=function(){r.disableDragAndDrop?(o.onDrop=function(t){t.preventDefault()},e.on("drop",o.onDrop)):this.attachDragAndDropEvent()},this.attachDragAndDropEvent=function(){var r=$(),l=a.find(".note-dropzone-message");o.onDragenter=function(e){var n=t.invoke("codeview.isActivated"),o=i.width()>0&&i.height()>0;n||r.length||!o||(i.addClass("dragover"),a.width(i.width()),a.height(i.height()),l.text(s.image.dragImageHere)),r=r.add(e.target)},o.onDragleave=function(t){r=r.not(t.target),r.length||i.removeClass("dragover")},o.onDrop=function(){r=$(),i.removeClass("dragover")},e.on("dragenter",o.onDragenter).on("dragleave",o.onDragleave).on("drop",o.onDrop),a.on("dragenter",function(){a.addClass("hover"),l.text(s.image.dropImage)}).on("dragleave",function(){a.removeClass("hover"),l.text(s.image.dragImageHere)}),a.on("drop",function(e){var i=e.originalEvent.dataTransfer;i&&i.files&&i.files.length?(e.preventDefault(),n.focus(),t.invoke("editor.insertImagesOrCallback",i.files)):$.each(i.types,function(e,n){var r=i.getData(n);n.toLowerCase().indexOf("text")>-1?t.invoke("editor.pasteHTML",r):$(r).each(function(){t.invoke("editor.insertNode",this)})})}).on("dragover",!1)},this.destroy=function(){l()}},CodeMirror;agent.hasCodeMirror&&(agent.isSupportAmd?require(["codemirror"],function(t){CodeMirror=t}):CodeMirror=window.CodeMirror);var Codeview=function(t){var e=t.layoutInfo.editor,i=t.layoutInfo.editable,n=t.layoutInfo.codable,r=t.options;this.sync=function(){this.isActivated()&&agent.hasCodeMirror&&n.data("cmEditor").save()},this.isActivated=function(){return e.hasClass("codeview")},this.toggle=function(){this.isActivated()?this.deactivate():this.activate(),t.triggerEvent("codeview.toggled")},this.activate=function(){if(n.val(dom.html(i,r.prettifyHtml)),n.height(i.height()),t.invoke("toolbar.updateCodeview",!0),e.addClass("codeview"),n.focus(),agent.hasCodeMirror){var s=CodeMirror.fromTextArea(n[0],r.codemirror);if(r.codemirror.tern){var o=new CodeMirror.TernServer(r.codemirror.tern);s.ternServer=o,s.on("cursorActivity",function(t){o.updateArgHints(t)})}s.setSize(null,i.outerHeight()),n.data("cmEditor",s)}},this.deactivate=function(){if(agent.hasCodeMirror){var s=n.data("cmEditor");n.val(s.getValue()),s.toTextArea()}var o=dom.value(n,r.prettifyHtml)||dom.emptyPara,a=i.html()!==o;i.html(o),i.height(r.height?n.height():"auto"),e.removeClass("codeview"),a&&t.triggerEvent("change",i.html(),i),i.focus(),t.invoke("toolbar.updateCodeview",!1)},this.destroy=function(){this.isActivated()&&this.deactivate()}},EDITABLE_PADDING=24,Statusbar=function(t){var e=$(document),i=t.layoutInfo.statusbar,n=t.layoutInfo.editable,r=t.options;this.initialize=function(){r.airMode||r.disableResizeEditor||i.on("mousedown",function(t){t.preventDefault(),t.stopPropagation();var i=n.offset().top-e.scrollTop();e.on("mousemove",function(t){var e=t.clientY-(i+EDITABLE_PADDING);e=r.minheight>0?Math.max(e,r.minheight):e,e=r.maxHeight>0?Math.min(e,r.maxHeight):e,n.height(e)}).one("mouseup",function(){e.off("mousemove")})})},this.destroy=function(){i.off(),i.remove()}},Fullscreen=function(t){var e=t.layoutInfo.editor,i=t.layoutInfo.toolbar,n=t.layoutInfo.editable,r=t.layoutInfo.codable,s=$(window),o=$("html, body");this.toggle=function(){var a=function(t){n.css("height",t.h),r.css("height",t.h),r.data("cmeditor")&&r.data("cmeditor").setsize(null,t.h)};e.toggleClass("fullscreen"),this.isFullscreen()?(n.data("orgHeight",n.css("height")),s.on("resize",function(){a({h:s.height()-i.outerHeight()})}).trigger("resize"),o.css("overflow","hidden")):(s.off("resize"),a({h:n.data("orgHeight")}),o.css("overflow","visible")),t.invoke("toolbar.updateFullscreen",this.isFullscreen())},this.isFullscreen=function(){return e.hasClass("fullscreen")}},Handle=function(t){var e=this,i=$(document),n=t.layoutInfo.editingArea,r=t.options;this.events={"summernote.mousedown":function(t,i){e.update(i.target)&&i.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){e.update()}},this.initialize=function(){this.$handle=$(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',r.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',r.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(n),this.$handle.on("mousedown",function(n){if(dom.isControlSizing(n.target)){n.preventDefault(),n.stopPropagation();var r=e.$handle.find(".note-control-selection").data("target"),s=r.offset(),o=i.scrollTop();i.on("mousemove",function(i){t.invoke("editor.resizeTo",{x:i.clientX-s.left,y:i.clientY-(s.top-o)},r,!i.shiftKey),e.update(r[0])}).one("mouseup",function(e){e.preventDefault(),i.off("mousemove"),t.invoke("editor.afterCommand")}),r.data("ratio")||r.data("ratio",r.height()/r.width())}})},this.destroy=function(){this.$handle.remove()},this.update=function(e){var i=dom.isImg(e),n=this.$handle.find(".note-control-selection");if(t.invoke("imagePopover.update",e),i){var r=$(e),s=r.position(),o={w:r.outerWidth(!0),h:r.outerHeight(!0)};n.css({display:"block",left:s.left,top:s.top,width:o.w,height:o.h}).data("target",r);var a=o.w+"x"+o.h;n.find(".note-control-selection-info").text(a),t.invoke("editor.saveTarget",e)}else this.hide();return i},this.hide=function(){t.invoke("editor.clearTarget"),this.$handle.children().hide()}},AutoLink=function(t){var e=this,i=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(t,i){i.isDefaultPrevented()||e.handleKeyup(i)},"summernote.keydown":function(t,i){e.handleKeydown(i)}},this.initialize=function(){this.lastWordRange=null},this.destroy=function(){this.lastWordRange=null},this.replace=function(){if(this.lastWordRange){var e=this.lastWordRange.toString(),n=e.match(i);if(n&&(n[1]||n[2])){var r=n[1]?e:"http://"+e,s=$("<a />").html(e).attr("href",r)[0];this.lastWordRange.insertNode(s),this.lastWordRange=null,t.invoke("editor.focus")}}},this.handleKeydown=function(e){if(list.contains([key.code.ENTER,key.code.SPACE],e.keyCode)){var i=t.invoke("editor.createRange").getWordRange();this.lastWordRange=i}},this.handleKeyup=function(t){list.contains([key.code.ENTER,key.code.SPACE],t.keyCode)&&this.replace()}},AutoSync=function(t){var e=t.layoutInfo.note;this.events={"summernote.change":function(){e.val(t.invoke("code"))}},this.shouldInitialize=function(){return dom.isTextarea(e[0])}},Placeholder=function(t){var e=this,i=t.layoutInfo.editingArea,n=t.options;this.events={"summernote.init summernote.change":function(){e.update()},
"summernote.codeview.toggled":function(){e.update()}},this.shouldInitialize=function(){return!!n.placeholder},this.initialize=function(){this.$placeholder=$('<div class="note-placeholder">'),this.$placeholder.on("click",function(){t.invoke("focus")}).text(n.placeholder).prependTo(i)},this.destroy=function(){this.$placeholder.remove()},this.update=function(){var e=!t.invoke("codeview.isActivated")&&t.invoke("editor.isEmpty");this.$placeholder.toggle(e)}},Buttons=function(t){var e=this,i=$.summernote.ui,n=t.layoutInfo.toolbar,r=t.options,s=r.langInfo,o=func.invertObject(r.keyMap[agent.isMac?"mac":"pc"]),a=this.representShortcut=function(t){var e=o[t];return r.shortcuts&&e?(agent.isMac&&(e=e.replace("CMD","\u2318").replace("SHIFT","\u21e7"))," ("+(e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]"))+")"):""};this.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.fontInstalledMap={}},this.destroy=function(){delete this.fontInstalledMap},this.isFontInstalled=function(t){return e.fontInstalledMap.hasOwnProperty(t)||(e.fontInstalledMap[t]=agent.isFontInstalled(t)||list.contains(r.fontNamesIgnoreCheck,t)),e.fontInstalledMap[t]},this.addToolbarButtons=function(){t.memo("button.style",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(r.icons.magic)+" "+i.icon(r.icons.caret,"span"),tooltip:s.style.style,data:{toggle:"dropdown"}}),i.dropdown({className:"dropdown-style",items:t.options.styleTags,template:function(t){"string"==typeof t&&(t={tag:t,title:s.style.hasOwnProperty(t)?s.style[t]:t});var e=t.tag,i=t.title;return"<"+e+(t.style?' style="'+t.style+'" ':"")+(t.className?' class="'+t.className+'"':"")+">"+i+"</"+e+">"},click:t.createInvokeHandler("editor.formatBlock")})]).render()}),t.memo("button.bold",function(){return i.button({className:"note-btn-bold",contents:i.icon(r.icons.bold),tooltip:s.font.bold+a("bold"),click:t.createInvokeHandler("editor.bold")}).render()}),t.memo("button.italic",function(){return i.button({className:"note-btn-italic",contents:i.icon(r.icons.italic),tooltip:s.font.italic+a("italic"),click:t.createInvokeHandler("editor.italic")}).render()}),t.memo("button.underline",function(){return i.button({className:"note-btn-underline",contents:i.icon(r.icons.underline),tooltip:s.font.underline+a("underline"),click:t.createInvokeHandler("editor.underline")}).render()}),t.memo("button.clear",function(){return i.button({contents:i.icon(r.icons.eraser),tooltip:s.font.clear+a("removeFormat"),click:t.createInvokeHandler("editor.removeFormat")}).render()}),t.memo("button.strikethrough",function(){return i.button({className:"note-btn-strikethrough",contents:i.icon(r.icons.strikethrough),tooltip:s.font.strikethrough+a("strikethrough"),click:t.createInvokeHandler("editor.strikethrough")}).render()}),t.memo("button.superscript",function(){return i.button({className:"note-btn-superscript",contents:i.icon(r.icons.superscript),tooltip:s.font.superscript,click:t.createInvokeHandler("editor.superscript")}).render()}),t.memo("button.subscript",function(){return i.button({className:"note-btn-subscript",contents:i.icon(r.icons.subscript),tooltip:s.font.subscript,click:t.createInvokeHandler("editor.subscript")}).render()}),t.memo("button.fontname",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+i.icon(r.icons.caret,"span"),tooltip:s.font.name,data:{toggle:"dropdown"}}),i.dropdownCheck({className:"dropdown-fontname",checkClassName:r.icons.menuCheck,items:r.fontNames.filter(e.isFontInstalled),template:function(t){return'<span style="font-family:'+t+'">'+t+"</span>"},click:t.createInvokeHandler("editor.fontName")})]).render()}),t.memo("button.fontsize",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+i.icon(r.icons.caret,"span"),tooltip:s.font.size,data:{toggle:"dropdown"}}),i.dropdownCheck({className:"dropdown-fontsize",checkClassName:r.icons.menuCheck,items:r.fontSizes,click:t.createInvokeHandler("editor.fontSize")})]).render()}),t.memo("button.color",function(){return i.buttonGroup({className:"note-color",children:[i.button({className:"note-current-color-button",contents:i.icon(r.icons.font+" note-recent-color"),tooltip:s.color.recent,click:function(e){var i=$(e.currentTarget);t.invoke("editor.color",{backColor:i.attr("data-backColor"),foreColor:i.attr("data-foreColor")})},callback:function(t){t.find(".note-recent-color").css("background-color","#FFFF00"),t.attr("data-backColor","#FFFF00")}}),i.button({className:"dropdown-toggle",contents:i.icon(r.icons.caret,"span"),tooltip:s.color.more,data:{toggle:"dropdown"}}),i.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+s.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',s.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+s.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',s.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(t){t.find(".note-holder").each(function(){var t=$(this);t.append(i.palette({colors:r.colors,eventName:t.data("event")}).render())})},click:function(e){var i=$(e.target),n=i.data("event"),r=i.data("value");if(n&&r){var s="backColor"===n?"background-color":"color",o=i.closest(".note-color").find(".note-recent-color"),a=i.closest(".note-color").find(".note-current-color-button");o.css(s,r),a.attr("data-"+n,r),t.invoke("editor."+n,r)}}})]}).render()}),t.memo("button.ul",function(){return i.button({contents:i.icon(r.icons.unorderedlist),tooltip:s.lists.unordered+a("insertUnorderedList"),click:t.createInvokeHandler("editor.insertUnorderedList")}).render()}),t.memo("button.ol",function(){return i.button({contents:i.icon(r.icons.orderedlist),tooltip:s.lists.ordered+a("insertOrderedList"),click:t.createInvokeHandler("editor.insertOrderedList")}).render()});var n=i.button({contents:i.icon(r.icons.alignLeft),tooltip:s.paragraph.left+a("justifyLeft"),click:t.createInvokeHandler("editor.justifyLeft")}),o=i.button({contents:i.icon(r.icons.alignCenter),tooltip:s.paragraph.center+a("justifyCenter"),click:t.createInvokeHandler("editor.justifyCenter")}),l=i.button({contents:i.icon(r.icons.alignRight),tooltip:s.paragraph.right+a("justifyRight"),click:t.createInvokeHandler("editor.justifyRight")}),c=i.button({contents:i.icon(r.icons.alignJustify),tooltip:s.paragraph.justify+a("justifyFull"),click:t.createInvokeHandler("editor.justifyFull")}),h=i.button({contents:i.icon(r.icons.outdent),tooltip:s.paragraph.outdent+a("outdent"),click:t.createInvokeHandler("editor.outdent")}),u=i.button({contents:i.icon(r.icons.indent),tooltip:s.paragraph.indent+a("indent"),click:t.createInvokeHandler("editor.indent")});t.memo("button.justifyLeft",func.invoke(n,"render")),t.memo("button.justifyCenter",func.invoke(o,"render")),t.memo("button.justifyRight",func.invoke(l,"render")),t.memo("button.justifyFull",func.invoke(c,"render")),t.memo("button.outdent",func.invoke(h,"render")),t.memo("button.indent",func.invoke(u,"render")),t.memo("button.paragraph",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(r.icons.alignLeft)+" "+i.icon(r.icons.caret,"span"),tooltip:s.paragraph.paragraph,data:{toggle:"dropdown"}}),i.dropdown([i.buttonGroup({className:"note-align",children:[n,o,l,c]}),i.buttonGroup({className:"note-list",children:[h,u]})])]).render()}),t.memo("button.height",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(r.icons.textHeight)+" "+i.icon(r.icons.caret,"span"),tooltip:s.font.height,data:{toggle:"dropdown"}}),i.dropdownCheck({items:r.lineHeights,checkClassName:r.icons.menuCheck,className:"dropdown-line-height",click:t.createInvokeHandler("editor.lineHeight")})]).render()}),t.memo("button.table",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(r.icons.table)+" "+i.icon(r.icons.caret,"span"),tooltip:s.table.table,data:{toggle:"dropdown"}}),i.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(i){i.find(".note-dimension-picker-mousecatcher").css({width:r.insertTableMaxSize.col+"em",height:r.insertTableMaxSize.row+"em"}).mousedown(t.createInvokeHandler("editor.insertTable")).on("mousemove",e.tableMoveHandler)}}).render()}),t.memo("button.link",function(){return i.button({contents:i.icon(r.icons.link),tooltip:s.link.link+a("linkDialog.show"),click:t.createInvokeHandler("linkDialog.show")}).render()}),t.memo("button.picture",function(){return i.button({contents:i.icon(r.icons.picture),tooltip:s.image.image,click:t.createInvokeHandler("imageDialog.show")}).render()}),t.memo("button.video",function(){return i.button({contents:i.icon(r.icons.video),tooltip:s.video.video,click:t.createInvokeHandler("videoDialog.show")}).render()}),t.memo("button.hr",function(){return i.button({contents:i.icon(r.icons.minus),tooltip:s.hr.insert+a("insertHorizontalRule"),click:t.createInvokeHandler("editor.insertHorizontalRule")}).render()}),t.memo("button.fullscreen",function(){return i.button({className:"btn-fullscreen",contents:i.icon(r.icons.arrowsAlt),tooltip:s.options.fullscreen,click:t.createInvokeHandler("fullscreen.toggle")}).render()}),t.memo("button.codeview",function(){return i.button({className:"btn-codeview",contents:i.icon(r.icons.code),tooltip:s.options.codeview,click:t.createInvokeHandler("codeview.toggle")}).render()}),t.memo("button.redo",function(){return i.button({contents:i.icon(r.icons.redo),tooltip:s.history.redo+a("redo"),click:t.createInvokeHandler("editor.redo")}).render()}),t.memo("button.undo",function(){return i.button({contents:i.icon(r.icons.undo),tooltip:s.history.undo+a("undo"),click:t.createInvokeHandler("editor.undo")}).render()}),t.memo("button.help",function(){return i.button({contents:i.icon(r.icons.question),tooltip:s.options.help,click:t.createInvokeHandler("helpDialog.show")}).render()})},this.addImagePopoverButtons=function(){t.memo("button.imageSize100",function(){return i.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:s.image.resizeFull,click:t.createInvokeHandler("editor.resize","1")}).render()}),t.memo("button.imageSize50",function(){return i.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:s.image.resizeHalf,click:t.createInvokeHandler("editor.resize","0.5")}).render()}),t.memo("button.imageSize25",function(){return i.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:s.image.resizeQuarter,click:t.createInvokeHandler("editor.resize","0.25")}).render()}),t.memo("button.floatLeft",function(){return i.button({contents:i.icon(r.icons.alignLeft),tooltip:s.image.floatLeft,click:t.createInvokeHandler("editor.floatMe","left")}).render()}),t.memo("button.floatRight",function(){return i.button({contents:i.icon(r.icons.alignRight),tooltip:s.image.floatRight,click:t.createInvokeHandler("editor.floatMe","right")}).render()}),t.memo("button.floatNone",function(){return i.button({contents:i.icon(r.icons.alignJustify),tooltip:s.image.floatNone,click:t.createInvokeHandler("editor.floatMe","none")}).render()}),t.memo("button.removeMedia",function(){return i.button({contents:i.icon(r.icons.trash),tooltip:s.image.remove,click:t.createInvokeHandler("editor.removeMedia")}).render()})},this.addLinkPopoverButtons=function(){t.memo("button.linkDialogShow",function(){return i.button({contents:i.icon(r.icons.link),tooltip:s.link.edit,click:t.createInvokeHandler("linkDialog.show")}).render()}),t.memo("button.unlink",function(){return i.button({contents:i.icon(r.icons.unlink),tooltip:s.link.unlink,click:t.createInvokeHandler("editor.unlink")}).render()})},this.build=function(e,n){for(var r=0,s=n.length;s>r;r++){for(var o=n[r],a=o[0],l=o[1],c=i.buttonGroup({className:"note-"+a}).render(),h=0,u=l.length;u>h;h++){var d=t.memo("button."+l[h]);d&&c.append("function"==typeof d?d(t):d)}c.appendTo(e)}},this.updateCurrentStyle=function(){var i=t.invoke("editor.currentStyle");if(this.updateBtnStates({".note-btn-bold":function(){return"bold"===i["font-bold"]},".note-btn-italic":function(){return"italic"===i["font-italic"]},".note-btn-underline":function(){return"underline"===i["font-underline"]},".note-btn-subscript":function(){return"subscript"===i["font-subscript"]},".note-btn-superscript":function(){return"superscript"===i["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===i["font-strikethrough"]}}),i["font-family"]){var r=i["font-family"].split(",").map(function(t){return t.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),s=list.find(r,e.isFontInstalled);n.find(".dropdown-fontname li a").each(function(){var t=$(this).data("value")+""==s+"";this.className=t?"checked":""}),n.find(".note-current-fontname").text(s)}if(i["font-size"]){var o=i["font-size"];n.find(".dropdown-fontsize li a").each(function(){var t=$(this).data("value")+""==o+"";this.className=t?"checked":""}),n.find(".note-current-fontsize").text(o)}if(i["line-height"]){var a=i["line-height"];n.find(".dropdown-line-height li a").each(function(){var t=$(this).data("value")+""==a+"";this.className=t?"checked":""})}},this.updateBtnStates=function(t){$.each(t,function(t,e){i.toggleBtnActive(n.find(t),e())})},this.tableMoveHandler=function(t){var e,i=18,n=$(t.target.parentNode),s=n.next(),o=n.find(".note-dimension-picker-mousecatcher"),a=n.find(".note-dimension-picker-highlighted"),l=n.find(".note-dimension-picker-unhighlighted");if(void 0===t.offsetX){var c=$(t.target).offset();e={x:t.pageX-c.left,y:t.pageY-c.top}}else e={x:t.offsetX,y:t.offsetY};var h={c:Math.ceil(e.x/i)||1,r:Math.ceil(e.y/i)||1};a.css({width:h.c+"em",height:h.r+"em"}),o.data("value",h.c+"x"+h.r),3<h.c&&h.c<r.insertTableMaxSize.col&&l.css({width:h.c+1+"em"}),3<h.r&&h.r<r.insertTableMaxSize.row&&l.css({height:h.r+1+"em"}),s.html(h.c+" x "+h.r)}},Toolbar=function(t){var e=$.summernote.ui,i=t.layoutInfo.note,n=t.layoutInfo.toolbar,r=t.options;this.shouldInitialize=function(){return!r.airMode},this.initialize=function(){r.toolbar=r.toolbar||[],r.toolbar.length?t.invoke("buttons.build",n,r.toolbar):n.hide(),r.toolbarContainer&&n.appendTo(r.toolbarContainer),i.on("summernote.keyup summernote.mouseup summernote.change",function(){t.invoke("buttons.updateCurrentStyle")}),t.invoke("buttons.updateCurrentStyle")},this.destroy=function(){n.children().remove()},this.updateFullscreen=function(t){e.toggleBtnActive(n.find(".btn-fullscreen"),t)},this.updateCodeview=function(t){e.toggleBtnActive(n.find(".btn-codeview"),t),t?this.deactivate():this.activate()},this.activate=function(t){var i=n.find("button");t||(i=i.not(".btn-codeview")),e.toggleBtn(i,!0)},this.deactivate=function(t){var i=n.find("button");t||(i=i.not(".btn-codeview")),e.toggleBtn(i,!1)}},LinkDialog=function(t){var e=this,i=$.summernote.ui,n=t.layoutInfo.editor,r=t.options,s=r.langInfo;this.initialize=function(){var t=r.dialogsInBody?$(document.body):n,e='<div class="form-group"><label>'+s.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+s.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(r.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+s.link.openInNewWindow+"</label></div>"),o='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+s.link.insert+"</button>";this.$dialog=i.dialog({className:"link-dialog",title:s.link.insert,fade:r.dialogsFade,body:e,footer:o}).render().appendTo(t)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===key.code.ENTER&&e.trigger("click")})},this.toggleLinkBtn=function(t,e,n){i.toggleBtn(t,e.val()&&n.val())},this.showLinkDialog=function(n){return $.Deferred(function(r){var s=e.$dialog.find(".note-link-text"),o=e.$dialog.find(".note-link-url"),a=e.$dialog.find(".note-link-btn"),l=e.$dialog.find("input[type=checkbox]");i.onDialogShown(e.$dialog,function(){t.triggerEvent("dialog.shown"),n.url||(n.url=n.text),s.val(n.text);var i=function(){e.toggleLinkBtn(a,s,o),n.text=s.val()};s.on("input",i).on("paste",function(){setTimeout(i,0)});var c=function(){e.toggleLinkBtn(a,s,o),n.text||s.val(o.val())};o.on("input",c).on("paste",function(){setTimeout(c,0)}).val(n.url).trigger("focus"),e.toggleLinkBtn(a,s,o),e.bindEnterKey(o,a),e.bindEnterKey(s,a),l.prop("checked",n.isNewWindow),a.one("click",function(t){t.preventDefault(),r.resolve({range:n.range,url:o.val(),text:s.val(),isNewWindow:l.is(":checked")}),e.$dialog.modal("hide")})}),i.onDialogHidden(e.$dialog,function(){s.off("input paste keypress"),o.off("input paste keypress"),a.off("click"),"pending"===r.state()&&r.reject()}),i.showDialog(e.$dialog)}).promise()},this.show=function(){var e=t.invoke("editor.getLinkInfo");t.invoke("editor.saveRange"),this.showLinkDialog(e).then(function(e){t.invoke("editor.restoreRange"),t.invoke("editor.createLink",e)}).fail(function(){t.invoke("editor.restoreRange")})},t.memo("help.linkDialog.show",r.langInfo.help["linkDialog.show"])},LinkPopover=function(t){var e=this,i=$.summernote.ui,n=t.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){e.update()},"summernote.dialog.shown":function(){e.hide()}},this.shouldInitialize=function(){return!list.isEmpty(n.popover.link)},this.initialize=function(){this.$popover=i.popover({className:"note-link-popover",callback:function(t){t.find(".popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var e=this.$popover.find(".popover-content");t.invoke("buttons.build",e,n.popover.link)},this.destroy=function(){this.$popover.remove()},this.update=function(){if(!t.invoke("editor.hasFocus"))return void this.hide();var e=t.invoke("editor.createRange");if(e.isCollapsed()&&e.isOnAnchor()){var i=dom.ancestor(e.sc,dom.isAnchor),n=$(i).attr("href");this.$popover.find("a").attr("href",n).html(n);var r=dom.posFromPlaceholder(i);this.$popover.css({display:"block",left:r.left,top:r.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},ImageDialog=function(t){var e=this,i=$.summernote.ui,n=t.layoutInfo.editor,r=t.options,s=r.langInfo;this.initialize=function(){var t=r.dialogsInBody?$(document.body):n,e="";if(r.maximumImageFileSize){var o=Math.floor(Math.log(r.maximumImageFileSize)/Math.log(1024)),a=1*(r.maximumImageFileSize/Math.pow(1024,o)).toFixed(2)+" "+" KMGTP"[o]+"B";e="<small>"+s.image.maximumFileSize+" : "+a+"</small>"}var l='<div class="form-group note-group-select-from-files"><label>'+s.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+e+'</div><div class="form-group note-group-image-url" style="overflow:auto;"><label>'+s.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',c='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+s.image.insert+"</button>";this.$dialog=i.dialog({title:s.image.insert,fade:r.dialogsFade,body:l,footer:c}).render().appendTo(t)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===key.code.ENTER&&e.trigger("click")})},this.show=function(){t.invoke("editor.saveRange"),this.showImageDialog().then(function(n){i.hideDialog(e.$dialog),t.invoke("editor.restoreRange"),"string"==typeof n?t.invoke("editor.insertImage",n):t.invoke("editor.insertImagesOrCallback",n)}).fail(function(){t.invoke("editor.restoreRange")})},this.showImageDialog=function(){return $.Deferred(function(n){var r=e.$dialog.find(".note-image-input"),s=e.$dialog.find(".note-image-url"),o=e.$dialog.find(".note-image-btn");i.onDialogShown(e.$dialog,function(){t.triggerEvent("dialog.shown"),r.replaceWith(r.clone().on("change",function(){n.resolve(this.files||this.value)}).val("")),o.click(function(t){t.preventDefault(),n.resolve(s.val())}),s.on("keyup paste",function(){var t=s.val();i.toggleBtn(o,t)}).val("").trigger("focus"),e.bindEnterKey(s,o)}),i.onDialogHidden(e.$dialog,function(){r.off("change"),s.off("keyup paste keypress"),o.off("click"),"pending"===n.state()&&n.reject()}),i.showDialog(e.$dialog)})}},ImagePopover=function(t){var e=$.summernote.ui,i=t.options;this.shouldInitialize=function(){return!list.isEmpty(i.popover.image)},this.initialize=function(){this.$popover=e.popover({className:"note-image-popover"}).render().appendTo("body");var n=this.$popover.find(".popover-content");t.invoke("buttons.build",n,i.popover.image)},this.destroy=function(){this.$popover.remove()},this.update=function(t){if(dom.isImg(t)){var e=dom.posFromPlaceholder(t);this.$popover.css({display:"block",left:e.left,top:e.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},VideoDialog=function(t){var e=this,i=$.summernote.ui,n=t.layoutInfo.editor,r=t.options,s=r.langInfo;this.initialize=function(){var t=r.dialogsInBody?$(document.body):n,e='<div class="form-group row-fluid"><label>'+s.video.url+' <small class="text-muted">'+s.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>',o='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+s.video.insert+"</button>";this.$dialog=i.dialog({title:s.video.insert,fade:r.dialogsFade,body:e,footer:o}).render().appendTo(t)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===key.code.ENTER&&e.trigger("click")})},this.createVideoNode=function(t){var e,i=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,n=t.match(i),r=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/,s=t.match(r),o=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/,a=t.match(o),l=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,c=t.match(l),h=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,u=t.match(h),d=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,f=t.match(d),p=/^.+.(mp4|m4v)$/,m=t.match(p),g=/^.+.(ogg|ogv)$/,v=t.match(g),y=/^.+.(webm)$/,b=t.match(y);if(n&&11===n[1].length){var w=n[1];e=$("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+w).attr("width","640").attr("height","360")}else if(s&&s[0].length)e=$("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+s[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(a&&a[0].length)e=$("<iframe>").attr("frameborder",0).attr("src",a[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(c&&c[3].length)e=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+c[3]).attr("width","640").attr("height","360");else if(u&&u[2].length)e=$("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+u[2]).attr("width","640").attr("height","360");else if(f&&f[1].length)e=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+f[1]);else{if(!(m||v||b))return!1;e=$("<video controls>").attr("src",t).attr("width","640").attr("height","360")}return e.addClass("note-video-clip"),e[0]},this.show=function(){var n=t.invoke("editor.getSelectedText");t.invoke("editor.saveRange"),this.showVideoDialog(n).then(function(n){i.hideDialog(e.$dialog),t.invoke("editor.restoreRange");var r=e.createVideoNode(n);r&&t.invoke("editor.insertNode",r)}).fail(function(){t.invoke("editor.restoreRange")})},this.showVideoDialog=function(n){return $.Deferred(function(r){var s=e.$dialog.find(".note-video-url"),o=e.$dialog.find(".note-video-btn");i.onDialogShown(e.$dialog,function(){t.triggerEvent("dialog.shown"),s.val(n).on("input",function(){i.toggleBtn(o,s.val())}).trigger("focus"),o.click(function(t){t.preventDefault(),r.resolve(s.val())}),e.bindEnterKey(s,o)}),i.onDialogHidden(e.$dialog,function(){s.off("input"),o.off("click"),"pending"===r.state()&&r.reject()}),i.showDialog(e.$dialog)})}},HelpDialog=function(t){var e=this,i=$.summernote.ui,n=t.layoutInfo.editor,r=t.options,s=r.langInfo;this.createShortCutList=function(){var e=r.keyMap[agent.isMac?"mac":"pc"];return Object.keys(e).map(function(i){var n=e[i],r=$('<div><div class="help-list-item"/></div>');return r.append($("<label><kbd>"+i+"</kdb></label>").css({width:180,"margin-right":10})).append($("<span/>").html(t.memo("help."+n)||n)),r.html()}).join("")},this.initialize=function(){var t=r.dialogsInBody?$(document.body):n,e=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.2</a> \xb7 ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> \xb7 ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=i.dialog({title:s.options.help,fade:r.dialogsFade,body:this.createShortCutList(),footer:e,callback:function(t){t.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.showHelpDialog=function(){return $.Deferred(function(n){i.onDialogShown(e.$dialog,function(){t.triggerEvent("dialog.shown"),n.resolve()}),i.showDialog(e.$dialog)}).promise()},this.show=function(){t.invoke("editor.saveRange"),this.showHelpDialog().then(function(){t.invoke("editor.restoreRange")})}},AirPopover=function(t){var e=this,i=$.summernote.ui,n=t.options;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){e.update()},"summernote.change summernote.dialog.shown":function(){e.hide()},"summernote.focusout":function(t,i){agent.isFF||i.relatedTarget&&dom.ancestor(i.relatedTarget,func.eq(e.$popover[0]))||e.hide()}},this.shouldInitialize=function(){return n.airMode&&!list.isEmpty(n.popover.air)},this.initialize=function(){this.$popover=i.popover({className:"note-air-popover"}).render().appendTo("body");var e=this.$popover.find(".popover-content");t.invoke("buttons.build",e,n.popover.air)},this.destroy=function(){this.$popover.remove()},this.update=function(){var e=t.invoke("editor.currentStyle");if(e.range&&!e.range.isCollapsed()){var i=list.last(e.range.getClientRects());if(i){var n=func.rect2bnd(i);this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-20,top:n.top+n.height})}}else this.hide()},this.hide=function(){this.$popover.hide()}},HintPopover=function(t){var e=this,i=$.summernote.ui,n=5,r=t.options.hint||[],s=t.options.hintDirection||"bottom",o=$.isArray(r)?r:[r];this.events={"summernote.keyup":function(t,i){i.isDefaultPrevented()||e.handleKeyup(i)},"summernote.keydown":function(t,i){e.handleKeydown(i)},"summernote.dialog.shown":function(){e.hide()}},this.shouldInitialize=function(){return o.length>0},this.initialize=function(){this.lastWordRange=null,this.$popover=i.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo("body"),this.$popover.hide(),this.$content=this.$popover.find(".popover-content"),this.$content.on("click",".note-hint-item",function(){e.$content.find(".active").removeClass("active"),$(this).addClass("active"),e.replace()})},this.destroy=function(){this.$popover.remove()},this.selectItem=function(t){this.$content.find(".active").removeClass("active"),t.addClass("active"),this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2},this.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),e=t.next();if(e.length)this.selectItem(e);else{var i=t.parent().next();i.length||(i=this.$content.find(".note-hint-group").first()),this.selectItem(i.find(".note-hint-item").first())}},this.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),e=t.prev();if(e.length)this.selectItem(e);else{var i=t.parent().prev();i.length||(i=this.$content.find(".note-hint-group").last()),this.selectItem(i.find(".note-hint-item").last())}},this.replace=function(){var e=this.$content.find(".note-hint-item.active");if(e.length){var i=this.nodeFromItem(e);this.lastWordRange.insertNode(i),range.createFromNode(i).collapse().select(),this.lastWordRange=null,this.hide(),t.invoke("editor.focus")}},this.nodeFromItem=function(t){var e=o[t.data("index")],i=t.data("item"),n=e.content?e.content(i):i;return"string"==typeof n&&(n=dom.createText(n)),n},this.createItemTemplates=function(t,e){var i=o[t];return e.map(function(e,n){var r=$('<div class="note-hint-item"/>');return r.append(i.template?i.template(e):e+""),r.data({index:t,item:e}),0===t&&0===n&&r.addClass("active"),r})},this.handleKeydown=function(t){this.$popover.is(":visible")&&(t.keyCode===key.code.ENTER?(t.preventDefault(),this.replace()):t.keyCode===key.code.UP?(t.preventDefault(),this.moveUp()):t.keyCode===key.code.DOWN&&(t.preventDefault(),this.moveDown()))},this.searchKeyword=function(t,e,i){var n=o[t];if(n&&n.match.test(e)&&n.search){var r=n.match.exec(e);n.search(r[1],i)}else i()},this.createGroup=function(t,i){var n=$('<div class="note-hint-group note-hint-group-'+t+'"/>');return this.searchKeyword(t,i,function(i){i=i||[],i.length&&(n.html(e.createItemTemplates(t,i)),e.show())}),n},this.handleKeyup=function(i){if(list.contains([key.code.ENTER,key.code.UP,key.code.DOWN],i.keyCode)){if(i.keyCode===key.code.ENTER&&this.$popover.is(":visible"))return}else{var r=t.invoke("editor.createRange").getWordRange(),a=r.toString();if(o.length&&a){this.$content.empty();var l=func.rect2bnd(list.last(r.getClientRects()));l&&(this.$popover.hide(),this.lastWordRange=r,o.forEach(function(t,i){t.match.test(a)&&e.createGroup(i,a).appendTo(e.$content)}),"top"===s?this.$popover.css({left:l.left,top:l.top-this.$popover.outerHeight()-n}):this.$popover.css({left:l.left,top:l.top+l.height+n}))}else this.hide()}},this.show=function(){this.$popover.show()},this.hide=function(){this.$popover.hide()}};$.summernote=$.extend($.summernote,{version:"0.8.2",ui:ui,dom:dom,plugins:{},options:{modules:{editor:Editor,clipboard:Clipboard,dropzone:Dropzone,codeview:Codeview,statusbar:Statusbar,fullscreen:Fullscreen,handle:Handle,hintPopover:HintPopover,autoLink:AutoLink,autoSync:AutoSync,placeholder:Placeholder,buttons:Buttons,toolbar:Toolbar,linkDialog:LinkDialog,linkPopover:LinkPopover,imageDialog:ImageDialog,imagePopover:ImagePopover,videoDialog:VideoDialog,helpDialog:HelpDialog,airPopover:AirPopover},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],
colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):window.jQuery&&!window.jQuery.fn.colorpicker&&t(window.jQuery)}(function(t){"use strict";var e=function(t){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,t&&(void 0!==t.toLowerCase?(t+="","#"===t.charAt(0)||3!==t.length&&6!==t.length||(t="#"+t),this.setColor(t)):void 0!==t.h&&(this.value=t))};e.prototype={constructor:e,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},_sanitizeNumber:function(t){return"number"==typeof t?t:isNaN(t)||null===t||""===t||void 0===t?1:void 0!==t.toLowerCase?parseFloat(t):1},setColor:function(t){t=t.toLowerCase(),this.value=this.stringToHSB(t)||{h:0,s:0,b:0,a:1}},stringToHSB:function(e){e=e.toLowerCase();var i=this,n=!1;return t.each(this.stringParsers,function(t,r){var s=r.re.exec(e),o=s&&r.parse.apply(i,[s]),a=r.format||"rgba";return!o||(n=a.match(/hsla?/)?i.RGBtoHSB.apply(i,i.HSLtoRGB.apply(i,o)):i.RGBtoHSB.apply(i,o),i.origFormat=a,!1)}),n},setHue:function(t){this.value.h=1-t},setSaturation:function(t){this.value.s=t},setBrightness:function(t){this.value.b=1-t},setAlpha:function(t){this.value.a=parseInt(100*(1-t),10)/100},toRGB:function(t,e,i,n){t||(t=this.value.h,e=this.value.s,i=this.value.b),t*=360;var r,s,o,a,l;return t=t%360/60,l=i*e,a=l*(1-Math.abs(t%2-1)),r=s=o=i-l,t=~~t,r+=[l,a,0,0,a,l][t],s+=[a,l,l,a,0,0][t],o+=[0,0,a,l,l,a][t],{r:Math.round(255*r),g:Math.round(255*s),b:Math.round(255*o),a:n||this.value.a}},toHex:function(t,e,i,n){var r=this.toRGB(t,e,i,n);return"#"+(1<<24|parseInt(r.r)<<16|parseInt(r.g)<<8|parseInt(r.b)).toString(16).substr(1)},toHSL:function(t,e,i,n){t=t||this.value.h,e=e||this.value.s,i=i||this.value.b,n=n||this.value.a;var r=t,s=(2-e)*i,o=e*i;return o/=s>0&&1>=s?s:2-s,s/=2,o>1&&(o=1),{h:isNaN(r)?0:r,s:isNaN(o)?0:o,l:isNaN(s)?0:s,a:isNaN(n)?0:n}},toAlias:function(t,e,i,n){var r=this.toHex(t,e,i,n);for(var s in this.colors)if(this.colors[s]==r)return s;return!1},RGBtoHSB:function(t,e,i,n){t/=255,e/=255,i/=255;var r,s,o,a;return o=Math.max(t,e,i),a=o-Math.min(t,e,i),r=0===a?null:o===t?(e-i)/a:o===e?(i-t)/a+2:(t-e)/a+4,r=(r+360)%6*60/360,s=0===a?0:a/o,{h:this._sanitizeNumber(r),s:s,b:o,a:this._sanitizeNumber(n)}},HueToRGB:function(t,e,i){return 0>i?i+=1:i>1&&(i-=1),1>6*i?t+(e-t)*i*6:1>2*i?e:2>3*i?t+(e-t)*(2/3-i)*6:t},HSLtoRGB:function(t,e,i,n){0>e&&(e=0);var r;r=.5>=i?i*(1+e):i+e-i*e;var s=2*i-r,o=t+1/3,a=t,l=t-1/3;return[Math.round(255*this.HueToRGB(s,r,o)),Math.round(255*this.HueToRGB(s,r,a)),Math.round(255*this.HueToRGB(s,r,l)),this._sanitizeNumber(n)]},toString:function(t){switch(t=t||"rgba"){case"rgb":var e=this.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")";case"rgba":var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")";case"hsl":var i=this.toHSL();return"hsl("+Math.round(360*i.h)+","+Math.round(100*i.s)+"%,"+Math.round(100*i.l)+"%)";case"hsla":var i=this.toHSL();return"hsla("+Math.round(360*i.h)+","+Math.round(100*i.s)+"%,"+Math.round(100*i.l)+"%,"+i.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return!1}},stringParsers:[{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),1]}},{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(t){return[t[1],t[2],t[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/^([a-z]{3,})$/,format:"alias",parse:function(t){var e=this.colorNameToHex(t[0])||"#000000",i=this.stringParsers[0].re.exec(e);return i&&this.stringParsers[0].parse.apply(this,[i])}}],colorNameToHex:function(t){return"undefined"!=typeof this.colors[t.toLowerCase()]&&this.colors[t.toLowerCase()]}};var i={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'},n=function(n,r){this.element=t(n).addClass("colorpicker-element"),this.options=t.extend({},i,this.element.data(),r),this.component=this.options.component,this.component=!1!==this.component&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=!0===this.options.container?this.element:this.options.container,this.container=!1!==this.container&&t(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=new e(!1!==this.options.color?this.options.color:this.getValue()),this.format=!1!==this.options.format?this.options.format:this.color.origFormat,this.picker=t(this.options.template),this.picker.addClass(this.options.inline?"colorpicker-inline colorpicker-visible":"colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),("rgba"===this.format||"hsla"===this.format)&&this.picker.addClass("colorpicker-with-alpha"),this.picker.on("mousedown.colorpicker touchstart.colorpicker",t.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:t("body")),!1!==this.input&&(this.input.on({"keyup.colorpicker":t.proxy(this.keyup,this)}),!1===this.component&&this.element.on({"focus.colorpicker":t.proxy(this.show,this)}),!1===this.options.inline&&this.element.on({"focusout.colorpicker":t.proxy(this.hide,this)})),!1!==this.component&&this.component.on({"click.colorpicker":t.proxy(this.show,this)}),!1===this.input&&!1===this.component&&this.element.on({"click.colorpicker":t.proxy(this.show,this)}),!1!==this.input&&!1!==this.component&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":t.proxy(this.show,this),"focus.colorpicker":t.proxy(this.show,this)}),this.update(),t(t.proxy(function(){this.element.trigger("create")},this))};n.version="2.0.0-beta",n.Color=e,n.prototype={constructor:n,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),!1!==this.input&&this.input.off(".colorpicker"),!1!==this.component&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(!1!==this.options.inline||this.options.container)return!1;var t=this.container&&this.container[0]!==document.body?"position":"offset",e=this.component?this.component[t]():this.element[t]();this.picker.css({top:e.top+(this.component?this.component.outerHeight():this.element.outerHeight()),left:e.left})},show:function(e){return!this.isDisabled()&&(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),t(window).on("resize.colorpicker",t.proxy(this.reposition,this)),!e||this.hasInput()&&"color"!==this.input.attr("type")||e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1===this.options.inline&&t(window.document).on({"mousedown.colorpicker":t.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),t(window).off("resize.colorpicker",this.reposition),t(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(t){return t=t||this.color.toString(this.format),this.element.data("color",t),t},updateInput:function(t){return t=t||this.color.toString(this.format),!1!==this.input&&this.input.prop("value",t),t},updatePicker:function(t){void 0!==t&&(this.color=new e(t));var i=!1===this.options.horizontal?this.options.sliders:this.options.slidersHorz,n=this.picker.find("i");return 0!==n.length?(!1===this.options.horizontal?(i=this.options.sliders,n.eq(1).css("top",i.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",i.alpha.maxTop*(1-this.color.value.a))):(i=this.options.slidersHorz,n.eq(1).css("left",i.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",i.alpha.maxLeft*(1-this.color.value.a))),n.eq(0).css({top:i.saturation.maxTop-this.color.value.b*i.saturation.maxTop,left:this.color.value.s*i.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),t):void 0},updateComponent:function(t){if(t=t||this.color.toString(this.format),!1!==this.component){var e=this.component.find("i").eq(0);e.length>0?e.css({backgroundColor:t}):this.component.css({backgroundColor:t})}return t},update:function(t){var e=this.updateComponent();return(!1!==this.getValue(!1)||!0===t)&&(this.updateInput(e),this.updateData(e)),this.updatePicker(),e},setValue:function(t){this.color=new e(t),this.update(),this.element.trigger({type:"changeColor",color:this.color,value:t})},getValue:function(t){t=void 0===t?"#000000":t;var e;return e=this.hasInput()?this.input.val():this.element.data("color"),(void 0===e||""===e||null===e)&&(e=t),e},hasInput:function(){return!1!==this.input},isDisabled:function(){return!!this.hasInput()&&!0===this.input.prop("disabled")},disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),!0)},enable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!1),!0)},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(e){e.pageX||e.pageY||!e.originalEvent||(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var i=t(e.target),n=i.closest("div"),r=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!n.is(".colorpicker")){if(n.is(".colorpicker-saturation"))this.currentSlider=t.extend({},r.saturation);else if(n.is(".colorpicker-hue"))this.currentSlider=t.extend({},r.hue);else{if(!n.is(".colorpicker-alpha"))return!1;this.currentSlider=t.extend({},r.alpha)}var s=n.offset();this.currentSlider.guide=n.find("i")[0].style,this.currentSlider.left=e.pageX-s.left,this.currentSlider.top=e.pageY-s.top,this.mousePointer={left:e.pageX,top:e.pageY},t(document).on({"mousemove.colorpicker":t.proxy(this.mousemove,this),"touchmove.colorpicker":t.proxy(this.mousemove,this),"mouseup.colorpicker":t.proxy(this.mouseup,this),"touchend.colorpicker":t.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(t){t.pageX||t.pageY||!t.originalEvent||(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((t.pageX||this.mousePointer.left)-this.mousePointer.left))),i=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((t.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=e+"px",this.currentSlider.guide.top=i+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,e/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,i/this.currentSlider.maxTop),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(e){return e.stopPropagation(),e.preventDefault(),t(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},keyup:function(t){if(38===t.keyCode)this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0);else if(40===t.keyCode)this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0);else{var i=this.input.val();this.color=new e(i),!1!==this.getValue(!1)&&(this.updateData(),this.updateComponent(),this.updatePicker())}this.element.trigger({type:"changeColor",color:this.color,value:i})}},t.colorpicker=n,t.fn.colorpicker=function(e){var i=arguments;return this.each(function(){var r=t(this),s=r.data("colorpicker"),o="object"==typeof e?e:{};s||"string"==typeof e?"string"==typeof e&&s[e].apply(s,Array.prototype.slice.call(i,1)):r.data("colorpicker",new n(this,o))})},t.fn.colorpicker.constructor=n}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";var e=t(window),i=t(document),n=window.location,r=!0,s=!1,o=null,a=NaN,l=1/0,c="undefined",h="directive",u=".cropper",d=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,f=/^(x|y|width|height)$/,p=/^(naturalWidth|naturalHeight|width|height|aspectRatio|ratio|rotate)$/,m="cropper-modal",g="cropper-hidden",v="cropper-invisible",y="cropper-crop",b="cropper-disabled",w="mousedown touchstart",k="mousemove touchmove",x="mouseup mouseleave touchend touchleave touchcancel",_="wheel mousewheel DOMMouseScroll",C="resize"+u,D="dblclick",S="build"+u,T="built"+u,M="dragstart"+u,L="dragmove"+u,E="dragend"+u,$=function(t){return"number"==typeof t},A=function(e,i){this.element=e,this.$element=t(e),this.defaults=t.extend({},A.DEFAULTS,t.isPlainObject(i)?i:{}),this.$original=o,this.ready=s,this.built=s,this.cropped=s,this.rotated=s,this.disabled=s,this.replaced=s,this.init()},I=Math.round,N=Math.sqrt,F=Math.min,P=Math.max,O=Math.abs,H=Math.sin,z=Math.cos,R=parseFloat;A.prototype={constructor:A,support:{canvas:t.isFunction(t("<canvas>")[0].getContext)},init:function(){var e=this.defaults;t.each(e,function(t,i){switch(t){case"aspectRatio":e[t]=O(R(i))||a;break;case"autoCropArea":e[t]=O(R(i))||.8;break;case"minWidth":case"minHeight":e[t]=O(R(i))||0;break;case"maxWidth":case"maxHeight":e[t]=O(R(i))||l}}),this.image={rotate:0},this.load()},load:function(){var e,i,n=this,s=this.$element,o=this.element,a=this.image,l="";s.is("img")?i=s.prop("src"):s.is("canvas")&&this.support.canvas&&(i=o.toDataURL()),i&&(this.replaced&&(a.rotate=0),this.defaults.checkImageOrigin&&(s.prop("crossOrigin")||this.isCrossOriginURL(i))&&(l=" crossOrigin"),this.$clone=e=t("<img"+l+' src="'+i+'">'),e.one("load",function(){a.naturalWidth=this.naturalWidth||e.width(),a.naturalHeight=this.naturalHeight||e.height(),a.aspectRatio=a.naturalWidth/a.naturalHeight,n.url=i,n.ready=r,n.build()}),e.addClass(v).prependTo("body"))},isCrossOriginURL:function(t){var e=t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return!e||e[1]===n.protocol&&e[2]===n.hostname&&e[3]===n.port?s:r},build:function(){var e,n,s=this.$element,o=this.defaults;this.ready&&(this.built&&this.unbuild(),s.one(S,o.build),e=t.Event(S),s.trigger(e),e.isDefaultPrevented()||(this.$cropper=n=t(A.TEMPLATE),s.addClass(g),this.$clone.removeClass(v).prependTo(n),this.rotated||(this.$original=this.$clone.clone(),this.$original.addClass(g).prependTo(this.$cropper),this.originalImage=t.extend({},this.image)),this.$container=s.parent(),this.$container.append(n),this.$canvas=n.find(".cropper-canvas"),this.$dragger=n.find(".cropper-dragger"),this.$viewer=n.find(".cropper-viewer"),o.autoCrop?this.cropped=r:this.$dragger.addClass(g),o.dragCrop&&this.setDragMode("crop"),o.modal&&this.$canvas.addClass(m),!o.dashed&&this.$dragger.find(".cropper-dashed").addClass(g),!o.movable&&this.$dragger.find(".cropper-face").data(h,"move"),!o.resizable&&this.$dragger.find(".cropper-line, .cropper-point").addClass(g),this.$scope=o.multiple?this.$cropper:i,this.addListeners(),this.initPreview(),this.built=r,this.update(),s.one(T,o.built),s.trigger(T)))},unbuild:function(){this.built&&(this.built=s,this.removeListeners(),this.$preview.empty(),this.$preview=o,this.$dragger=o,this.$canvas=o,this.$container=o,this.$cropper.remove(),this.$cropper=o)},update:function(t){this.initContainer(),this.initCropper(),this.initImage(),this.initDragger(),t?(this.setData(t,r),this.setDragMode("crop")):this.setData(this.defaults.data)},resize:function(){clearTimeout(this.resizing),this.resizing=setTimeout(t.proxy(this.update,this,this.getData()),200)},preview:function(){var e=this.image,i=this.dragger,n=e.width,r=e.height,s=i.left-e.left,o=i.top-e.top;this.$viewer.find("img").css({width:I(n),height:I(r),marginLeft:-I(s),marginTop:-I(o)}),this.$preview.each(function(){var e=t(this),a=e.width()/i.width;e.find("img").css({width:I(n*a),height:I(r*a),marginLeft:-I(s*a),marginTop:-I(o*a)})})},addListeners:function(){var i=this.defaults;this.$element.on(M,i.dragstart).on(L,i.dragmove).on(E,i.dragend),this.$cropper.on(w,this._dragstart=t.proxy(this.dragstart,this)).on(D,this._dblclick=t.proxy(this.dblclick,this)),i.zoomable&&this.$cropper.on(_,this._wheel=t.proxy(this.wheel,this)),this.$scope.on(k,this._dragmove=t.proxy(this.dragmove,this)).on(x,this._dragend=t.proxy(this.dragend,this)),e.on(C,this._resize=t.proxy(this.resize,this))},removeListeners:function(){var t=this.defaults;this.$element.off(M,t.dragstart).off(L,t.dragmove).off(E,t.dragend),this.$cropper.off(w,this._dragstart).off(D,this._dblclick),t.zoomable&&this.$cropper.off(_,this._wheel),this.$scope.off(k,this._dragmove).off(x,this._dragend),e.off(C,this._resize)},initPreview:function(){var e='<img src="'+this.url+'">';this.$preview=t(this.defaults.preview),this.$viewer.html(e),this.$preview.html(e).find("img").css("cssText","min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;")},initContainer:function(){var t=this.$container;this.container={width:P(t.width(),300),height:P(t.height(),150)}},initCropper:function(){var t,e=this.container,i=this.image;i.naturalWidth*e.height/i.naturalHeight-e.width>=0?(t={width:e.width,height:e.width/i.aspectRatio,left:0},t.top=(e.height-t.height)/2):(t={width:e.height*i.aspectRatio,height:e.height,top:0},t.left=(e.width-t.width)/2),this.$cropper.css({width:I(t.width),height:I(t.height),left:I(t.left),top:I(t.top)}),this.cropper=t},initImage:function(){var e=this.image,i=this.cropper,n={_width:i.width,_height:i.height,width:i.width,height:i.height,left:0,top:0,ratio:i.width/e.naturalWidth};this.defaultImage=t.extend({},e,n),e._width!==i.width||e._height!==i.height?t.extend(e,n):(e=t.extend({},n,e),this.replaced&&(this.replaced=s,e.ratio=n.ratio)),this.image=e,this.renderImage()},renderImage:function(t){var e=this.image;"zoom"===t&&(e.left-=(e.width-e.oldWidth)/2,e.top-=(e.height-e.oldHeight)/2),e.left=F(P(e.left,e._width-e.width),0),e.top=F(P(e.top,e._height-e.height),0),this.$clone.css({width:I(e.width),height:I(e.height),marginLeft:I(e.left),marginTop:I(e.top)}),t&&(this.defaults.done(this.getData()),this.preview())},initDragger:function(){var e,i=this.defaults,n=this.cropper,r=i.aspectRatio||this.image.aspectRatio,s=this.image.ratio;e=n.height*r-n.width>=0?{height:n.width/r,width:n.width,left:0,top:(n.height-n.width/r)/2,maxWidth:n.width,maxHeight:n.width/r}:{height:n.height,width:n.height*r,left:(n.width-n.height*r)/2,top:0,maxWidth:n.height*r,maxHeight:n.height},e.minWidth=0,e.minHeight=0,i.aspectRatio?(isFinite(i.maxWidth)?(e.maxWidth=F(e.maxWidth,i.maxWidth*s),e.maxHeight=e.maxWidth/r):isFinite(i.maxHeight)&&(e.maxHeight=F(e.maxHeight,i.maxHeight*s),e.maxWidth=e.maxHeight*r),i.minWidth>0?(e.minWidth=P(0,i.minWidth*s),e.minHeight=e.minWidth/r):i.minHeight>0&&(e.minHeight=P(0,i.minHeight*s),e.minWidth=e.minHeight*r)):(e.maxWidth=F(e.maxWidth,i.maxWidth*s),e.maxHeight=F(e.maxHeight,i.maxHeight*s),e.minWidth=P(0,i.minWidth*s),e.minHeight=P(0,i.minHeight*s)),e.minWidth=F(e.maxWidth,e.minWidth),e.minHeight=F(e.maxHeight,e.minHeight),e.height*=i.autoCropArea,e.width*=i.autoCropArea,e.left=(n.width-e.width)/2,e.top=(n.height-e.height)/2,e.oldLeft=e.left,e.oldTop=e.top,this.defaultDragger=e,this.dragger=t.extend({},e)},renderDragger:function(){var t=this.dragger,e=this.cropper;t.width>t.maxWidth?(t.width=t.maxWidth,t.left=t.oldLeft):t.width<t.minWidth&&(t.width=t.minWidth,t.left=t.oldLeft),t.height>t.maxHeight?(t.height=t.maxHeight,t.top=t.oldTop):t.height<t.minHeight&&(t.height=t.minHeight,t.top=t.oldTop),t.left=F(P(t.left,0),e.width-t.width),t.top=F(P(t.top,0),e.height-t.height),t.oldLeft=t.left,t.oldTop=t.top,this.dragger=t,this.disabled||this.defaults.done(this.getData()),this.$dragger.css({width:I(t.width),height:I(t.height),left:I(t.left),top:I(t.top)}),this.preview()},reset:function(e){this.cropped&&(e&&(this.defaults.data={}),this.image=t.extend({},this.defaultImage),this.renderImage(),this.dragger=t.extend({},this.defaultDragger),this.setData(this.defaults.data))},clear:function(){this.cropped&&(this.cropped=s,this.setData({x:0,y:0,width:0,height:0}),this.$canvas.removeClass(m),this.$dragger.addClass(g))},destroy:function(){var t=this.$element;this.ready&&(this.unbuild(),t.removeClass(g).removeData("cropper"),this.rotated&&t.attr("src",this.$original.attr("src")))},replace:function(e,i){var n,o=this,a=this.$element,l=this.element;e&&e!==this.url&&e!==a.attr("src")&&(i||(this.rotated=s,this.replaced=r),a.is("img")?(a.attr("src",e),this.load()):a.is("canvas")&&this.support.canvas&&(n=l.getContext("2d"),t('<img src="'+e+'">').one("load",function(){l.width=this.width,l.height=this.height,n.clearRect(0,0,l.width,l.height),n.drawImage(this,0,0),o.load()})))},setData:function(e,i){var n=this.cropper,r=this.dragger,s=this.image,a=this.defaults.aspectRatio;this.built&&typeof e!==c&&((e===o||t.isEmptyObject(e))&&(r=t.extend({},this.defaultDragger)),t.isPlainObject(e)&&!t.isEmptyObject(e)&&(i||(this.defaults.data=e),e=this.transformData(e),$(e.x)&&e.x<=n.width-s.left&&(r.left=e.x+s.left),$(e.y)&&e.y<=n.height-s.top&&(r.top=e.y+s.top),a?$(e.width)&&e.width<=r.maxWidth&&e.width>=r.minWidth?(r.width=e.width,r.height=r.width/a):$(e.height)&&e.height<=r.maxHeight&&e.height>=r.minHeight&&(r.height=e.height,r.width=r.height*a):($(e.width)&&e.width<=r.maxWidth&&e.width>=r.minWidth&&(r.width=e.width),$(e.height)&&e.height<=r.maxHeight&&e.height>=r.minHeight&&(r.height=e.height))),this.dragger=r,this.renderDragger())},getData:function(t){var e=this.dragger,i=this.image,n={};return this.built&&(n={x:e.left-i.left,y:e.top-i.top,width:e.width,height:e.height},n=this.transformData(n,r,t)),n},transformData:function(e,i,n){var r=this.image.ratio,s={};return t.each(e,function(t,e){e=R(e),f.test(t)&&!isNaN(e)&&(s[t]=i?n?I(e/r):e/r:e*r)}),s},setAspectRatio:function(t){var e="auto"===t;t=R(t),(e||!isNaN(t)&&t>0)&&(this.defaults.aspectRatio=e?a:t,this.built&&(this.initDragger(),this.renderDragger()))},getImageData:function(){var e={};return this.ready&&t.each(this.image,function(t,i){p.test(t)&&(e[t]=i)}),e},getDataURL:function(e,i,n){var r,s=t("<canvas>")[0],o=this.getData(),a="";return t.isPlainObject(e)||(n=i,i=e,e={}),e=t.extend({width:o.width,height:o.height},e),this.cropped&&this.support.canvas&&(s.width=e.width,s.height=e.height,r=s.getContext("2d"),"image/jpeg"===i&&(r.fillStyle="#fff",r.fillRect(0,0,e.width,e.height)),r.drawImage(this.$clone[0],o.x,o.y,o.width,o.height,0,0,e.width,e.height),a=s.toDataURL(i,n)),a},setDragMode:function(t){var e=this.$canvas,i=this.defaults,n=s,o=s;if(this.built&&!this.disabled){switch(t){case"crop":i.dragCrop&&(n=r,e.data(h,t));break;case"move":o=r,e.data(h,t);break;default:e.removeData(h)}e.toggleClass(y,n).toggleClass("cropper-move",o)}},enable:function(){this.built&&(this.disabled=s,this.$cropper.removeClass(b))},disable:function(){this.built&&(this.disabled=r,this.$cropper.addClass(b))},rotate:function(t){var e=this.image;t=R(t)||0,this.built&&0!==t&&!this.disabled&&this.defaults.rotatable&&this.support.canvas&&(this.rotated=r,t=e.rotate=(e.rotate+t)%360,this.replace(this.getRotatedDataURL(t),!0))},getRotatedDataURL:function(e){var i=t("<canvas>")[0],n=i.getContext("2d"),r=e*Math.PI/180,s=O(e)%180,o=s>90?180-s:s,a=o*Math.PI/180,l=this.originalImage,c=l.naturalWidth,h=l.naturalHeight,u=O(c*z(a)+h*H(a)),d=O(c*H(a)+h*z(a));return i.width=u,i.height=d,n.save(),n.translate(u/2,d/2),n.rotate(r),n.drawImage(this.$original[0],-c/2,-h/2,c,h),n.restore(),i.toDataURL()},zoom:function(t){var e,i,n,r=this.image;t=R(t),this.built&&t&&!this.disabled&&this.defaults.zoomable&&(e=r.width*(1+t),i=r.height*(1+t),(n=e/r._width)>10||(1>n&&(e=r._width,i=r._height),this.setDragMode(1>=n?"crop":"move"),r.oldWidth=r.width,r.oldHeight=r.height,r.width=e,r.height=i,r.ratio=r.width/r.naturalWidth,this.renderImage("zoom")))},dblclick:function(){this.disabled||this.setDragMode(this.$canvas.hasClass(y)?"move":"crop")},wheel:function(t){var e,i=t.originalEvent,n=117.25,r=5;this.disabled||(t.preventDefault(),i.deltaY?(e=i.deltaY,e=e%r==0?e/r:e%n==0?e/n:e/166.66665649414062):e=i.wheelDelta?-i.wheelDelta/120:i.detail?i.detail/3:0,this.zoom(.1*e))},dragstart:function(e){var i,n,o,a=e.originalEvent.touches,l=e;if(!this.disabled){if(a){if((o=a.length)>1){if(!this.defaults.zoomable||2!==o)return;l=a[1],this.startX2=l.pageX,this.startY2=l.pageY,i="zoom"}l=a[0]}if(i=i||t(l.target).data(h),d.test(i)){if(e.preventDefault(),n=t.Event(M),this.$element.trigger(n),n.isDefaultPrevented())return;this.directive=i,this.cropping=s,this.startX=l.pageX,
this.startY=l.pageY,"crop"===i&&(this.cropping=r,this.$canvas.addClass(m))}}},dragmove:function(e){var i,n,r=e.originalEvent.touches,s=e;if(!this.disabled){if(r){if((n=r.length)>1){if(!this.defaults.zoomable||2!==n)return;s=r[1],this.endX2=s.pageX,this.endY2=s.pageY}s=r[0]}if(this.directive){if(e.preventDefault(),i=t.Event(L),this.$element.trigger(i),i.isDefaultPrevented())return;this.endX=s.pageX,this.endY=s.pageY,this.dragging()}}},dragend:function(e){var i;if(!this.disabled&&this.directive){if(e.preventDefault(),i=t.Event(E),this.$element.trigger(i),i.isDefaultPrevented())return;this.cropping&&(this.cropping=s,this.$canvas.toggleClass(m,this.cropped&&this.defaults.modal)),this.directive=""}},dragging:function(){var t,e=this.directive,i=this.image,n=this.cropper,o=n.width,a=n.height,l=this.dragger,c=l.width,h=l.height,u=l.left,d=l.top,f=u+c,p=d+h,m=r,v=this.defaults,y=v.aspectRatio,b={x:this.endX-this.startX,y:this.endY-this.startY};switch(y&&(b.X=b.y*y,b.Y=b.x/y),e){case"all":u+=b.x,d+=b.y;break;case"e":if(b.x>=0&&(f>=o||y&&(0>=d||p>=a))){m=s;break}c+=b.x,y&&(h=c/y,d-=b.Y/2),0>c&&(e="w",c=0);break;case"n":if(b.y<=0&&(0>=d||y&&(0>=u||f>=o))){m=s;break}h-=b.y,d+=b.y,y&&(c=h*y,u+=b.X/2),0>h&&(e="s",h=0);break;case"w":if(b.x<=0&&(0>=u||y&&(0>=d||p>=a))){m=s;break}c-=b.x,u+=b.x,y&&(h=c/y,d+=b.Y/2),0>c&&(e="e",c=0);break;case"s":if(b.y>=0&&(p>=a||y&&(0>=u||f>=o))){m=s;break}h+=b.y,y&&(c=h*y,u-=b.X/2),0>h&&(e="n",h=0);break;case"ne":if(y){if(b.y<=0&&(0>=d||f>=o)){m=s;break}h-=b.y,d+=b.y,c=h*y}else b.x>=0?o>f?c+=b.x:b.y<=0&&0>=d&&(m=s):c+=b.x,b.y<=0?d>0&&(h-=b.y,d+=b.y):(h-=b.y,d+=b.y);0>h&&(e="sw",h=0,c=0);break;case"nw":if(y){if(b.y<=0&&(0>=d||0>=u)){m=s;break}h-=b.y,d+=b.y,c=h*y,u+=b.X}else b.x<=0?u>0?(c-=b.x,u+=b.x):b.y<=0&&0>=d&&(m=s):(c-=b.x,u+=b.x),b.y<=0?d>0&&(h-=b.y,d+=b.y):(h-=b.y,d+=b.y);0>h&&(e="se",h=0,c=0);break;case"sw":if(y){if(b.x<=0&&(0>=u||p>=a)){m=s;break}c-=b.x,u+=b.x,h=c/y}else b.x<=0?u>0?(c-=b.x,u+=b.x):b.y>=0&&p>=a&&(m=s):(c-=b.x,u+=b.x),b.y>=0?a>p&&(h+=b.y):h+=b.y;0>c&&(e="ne",h=0,c=0);break;case"se":if(y){if(b.x>=0&&(f>=o||p>=a)){m=s;break}c+=b.x,h=c/y}else b.x>=0?o>f?c+=b.x:b.y>=0&&p>=a&&(m=s):c+=b.x,b.y>=0?a>p&&(h+=b.y):h+=b.y;0>c&&(e="nw",h=0,c=0);break;case"move":i.left+=b.x,i.top+=b.y,this.renderImage("move"),m=s;break;case"zoom":v.zoomable&&(this.zoom(function(t,e,i,n,r,s){return(N(r*r+s*s)-N(i*i+n*n))/N(t*t+e*e)}(i.width,i.height,O(this.startX-this.startX2),O(this.startY-this.startY2),O(this.endX-this.endX2),O(this.endY-this.endY2))),this.endX2=this.startX2,this.endY2=this.startY2);break;case"crop":b.x&&b.y&&(t=this.$cropper.offset(),u=this.startX-t.left,d=this.startY-t.top,c=l.minWidth,h=l.minHeight,b.x>0?b.y>0?e="se":(e="ne",d-=h):b.y>0?(e="sw",u-=c):(e="nw",u-=c,d-=h),this.cropped||(this.cropped=r,this.$dragger.removeClass(g)))}m&&(l.width=c,l.height=h,l.left=u,l.top=d,this.directive=e,this.renderDragger()),this.startX=this.endX,this.startY=this.endY}},A.TEMPLATE=function(t,e){return e=e.split(","),t.replace(/\d+/g,function(t){return e[t]})}('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-dragger"><1 6="5-viewer"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-face" 3-2="all"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,directive,data,point,cropper,class,line,dashed"),A.DEFAULTS={aspectRatio:"auto",autoCropArea:.8,data:{},done:t.noop,preview:"",multiple:s,autoCrop:r,dragCrop:r,dashed:r,modal:r,movable:r,resizable:r,zoomable:r,rotatable:r,checkImageOrigin:r,minWidth:0,minHeight:0,maxWidth:l,maxHeight:l,build:o,built:o,dragstart:o,dragmove:o,dragend:o},A.setDefaults=function(e){t.extend(A.DEFAULTS,e)},A.other=t.fn.cropper,t.fn.cropper=function(e){var i,n=[].slice.call(arguments,1);return this.each(function(){var r,s=t(this),o=s.data("cropper");o||s.data("cropper",o=new A(this,e)),"string"==typeof e&&t.isFunction(r=o[e])&&(i=r.apply(o,n))}),typeof i!==c?i:this},t.fn.cropper.Constructor=A,t.fn.cropper.setDefaults=A.setDefaults,t.fn.cropper.noConflict=function(){return t.fn.cropper=A.other,this}}),function(t,e){function i(){return new Date(Date.UTC.apply(Date,arguments))}function n(){var t=new Date;return i(t.getFullYear(),t.getMonth(),t.getDate())}function r(t){return function(){return this[t].apply(this,arguments)}}function s(e,i){function n(t,e){return e.toLowerCase()}var r,s=t(e).data(),o={},a=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());for(var l in s)i.test(l)&&(r=l.replace(a,n),o[r]=s[l]);return o}function o(e){var i={};if(p[e]||(e=e.split("-")[0],p[e])){var n=p[e];return t.each(f,function(t,e){e in n&&(i[e]=n[e])}),i}}var a=t(window),l=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),i=0,n=this.length;i<n;i++)if(this[i].valueOf()===e)return i;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.splice(0)},copy:function(){var t=new l;return t.replace(this),t}};return function(){var i=[];return i.push.apply(i,arguments),t.extend(i,e),i}}(),c=function(e,i){this.dates=new l,this.viewDate=n(),this.focusDate=null,this._process_options(i),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(m.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),n=i.language;switch(p[n]||(n=n.split("-")[0],p[n]||(n=d.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),!0!==i.multidate&&(i.multidate=Number(i.multidate)||!1,!1!==i.multidate?i.multidate=Math.max(0,i.multidate):i.multidate=1),i.multidateSeparator=String(i.multidateSeparator),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var r=m.parseFormat(i.format);i.startDate!==-Infinity&&(i.startDate?i.startDate instanceof Date?i.startDate=this._local_to_utc(this._zero_time(i.startDate)):i.startDate=m.parseDate(i.startDate,r,i.language):i.startDate=-Infinity),i.endDate!==Infinity&&(i.endDate?i.endDate instanceof Date?i.endDate=this._local_to_utc(this._zero_time(i.endDate)):i.endDate=m.parseDate(i.endDate,r,i.language):i.endDate=Infinity),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)});var s=String(i.orientation).toLowerCase().split(/\s+/g),o=i.orientation.toLowerCase();if(s=t.grep(s,function(t){return/^auto|left|right|top|bottom$/.test(t)}),i.orientation={x:"auto",y:"auto"},o&&"auto"!==o)if(1===s.length)switch(s[0]){case"top":case"bottom":i.orientation.y=s[0];break;case"left":case"right":i.orientation.x=s[0]}else o=t.grep(s,function(t){return/^left|right$/.test(t)}),i.orientation.x=o[0]||"auto",o=t.grep(s,function(t){return/^top|bottom$/.test(t)}),i.orientation.y=o[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var i,n,r,s=0;s<t.length;s++)i=t[s][0],2===t[s].length?(n=e,r=t[s][1]):3===t[s].length&&(n=t[s][1],r=t[s][2]),i.on(r,n)},_unapplyEvents:function(t){for(var i,n,r,s=0;s<t.length;s++)i=t[s][0],2===t[s].length?(r=e,n=t[s][1]):3===t[s].length&&(r=t[s][1],n=t[s][2]),i.off(n,r)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var n=i||this.dates.get(-1),r=this._utc_to_local(n);this.element.trigger({type:e,date:r,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var i=this.dates.get(t);return m.formatDate(i,e,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:r("setDates"),setUTCDate:r("setUTCDates"),setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t).change():this.component&&this.element.find("input").val(t).change()},getFormattedDate:function(i){i===e&&(i=this.o.format);var n=this.o.language;return t.map(this.dates,function(t){return m.formatDate(t,i,n)}).join(this.o.multidateSeparator)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=this.picker.outerWidth(),i=this.picker.outerHeight(),n=10,r=a.width(),s=a.height(),o=a.scrollTop(),l=parseInt(this.element.parents().filter(function(){return"auto"!==t(this).css("z-index")}).first().css("z-index"))+10,c=this.component?this.component.parent().offset():this.element.offset(),h=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),u=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),d=c.left,f=c.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(d-=e-u)):(this.picker.addClass("datepicker-orient-left"),c.left<0?d-=c.left-n:c.left+e>r&&(d=r-e-n));var p,m,g=this.o.orientation.y;"auto"===g&&(p=-o+c.top-i,m=o+s-(c.top+h+i),g=Math.max(p,m)===m?"top":"bottom"),this.picker.addClass("datepicker-orient-"+g),"top"===g?f+=h:f-=i+parseInt(this.picker.css("padding-top")),this.picker.css({top:f,left:d,zIndex:l})}},_allow_update:!0,update:function(){if(this._allow_update){var e=this.dates.copy(),i=[],n=!1;arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),i.push(e)},this)),n=!0):(i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),i=i&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=t.map(i,t.proxy(function(t){return m.parseDate(t,this.o.format,this.o.language)},this)),i=t.grep(i,t.proxy(function(t){return t<this.o.startDate||t>this.o.endDate||!t},this),!0),this.dates.replace(i),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),n?this.setValue():i.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+p[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+p[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],n=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),s=new Date;return e.getUTCFullYear()<n||e.getUTCFullYear()===n&&e.getUTCMonth()<r?i.push("old"):(e.getUTCFullYear()>n||e.getUTCFullYear()===n&&e.getUTCMonth()>r)&&i.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===s.getFullYear()&&e.getUTCMonth()===s.getMonth()&&e.getUTCDate()===s.getDate()&&i.push("today"),-1!==this.dates.contains(e)&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var n,r=new Date(this.viewDate),s=r.getUTCFullYear(),o=r.getUTCMonth(),a=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,l=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,c=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,h=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,u=p[this.o.language].today||p.en.today||"",d=p[this.o.language].clear||p.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(p[this.o.language].months[o]+" "+s),this.picker.find("tfoot th.today").text(u).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot th.clear").text(d).toggle(!1!==this.o.clearBtn),this.updateNavArrows(),this.fillMonths();var f=i(s,o-1,28),g=m.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth());f.setUTCDate(g),f.setUTCDate(g-(f.getUTCDay()-this.o.weekStart+7)%7);var v=new Date(f);v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();for(var y,b=[];f.valueOf()<v;){if(f.getUTCDay()===this.o.weekStart&&(b.push("<tr>"),this.o.calendarWeeks)){var w=new Date(+f+(this.o.weekStart-f.getUTCDay()-7)%7*864e5),k=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),x=new Date(Number(x=i(k.getUTCFullYear(),0,1))+(11-x.getUTCDay())%7*864e5),_=(k-x)/864e5/7+1;b.push('<td class="cw">'+_+"</td>")}if(y=this.getClassNames(f),y.push("day"),this.o.beforeShowDay!==t.noop){var C=this.o.beforeShowDay(this._utc_to_local(f));C===e?C={}:"boolean"==typeof C?C={enabled:C}:"string"==typeof C&&(C={classes:C}),!1===C.enabled&&y.push("disabled"),C.classes&&(y=y.concat(C.classes.split(/\s+/))),C.tooltip&&(n=C.tooltip)}y=t.unique(y),b.push('<td class="'+y.join(" ")+'"'+(n?' title="'+n+'"':"")+">"+f.getUTCDate()+"</td>"),f.getUTCDay()===this.o.weekEnd&&b.push("</tr>"),f.setUTCDate(f.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(b.join(""));var D=this.picker.find(".datepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");t.each(this.dates,function(t,e){e.getUTCFullYear()===s&&D.eq(e.getUTCMonth()).addClass("active")}),(s<a||s>c)&&D.addClass("disabled"),s===a&&D.slice(0,l).addClass("disabled"),s===c&&D.slice(h+1).addClass("disabled"),b="",s=10*parseInt(s/10,10);var S=this.picker.find(".datepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;for(var T,M=t.map(this.dates,function(t){return t.getUTCFullYear()}),L=-1;L<11;L++)T=["year"],-1===L?T.push("old"):10===L&&T.push("new"),-1!==t.inArray(s,M)&&T.push("active"),(s<a||s>c)&&T.push("disabled"),b+='<span class="'+T.join(" ")+'">'+s+"</span>",s+=1;S.html(b)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&e<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&e>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(e){e.preventDefault();var n,r,s,o=t(e.target).closest("span, td, th");if(1===o.length)switch(o[0].nodeName.toLowerCase()){case"th":switch(o[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var a=m.modes[this.viewMode].navStep*("prev"===o[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var l=new Date;l=i(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0),this.showMode(-2);var c="linked"===this.o.todayBtn?null:"view";this._setDate(l,c);break;case"clear":var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":o.is(".disabled")||(this.viewDate.setUTCDate(1),o.is(".month")?(s=1,r=o.parent().find("span").index(o),n=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(r),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(i(n,r,s))):(s=1,r=0,n=parseInt(o.text(),10)||0,this.viewDate.setUTCFullYear(n),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(i(n,r,s))),this.showMode(-1),this.fill());break;case"td":o.is(".day")&&!o.is(".disabled")&&(s=parseInt(o.text(),10)||1,n=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),o.is(".old")?0===r?(r=11,n-=1):r-=1:o.is(".new")&&(11===r?(r=0,n+=1):r+=1),this._setDate(i(n,r,s)))}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t?-1!==e?this.dates.remove(e):this.dates.push(t):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveMonth:function(t,i){if(!t)return e;if(!i)return t;var n,r,s=new Date(t.valueOf()),o=s.getUTCDate(),a=s.getUTCMonth(),l=Math.abs(i);if(i=i>0?1:-1,1===l)r=-1===i?function(){return s.getUTCMonth()===a}:function(){return s.getUTCMonth()!==n},n=a+i,s.setUTCMonth(n),(n<0||n>11)&&(n=(n+12)%12);else{for(var c=0;c<l;c++)s=this.moveMonth(s,i);n=s.getUTCMonth(),s.setUTCDate(o),r=function(){return n!==s.getUTCMonth()}}for(;r();)s.setUTCDate(--o),s.setUTCMonth(n);return s},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27===t.keyCode&&this.show());var e,i,r,s=!1,o=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37===t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.dates.get(-1)||n(),e),r=this.moveYear(o,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(i=this.moveMonth(this.dates.get(-1)||n(),e),r=this.moveMonth(o,e),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||n()),i.setUTCDate(i.getUTCDate()+e),r=new Date(o),r.setUTCDate(o.getUTCDate()+e)),this.dateWithinRange(i)&&(this.focusDate=this.viewDate=r,this.setValue(),this.fill(),t.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38===t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.dates.get(-1)||n(),e),r=this.moveYear(o,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(i=this.moveMonth(this.dates.get(-1)||n(),e),r=this.moveMonth(o,e),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||n()),i.setUTCDate(i.getUTCDate()+7*e),r=new Date(o),r.setUTCDate(o.getUTCDate()+7*e)),this.dateWithinRange(i)&&(this.focusDate=this.viewDate=r,this.setValue(),this.fill(),t.preventDefault());break;case 32:break;case 13:o=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(o),s=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(s){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var h=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};h.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var i=t(e.target).data("datepicker"),n=i.getUTCDate(),r=t.inArray(e.target,this.inputs),s=this.inputs.length;if(-1!==r){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(n)}),n<this.dates[r])for(;r>=0&&n<this.dates[r];)this.pickers[r--].setUTCDate(n);else if(n>this.dates[r])for(;r<s&&n>this.dates[r];)this.pickers[r++].setUTCDate(n);this.updateDates(),delete this.updating}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var u=t.fn.datepicker;t.fn.datepicker=function(i){var n=Array.apply(null,arguments);n.shift();var r;return this.each(function(){var a=t(this),l=a.data("datepicker"),u="object"==typeof i&&i;if(!l){var f=s(this,"date"),p=t.extend({},d,f,u),m=o(p.language),g=t.extend({},d,m,f,u);if(a.is(".input-daterange")||g.inputs){var v={inputs:g.inputs||a.find("input").toArray()};a.data("datepicker",l=new h(this,t.extend(g,v)))}else a.data("datepicker",l=new c(this,g))}if("string"==typeof i&&"function"==typeof l[i]&&(r=l[i].apply(l,n))!==e)return!1}),r!==e?r:this};var d=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},f=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=c;var p=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,m.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(n,r,s){function o(){var t=this.slice(0,d[h].length);return t===d[h].slice(0,t.length)}if(!n)return e;if(n instanceof Date)return n;"string"==typeof r&&(r=m.parseFormat(r));var a,l,h,u=/([\-+]\d+)([dmwy])/,d=n.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(n)){for(n=new Date,h=0;h<d.length;h++)switch(a=u.exec(d[h]),l=parseInt(a[1]),a[2]){case"d":n.setUTCDate(n.getUTCDate()+l);break;case"m":n=c.prototype.moveMonth.call(c.prototype,n,l);break;case"w":n.setUTCDate(n.getUTCDate()+7*l);break;case"y":n=c.prototype.moveYear.call(c.prototype,n,l)}return i(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}d=n&&n.match(this.nonpunctuation)||[],n=new Date;var f,g,v={},y=["yyyy","yy","M","MM","m","mm","d","dd"],b={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};b.M=b.MM=b.mm=b.m,b.dd=b.d,n=i(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);var w=r.parts.slice();if(d.length!==w.length&&(w=t(w).filter(function(e,i){return-1!==t.inArray(i,y)}).toArray()),d.length===w.length){var k;for(h=0,k=w.length;h<k;h++){if(f=parseInt(d[h],10),a=w[h],isNaN(f))switch(a){case"MM":g=t(p[s].months).filter(o),f=t.inArray(g[0],p[s].months)+1;break;case"M":g=t(p[s].monthsShort).filter(o),f=t.inArray(g[0],p[s].monthsShort)+1}v[a]=f}var x,_;for(h=0;h<y.length;h++)(_=y[h])in v&&!isNaN(v[_])&&(x=new Date(n),b[_](x,v[_]),isNaN(x)||(n=x))}return n},formatDate:function(e,i,n){if(!e)return"";"string"==typeof i&&(i=m.parseFormat(i));var r={d:e.getUTCDate(),D:p[n].daysShort[e.getUTCDay()],DD:p[n].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:p[n].monthsShort[e.getUTCMonth()],MM:p[n].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,e=[];for(var s=t.extend([],i.separators),o=0,a=i.parts.length;o<=a;o++)s.length&&e.push(s.shift()),e.push(r[i.parts[o]]);return e.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};m.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=m,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=u,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),i.datepicker("show"))}),t(function(){t('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),function(t,e,i,n){var r,s=0,o=function(){var t=n.userAgent,e=/msie\s\d+/i;return 0<t.search(e)&&(t=e.exec(t).toString(),9>(t=t.split(" ")[1]))}(),a="ontouchstart"in i||0<n.msMaxTouchPoints,l=function(t){return"Number"!=typeof t&&(t=parseFloat(t)),isNaN(t)?null:t},c={init:function(n){return this.each(function(){var c=t.extend({min:null,max:null,from:null,to:null,type:"single",step:null,prefix:"",postfix:"",maxPostfix:"",hasGrid:!1,hideMinMax:!1,hideFromTo:!1,prettify:!0,disable:!1,values:null,onChange:null,onLoad:null,onFinish:null},n),h=t(this),u=this,d=!1,f=null;if(!h.data("isActive")){h.data("isActive",!0),this.pluginCount=s+=1,h.prop("value")&&(f=h.prop("value").split(";")),"single"===c.type?f&&1<f.length?("number"!=typeof c.min?c.min=parseFloat(f[0]):"number"!=typeof c.from&&(c.from=parseFloat(f[0])),"number"!=typeof c.max&&(c.max=parseFloat(f[1]))):f&&1===f.length&&"number"!=typeof c.from&&(c.from=parseFloat(f[0])):"double"===c.type&&(f&&1<f.length?("number"!=typeof c.min?c.min=parseFloat(f[0]):"number"!=typeof c.from&&(c.from=parseFloat(f[0])),"number"!=typeof c.max?c.max=parseFloat(f[1]):"number"!=typeof c.to&&(c.to=parseFloat(f[1]))):f&&1===f.length&&("number"!=typeof c.min?c.min=parseFloat(f[0]):"number"!=typeof c.from&&(c.from=parseFloat(f[0])))),"number"==typeof h.data("min")&&(c.min=parseFloat(h.data("min"))),"number"==typeof h.data("max")&&(c.max=parseFloat(h.data("max"))),"number"==typeof h.data("from")&&(c.from=parseFloat(h.data("from"))),
"number"==typeof h.data("to")&&(c.to=parseFloat(h.data("to"))),h.data("step")&&(c.step=parseFloat(h.data("step"))),h.data("type")&&(c.type=h.data("type")),h.data("prefix")&&(c.prefix=h.data("prefix")),h.data("postfix")&&(c.postfix=h.data("postfix")),h.data("maxpostfix")&&(c.maxPostfix=h.data("maxpostfix")),h.data("hasgrid")&&(c.hasGrid=h.data("hasgrid")),h.data("hideminmax")&&(c.hideMinMax=h.data("hideminmax")),h.data("hidefromto")&&(c.hideFromTo=h.data("hidefromto")),h.data("prettify")&&(c.prettify=h.data("prettify")),h.data("disable")&&(c.disable=h.data("disable")),h.data("values")&&(c.values=h.data("values").split(",")),c.min=l(c.min),c.min||0===c.min||(c.min=10),c.max=l(c.max),c.max||0===c.max||(c.max=100),"[object Array]"!==Object.prototype.toString.call(c.values)&&(c.values=null),c.values&&0<c.values.length&&(c.min=0,c.max=c.values.length-1,c.step=1,d=!0),c.from=l(c.from),c.from||0===c.from||(c.from=c.min),c.to=l(c.to),c.to||0===c.to||(c.to=c.max),c.step=l(c.step),c.step||(c.step=1),c.from<c.min&&(c.from=c.min),c.from>c.max&&(c.from=c.min),c.to<c.min&&(c.to=c.max),c.to>c.max&&(c.to=c.max),"double"===c.type&&(c.from>c.to&&(c.from=c.to),c.to<c.from&&(c.to=c.from));var p=function(t){return t=t.toString(),c.prettify&&(t=t.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")),t},f='<span class="irs" id="irs-'+this.pluginCount+'"></span>';h[0].style.display="none",h.before(f);var m,g,v,y,b,w,k,x,_,C,D,S,T=h.prev(),M=t(e.body),L=t(i),E=!1,$=!1,A=!0,I={},N=0,F=0,P=0,O=0,H=0,z=0,R=0,U=0,B=0,W=0,j=0;parseInt(c.step,10)!==parseFloat(c.step)&&(j=c.step.toString().split(".")[1],j=Math.pow(10,j.length)),this.updateData=function(e){A=!0,c=t.extend(c,e),T.find("*").off(),L.off("mouseup.irs"+u.pluginCount),M.off("mouseup.irs"+u.pluginCount),M.off("mousemove.irs"+u.pluginCount),T.html(""),Y()},this.removeSlider=function(){T.find("*").off(),L.off("mouseup.irs"+u.pluginCount),M.off("mouseup.irs"+u.pluginCount),M.off("mousemove.irs"+u.pluginCount),T.html("").remove(),h.data("isActive",!1),h.show()};var Y=function(){T.html('<span class="irs"><span class="irs-line"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span>'),m=T.find(".irs"),g=m.find(".irs-min"),v=m.find(".irs-max"),y=m.find(".irs-from"),b=m.find(".irs-to"),w=m.find(".irs-single"),S=T.find(".irs-grid"),c.hideFromTo&&(y[0].style.visibility="hidden",b[0].style.visibility="hidden",w[0].style.visibility="hidden"),c.hideFromTo||(y[0].style.visibility="visible",b[0].style.visibility="visible",w[0].style.visibility="visible"),c.hideMinMax&&(g[0].style.visibility="hidden",v[0].style.visibility="hidden",P=F=0),c.hideMinMax||(g[0].style.visibility="visible",v[0].style.visibility="visible",c.values?(g.html(c.prefix+c.values[0]+c.postfix),v.html(c.prefix+c.values[c.values.length-1]+c.maxPostfix+c.postfix)):(g.html(c.prefix+p(c.min)+c.postfix),v.html(c.prefix+p(c.max)+c.maxPostfix+c.postfix)),F=g.outerWidth(),P=v.outerWidth()),q()},q=function(){"single"===c.type?(m.append('<span class="irs-slider single"></span>'),k=m.find(".single"),k.on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),G(e,t(this),null),$=E=!0,r=u.pluginCount,o&&t("*").prop("unselectable",!0)}),a&&k.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),G(e.originalEvent.touches[0],t(this),null),$=E=!0,r=u.pluginCount})):"double"===c.type&&(m.append('<span class="irs-diapason"></span><span class="irs-slider from"></span><span class="irs-slider to"></span>'),x=m.find(".from"),_=m.find(".to"),D=m.find(".irs-diapason"),K(),x.on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("last"),_.removeClass("last"),G(e,t(this),"from"),$=E=!0,r=u.pluginCount,o&&t("*").prop("unselectable",!0)}),_.on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("last"),x.removeClass("last"),G(e,t(this),"to"),$=E=!0,r=u.pluginCount,o&&t("*").prop("unselectable",!0)}),a&&(x.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("last"),_.removeClass("last"),G(e.originalEvent.touches[0],t(this),"from"),$=E=!0,r=u.pluginCount}),_.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("last"),x.removeClass("last"),G(e.originalEvent.touches[0],t(this),"to"),$=E=!0,r=u.pluginCount})),c.to===c.max&&x.addClass("last")),M.on("mouseup.irs"+u.pluginCount,function(){r===u.pluginCount&&E&&(E=$=!1,C.removeAttr("id"),C=null,"double"===c.type&&K(),Z(),o&&t("*").prop("unselectable",!1))}),M.on("mousemove.irs"+u.pluginCount,function(t){E&&(N=t.pageX,X())}),T.on("mousedown",function(){r=u.pluginCount}),T.on("mouseup",function(t){if(r===u.pluginCount&&!E&&!c.disable){t=t.pageX,A=!1,t-=T.offset().left;var e=I.fromX+(I.toX-I.fromX)/2;U=0,R=m.width()-z,B=m.width()-z,"single"===c.type?(C=k,C.attr("id","irs-active-slider"),X(t)):"double"===c.type&&(C=t<=e?x:_,C.attr("id","irs-active-slider"),X(t),K()),C.removeAttr("id"),C=null}}),a&&(L.on("touchend",function(){E&&(E=$=!1,C.removeAttr("id"),C=null,"double"===c.type&&K(),Z())}),L.on("touchmove",function(t){E&&(N=t.originalEvent.touches[0].pageX,X())})),V(),Q(),c.hasGrid&&et(),c.disable?(T.addClass("irs-disabled"),T.append('<span class="irs-disable-mask"></span>')):(T.removeClass("irs-disabled"),T.find(".irs-disable-mask").remove())},V=function(){O=m.width(),z=k?k.width():x.width(),H=O-z},G=function(t,e,i){V(),A=!1,C=e,C.attr("id","irs-active-slider"),e=C.offset().left,W=e+(t.pageX-e)-C.position().left,"single"===c.type?R=m.width()-z:"double"===c.type&&("from"===i?(U=0,B=parseInt(_.css("left"),10)):(U=parseInt(x.css("left"),10),B=m.width()-z))},K=function(){var e=x.width(),i=t.data(x[0],"x")||parseInt(x[0].style.left,10)||x.position().left,n=(t.data(_[0],"x")||parseInt(_[0].style.left,10)||_.position().left)-i;D[0].style.left=i+e/2+"px",D[0].style.width=n+"px"},X=function(e){var i=N-W,i=e||N-W;"single"===c.type?(0>i&&(i=0),i>R&&(i=R)):"double"===c.type&&(i<U&&(i=U),i>B&&(i=B),K()),t.data(C[0],"x",i),Z(),e=Math.round(i),C[0].style.left=e+"px"},Z=function(){var e,i={input:h,slider:T,min:c.min,max:c.max,fromNumber:0,toNumber:0,fromPers:0,toPers:0,fromX:0,fromX_pure:0,toX:0,toX_pure:0},n=c.max-c.min;"single"===c.type?(i.fromX=t.data(k[0],"x")||parseInt(k[0].style.left,10)||k.position().left,i.fromPers=i.fromX/H*100,e=n/100*i.fromPers+c.min,i.fromNumber=Math.round(e/c.step)*c.step,i.fromNumber<c.min&&(i.fromNumber=c.min),i.fromNumber>c.max&&(i.fromNumber=c.max),j&&(i.fromNumber=parseInt(i.fromNumber*j,10)/j),d&&(i.fromValue=c.values[i.fromNumber])):"double"===c.type&&(i.fromX=t.data(x[0],"x")||parseInt(x[0].style.left,10)||x.position().left,i.fromPers=i.fromX/H*100,e=n/100*i.fromPers+c.min,i.fromNumber=Math.round(e/c.step)*c.step,i.fromNumber<c.min&&(i.fromNumber=c.min),i.toX=t.data(_[0],"x")||parseInt(_[0].style.left,10)||_.position().left,i.toPers=i.toX/H*100,n=n/100*i.toPers+c.min,i.toNumber=Math.round(n/c.step)*c.step,i.toNumber>c.max&&(i.toNumber=c.max),j&&(i.fromNumber=parseInt(i.fromNumber*j,10)/j,i.toNumber=parseInt(i.toNumber*j,10)/j),d&&(i.fromValue=c.values[i.fromNumber],i.toValue=c.values[i.toNumber])),I=i,J()},Q=function(){var e={input:h,slider:T,min:c.min,max:c.max,fromNumber:c.from,toNumber:c.to,fromPers:0,toPers:0,fromX:0,fromX_pure:0,toX:0,toX_pure:0},i=c.max-c.min;"single"===c.type?(e.fromPers=0!==i?(e.fromNumber-c.min)/i*100:0,e.fromX_pure=H/100*e.fromPers,e.fromX=Math.round(e.fromX_pure),k[0].style.left=e.fromX+"px",t.data(k[0],"x",e.fromX_pure)):"double"===c.type&&(e.fromPers=0!==i?(e.fromNumber-c.min)/i*100:0,e.fromX_pure=H/100*e.fromPers,e.fromX=Math.round(e.fromX_pure),x[0].style.left=e.fromX+"px",t.data(x[0],"x",e.fromX_pure),e.toPers=0!==i?(e.toNumber-c.min)/i*100:1,e.toX_pure=H/100*e.toPers,e.toX=Math.round(e.toX_pure),_[0].style.left=e.toX+"px",t.data(_[0],"x",e.toX_pure),K()),I=e,J()},J=function(){var t,e,i,n,r,s;s=z/2,i="","single"===c.type?(i=I.fromNumber===c.max?c.maxPostfix:"",y[0].style.display="none",b[0].style.display="none",i=d?c.prefix+c.values[I.fromNumber]+i+c.postfix:c.prefix+p(I.fromNumber)+i+c.postfix,w.html(i),r=w.outerWidth(),s=I.fromX-r/2+s,0>s&&(s=0),s>O-r&&(s=O-r),w[0].style.left=s+"px",c.hideMinMax||c.hideFromTo||(g[0].style.display=s<F?"none":"block",v[0].style.display=s+r>O-P?"none":"block"),h.attr("value",parseFloat(I.fromNumber))):"double"===c.type&&(i=I.toNumber===c.max?c.maxPostfix:"",d?(t=c.prefix+c.values[I.fromNumber]+c.postfix,e=c.prefix+c.values[I.toNumber]+i+c.postfix,i=I.fromNumber!==I.toNumber?c.prefix+c.values[I.fromNumber]+" \u2014 "+c.prefix+c.values[I.toNumber]+i+c.postfix:c.prefix+c.values[I.fromNumber]+i+c.postfix):(t=c.prefix+p(I.fromNumber)+c.postfix,e=c.prefix+p(I.toNumber)+i+c.postfix,i=I.fromNumber!==I.toNumber?c.prefix+p(I.fromNumber)+" \u2014 "+c.prefix+p(I.toNumber)+i+c.postfix:c.prefix+p(I.fromNumber)+i+c.postfix),y.html(t),b.html(e),w.html(i),t=y.outerWidth(),e=I.fromX-t/2+s,0>e&&(e=0),e>O-t&&(e=O-t),y[0].style.left=e+"px",i=b.outerWidth(),n=I.toX-i/2+s,0>n&&(n=0),n>O-i&&(n=O-i),b[0].style.left=n+"px",r=w.outerWidth(),s=I.fromX+(I.toX-I.fromX)/2-r/2+s,0>s&&(s=0),s>O-r&&(s=O-r),w[0].style.left=s+"px",e+t<n?(w[0].style.display="none",y[0].style.display="block",b[0].style.display="block"):(w[0].style.display="block",y[0].style.display="none",b[0].style.display="none"),c.hideMinMax||c.hideFromTo||(g[0].style.display=s<F||e<F?"none":"block",v[0].style.display=s+r>O-P||n+i>O-P?"none":"block"),h.attr("value",parseFloat(I.fromNumber)+";"+parseFloat(I.toNumber))),tt()},tt=function(){"function"!=typeof c.onFinish||$||A||c.onFinish.call(this,I),"function"!=typeof c.onChange||A||c.onChange.call(this,I),"function"==typeof c.onLoad&&!$&&A&&(c.onLoad.call(this,I),A=!1)},et=function(){T.addClass("irs-with-grid");var t,e="",i=0,i=0,n="";for(t=0;20>=t;t+=1)i=Math.floor(O/20*t),i>=O&&(i=O-1),n+='<span class="irs-grid-pol small" style="left: '+i+'px;"></span>';for(t=0;4>=t;t+=1)i=Math.floor(O/4*t),i>=O&&(i=O-1),n+='<span class="irs-grid-pol" style="left: '+i+'px;"></span>',j?(e=c.min+(c.max-c.min)/4*t,e=e/c.step*c.step,e=parseInt(e*j,10)/j):(e=Math.round(c.min+(c.max-c.min)/4*t),e=Math.round(e/c.step)*c.step,e=p(e)),d&&(c.hideMinMax?(e=Math.round(c.min+(c.max-c.min)/4*t),e=Math.round(e/c.step)*c.step,e=0===t||4===t?c.values[e]:""):e=""),0===t?n+='<span class="irs-grid-text" style="left: '+i+'px; text-align: left;">'+e+"</span>":4===t?(i-=100,n+='<span class="irs-grid-text" style="left: '+i+'px; text-align: right;">'+e+"</span>"):(i-=50,n+='<span class="irs-grid-text" style="left: '+i+'px;">'+e+"</span>");S.html(n)};Y()}})},update:function(t){return this.each(function(){this.updateData(t)})},remove:function(){return this.each(function(){this.removeSlider()})}};t.fn.ionRangeSlider=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist for jQuery.ionRangeSlider"):c.init.apply(this,arguments)}}(jQuery,document,window,navigator),"undefined"==typeof jQuery)throw new Error("Jasny Bootstrap's JavaScript requires jQuery");+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}void 0===t.support.transition&&(t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one(t.support.transition.end,function(){i=!0});var r=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e()}))}(window.jQuery),function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.state=null,this.placement=null,this.options.recalc&&(this.calcClone(),t(window).on("resize",t.proxy(this.recalc,this))),this.options.autohide&&t(document).on("click",t.proxy(this.autohide,this)),this.options.toggle&&this.toggle(),this.options.disablescrolling&&(this.options.disableScrolling=this.options.disablescrolling,delete this.options.disablescrolling)};e.DEFAULTS={toggle:!0,placement:"auto",autohide:!0,recalc:!0,disableScrolling:!0},e.prototype.offset=function(){switch(this.placement){case"left":case"right":return this.$element.outerWidth();case"top":case"bottom":return this.$element.outerHeight()}},e.prototype.calcPlacement=function(){function e(t,e){return"auto"===r.css(e)?t:"auto"===r.css(t)?e:parseInt(r.css(t),10)>parseInt(r.css(e),10)?e:t}if("auto"!==this.options.placement)return void(this.placement=this.options.placement);this.$element.hasClass("in")||this.$element.css("visiblity","hidden !important").addClass("in");var i=t(window).width()/this.$element.width(),n=t(window).height()/this.$element.height(),r=this.$element;this.placement=i>=n?e("left","right"):e("top","bottom"),"hidden !important"===this.$element.css("visibility")&&this.$element.removeClass("in").css("visiblity","")},e.prototype.opposite=function(t){switch(t){case"top":return"bottom";case"left":return"right";case"bottom":return"top";case"right":return"left"}},e.prototype.getCanvasElements=function(){var e=this.options.canvas?t(this.options.canvas):this.$element,i=e.find("*").filter(function(){return"fixed"===t(this).css("position")}).not(this.options.exclude);return e.add(i)},e.prototype.slide=function(e,i,n){if(!t.support.transition){var r={};return r[this.placement]="+="+i,e.animate(r,350,n)}var s=this.placement,o=this.opposite(s);e.each(function(){"auto"!==t(this).css(s)&&t(this).css(s,(parseInt(t(this).css(s),10)||0)+i),"auto"!==t(this).css(o)&&t(this).css(o,(parseInt(t(this).css(o),10)||0)-i)}),this.$element.one(t.support.transition.end,n).emulateTransitionEnd(350)},e.prototype.disableScrolling=function(){var e=t("body").width(),i="padding-"+this.opposite(this.placement);if(void 0===t("body").data("offcanvas-style")&&t("body").data("offcanvas-style",t("body").attr("style")),t("body").css("overflow","hidden"),t("body").width()>e){var n=parseInt(t("body").css(i),10)+t("body").width()-e;setTimeout(function(){t("body").css(i,n)},1)}},e.prototype.show=function(){if(!this.state){var e=t.Event("show.bs.offcanvas");if(this.$element.trigger(e),!e.isDefaultPrevented()){this.state="slide-in",this.calcPlacement();var i=this.getCanvasElements(),n=this.placement,r=this.opposite(n),s=this.offset();-1!==i.index(this.$element)&&(t(this.$element).data("offcanvas-style",t(this.$element).attr("style")||""),this.$element.css(n,-1*s),this.$element.css(n)),i.addClass("canvas-sliding").each(function(){void 0===t(this).data("offcanvas-style")&&t(this).data("offcanvas-style",t(this).attr("style")||""),"static"===t(this).css("position")&&t(this).css("position","relative"),"auto"!==t(this).css(n)&&"0px"!==t(this).css(n)||"auto"!==t(this).css(r)&&"0px"!==t(this).css(r)||t(this).css(n,0)}),this.options.disableScrolling&&this.disableScrolling();var o=function(){"slide-in"==this.state&&(this.state="slid",i.removeClass("canvas-sliding").addClass("canvas-slid"),this.$element.trigger("shown.bs.offcanvas"))};setTimeout(t.proxy(function(){this.$element.addClass("in"),this.slide(i,s,t.proxy(o,this))},this),1)}}},e.prototype.hide=function(){if("slid"===this.state){var e=t.Event("hide.bs.offcanvas");if(this.$element.trigger(e),!e.isDefaultPrevented()){this.state="slide-out";var i=t(".canvas-slid"),n=(this.placement,-1*this.offset()),r=function(){"slide-out"==this.state&&(this.state=null,this.placement=null,this.$element.removeClass("in"),i.removeClass("canvas-sliding"),i.add(this.$element).add("body").each(function(){t(this).attr("style",t(this).data("offcanvas-style")).removeData("offcanvas-style")}),this.$element.trigger("hidden.bs.offcanvas"))};i.removeClass("canvas-slid").addClass("canvas-sliding"),setTimeout(t.proxy(function(){this.slide(i,n,t.proxy(r,this))},this),1)}}},e.prototype.toggle=function(){"slide-in"!==this.state&&"slide-out"!==this.state&&this["slid"===this.state?"hide":"show"]()},e.prototype.calcClone=function(){this.$calcClone=this.$element.clone().html("").addClass("offcanvas-clone").removeClass("in").appendTo(t("body"))},e.prototype.recalc=function(){if("none"!==this.$calcClone.css("display")&&("slid"===this.state||"slide-in"===this.state)){this.state=null,this.placement=null;var e=this.getCanvasElements();this.$element.removeClass("in"),e.removeClass("canvas-slid"),e.add(this.$element).add("body").each(function(){t(this).attr("style",t(this).data("offcanvas-style")).removeData("offcanvas-style")})}},e.prototype.autohide=function(e){0===t(e.target).closest(this.$element).length&&this.hide()};var i=t.fn.offcanvas;t.fn.offcanvas=function(i){return this.each(function(){var n=t(this),r=n.data("bs.offcanvas"),s=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i);r||n.data("bs.offcanvas",r=new e(this,s)),"string"==typeof i&&r[i]()})},t.fn.offcanvas.Constructor=e,t.fn.offcanvas.noConflict=function(){return t.fn.offcanvas=i,this},t(document).on("click.bs.offcanvas.data-api","[data-toggle=offcanvas]",function(e){var i,n=t(this),r=n.attr("data-target")||e.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),s=t(r),o=s.data("bs.offcanvas"),a=o?"toggle":n.data();e.stopPropagation(),o?o.toggle():s.offcanvas(a)})}(window.jQuery),function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.$element.on("click.bs.rowlink","td:not(.rowlink-skip)",t.proxy(this.click,this))};e.DEFAULTS={target:"a"},e.prototype.click=function(e){var i=t(e.currentTarget).closest("tr").find(this.options.target)[0];if(t(e.target)[0]!==i)if(e.preventDefault(),i.click)i.click();else if(document.createEvent){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(n)}};var i=t.fn.rowlink;t.fn.rowlink=function(i){return this.each(function(){var n=t(this),r=n.data("rowlink");r||n.data("rowlink",r=new e(this,i))})},t.fn.rowlink.Constructor=e,t.fn.rowlink.noConflict=function(){return t.fn.rowlink=i,this},t(document).on("click.bs.rowlink.data-api",'[data-link="row"]',function(e){if(0===t(e.target).closest(".rowlink-skip").length){var i=t(this);i.data("rowlink")||(i.rowlink(i.data()),t(e.target).trigger("click.bs.rowlink"))}})}(window.jQuery),function(t){"use strict";var e=void 0!==window.orientation,i=navigator.userAgent.toLowerCase().indexOf("android")>-1,n="Microsoft Internet Explorer"==window.navigator.appName,r=function(e,n){i||(this.$element=t(e),this.options=t.extend({},r.DEFAULTS,n),this.mask=String(this.options.mask),this.init(),this.listen(),this.checkVal())};r.DEFAULTS={mask:"",placeholder:"_",definitions:{9:"[0-9]",a:"[A-Za-z]","?":"[A-Za-z0-9]","*":"."}},r.prototype.init=function(){var e=this.options.definitions,i=this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,t.each(this.mask.split(""),t.proxy(function(t,n){"?"==n?(i--,this.partialPosition=t):e[n]?(this.tests.push(new RegExp(e[n])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=t.map(this.mask.split(""),t.proxy(function(t){return"?"!=t?e[t]?this.options.placeholder:t:void 0},this)),this.focusText=this.$element.val(),this.$element.data("rawMaskFn",t.proxy(function(){return t.map(this.buffer,function(t,e){return this.tests[e]&&t!=this.options.placeholder?t:null}).join("")},this))},r.prototype.listen=function(){if(!this.$element.attr("readonly")){var e=(n?"paste":"input")+".mask";this.$element.on("unmask.bs.inputmask",t.proxy(this.unmask,this)).on("focus.bs.inputmask",t.proxy(this.focusEvent,this)).on("blur.bs.inputmask",t.proxy(this.blurEvent,this)).on("keydown.bs.inputmask",t.proxy(this.keydownEvent,this)).on("keypress.bs.inputmask",t.proxy(this.keypressEvent,this)).on(e,t.proxy(this.pasteEvent,this))}},r.prototype.caret=function(t,e){if(0!==this.$element.length){if("number"==typeof t)return e="number"==typeof e?e:t,this.$element.each(function(){if(this.setSelectionRange)this.setSelectionRange(t,e);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select()}});if(this.$element[0].setSelectionRange)t=this.$element[0].selectionStart,e=this.$element[0].selectionEnd;else if(document.selection&&document.selection.createRange){var i=document.selection.createRange();t=0-i.duplicate().moveStart("character",-1e5),e=t+i.text.length}return{begin:t,end:e}}},r.prototype.seekNext=function(t){for(var e=this.mask.length;++t<=e&&!this.tests[t];);return t},r.prototype.seekPrev=function(t){for(;--t>=0&&!this.tests[t];);return t},r.prototype.shiftL=function(t,e){var i=this.mask.length;if(!(0>t)){for(var n=t,r=this.seekNext(e);i>n;n++)if(this.tests[n]){if(!(i>r&&this.tests[n].test(this.buffer[r])))break;this.buffer[n]=this.buffer[r],this.buffer[r]=this.options.placeholder,r=this.seekNext(r)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,t))}},r.prototype.shiftR=function(t){for(var e=this.mask.length,i=t,n=this.options.placeholder;e>i;i++)if(this.tests[i]){var r=this.seekNext(i),s=this.buffer[i];if(this.buffer[i]=n,!(e>r&&this.tests[r].test(s)))break;n=s}},r.prototype.unmask=function(){this.$element.unbind(".mask").removeData("inputmask")},r.prototype.focusEvent=function(){this.focusText=this.$element.val();var t=this.mask.length,e=this.checkVal();this.writeBuffer();var i=this,n=function(){e==t?i.caret(0,e):i.caret(e)};n(),setTimeout(n,50)},r.prototype.blurEvent=function(){this.checkVal(),this.$element.val()!==this.focusText&&this.$element.trigger("change")},r.prototype.keydownEvent=function(t){var i=t.which;if(8==i||46==i||e&&127==i){var n=this.caret(),r=n.begin,s=n.end;return s-r==0&&(r=46!=i?this.seekPrev(r):s=this.seekNext(r-1),s=46==i?this.seekNext(s):s),this.clearBuffer(r,s),this.shiftL(r,s-1),!1}return 27==i?(this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1):void 0},r.prototype.keypressEvent=function(t){var e=this.mask.length,i=t.which,n=this.caret();if(t.ctrlKey||t.altKey||t.metaKey||32>i)return!0;if(i){n.end-n.begin!=0&&(this.clearBuffer(n.begin,n.end),this.shiftL(n.begin,n.end-1));var r=this.seekNext(n.begin-1);if(e>r){var s=String.fromCharCode(i);if(this.tests[r].test(s)){this.shiftR(r),this.buffer[r]=s,this.writeBuffer();var o=this.seekNext(r);this.caret(o)}}return!1}},r.prototype.pasteEvent=function(){var t=this;setTimeout(function(){t.caret(t.checkVal(!0))},0)},r.prototype.clearBuffer=function(t,e){for(var i=this.mask.length,n=t;e>n&&i>n;n++)this.tests[n]&&(this.buffer[n]=this.options.placeholder)},r.prototype.writeBuffer=function(){return this.$element.val(this.buffer.join("")).val()},r.prototype.checkVal=function(t){for(var e=this.mask.length,i=this.$element.val(),n=-1,r=0,s=0;e>r;r++)if(this.tests[r]){for(this.buffer[r]=this.options.placeholder;s++<i.length;){var o=i.charAt(s-1);if(this.tests[r].test(o)){this.buffer[r]=o,n=r;break}}if(s>i.length)break}else this.buffer[r]==i.charAt(s)&&r!=this.partialPosition&&(s++,n=r);return!t&&n+1<this.partialPosition?(this.$element.val(""),this.clearBuffer(0,e)):(t||n+1>=this.partialPosition)&&(this.writeBuffer(),t||this.$element.val(this.$element.val().substring(0,n+1))),this.partialPosition?r:this.firstNonMaskPos};var s=t.fn.inputmask;t.fn.inputmask=function(e){return this.each(function(){var i=t(this),n=i.data("inputmask");n||i.data("inputmask",n=new r(this,e))})},t.fn.inputmask.Constructor=r,t.fn.inputmask.noConflict=function(){return t.fn.inputmask=s,this},t(document).on("focus.bs.inputmask.data-api","[data-mask]",function(){var e=t(this);e.data("inputmask")||e.inputmask(e.data())})}(window.jQuery),function(t){"use strict";var e="Microsoft Internet Explorer"==window.navigator.appName,i=function(e,i){if(this.$element=t(e),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||i.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=t('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview");var n=this.$preview.css("height");"inline"!==this.$preview.css("display")&&"0px"!==n&&"none"!==n&&this.$preview.css("line-height",n),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen()}};i.prototype.listen=function(){this.$input.on("change.bs.fileinput",t.proxy(this.change,this)),t(this.$input[0].form).on("reset.bs.fileinput",t.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",t.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",t.proxy(this.clear,this))},i.prototype.change=function(e){var i=void 0===e.target.files?e.target&&e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:e.target.files;if(e.stopPropagation(),0===i.length)return void this.clear();this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var n=i[0];if(this.$preview.length>0&&("undefined"!=typeof n.type?n.type.match(/^image\/(gif|png|jpeg)$/):n.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var r=new FileReader,s=this.$preview,o=this.$element;r.onload=function(e){var r=t("<img>");r[0].src=e.target.result,i[0].result=e.target.result,o.find(".fileinput-filename").text(n.name),"none"!=s.css("max-height")&&r.css("max-height",parseInt(s.css("max-height"),10)-parseInt(s.css("padding-top"),10)-parseInt(s.css("padding-bottom"),10)-parseInt(s.css("border-top"),10)-parseInt(s.css("border-bottom"),10)),s.html(r),o.addClass("fileinput-exists").removeClass("fileinput-new"),o.trigger("change.bs.fileinput",i)},r.readAsDataURL(n)}else this.$element.find(".fileinput-filename").text(n.name),this.$preview.text(n.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")},i.prototype.clear=function(t){if(t&&t.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),e){var i=this.$input.clone(!0);this.$input.after(i),this.$input.remove(),this.$input=i}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),void 0!==t&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},i.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},i.prototype.trigger=function(t){this.$input.trigger("click"),t.preventDefault()};var n=t.fn.fileinput;t.fn.fileinput=function(e){return this.each(function(){var n=t(this),r=n.data("fileinput");r||n.data("fileinput",r=new i(this,e)),"string"==typeof e&&r[e]()})},t.fn.fileinput.Constructor=i,t.fn.fileinput.noConflict=function(){return t.fn.fileinput=n,this},t(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(e){var i=t(this);if(!i.data("fileinput")){i.fileinput(i.data());var n=t(e.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]');n.length>0&&(e.preventDefault(),n.trigger("click.bs.fileinput"))}})}(window.jQuery),function(t){"use strict";var e={},i=Math.max,n=Math.min;e.c={},e.c.d=t(document),e.c.t=function(t){return t.originalEvent.touches.length-1},e.o=function(){var i=this;this.o=null,this.$=null,this.i=null,this.g=null,this.v=null,this.cv=null,this.x=0,this.y=0,this.w=0,this.h=0,this.$c=null,this.c=null,this.t=0,this.isInit=!1,this.fgColor=null,this.pColor=null,this.dH=null,this.cH=null,this.eH=null,this.rH=null,this.scale=1,this.relative=!1,this.relativeWidth=!1,this.relativeHeight=!1,this.$div=null,this.run=function(){var e=function(t,e){var n;for(n in e)i.o[n]=e[n];i._carve().init(),i._configure()._draw()};if(!this.$.data("kontroled")){if(this.$.data("kontroled",!0),this.extend(),this.o=t.extend({min:this.$.data("min")!==undefined?this.$.data("min"):0,max:this.$.data("max")!==undefined?this.$.data("max"):100,stopper:!0,readOnly:this.$.data("readonly")||"readonly"===this.$.attr("readonly"),cursor:!0===this.$.data("cursor")&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")&&Math.max(Math.min(this.$.data("thickness"),1),.01)||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:null==this.$.data("displayinput")||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor"),font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:!1,step:this.$.data("step")||1,rotation:this.$.data("rotation"),draw:null,change:null,cancel:null,release:null,format:function(t){return t},parse:function(t){return parseFloat(t)}},this.o),this.o.flip="anticlockwise"===this.o.rotation||"acw"===this.o.rotation,this.o.inputColor||(this.o.inputColor=this.o.fgColor),this.$.is("fieldset")?(this.v={},this.i=this.$.find("input"),this.i.each(function(e){var n=t(this);i.i[e]=n,i.v[e]=i.o.parse(n.val()),n.bind("change blur",function(){var t={};t[e]=n.val(),i.val(t)})}),this.$.find("legend").remove()):(this.i=this.$,this.v=this.o.parse(this.$.val()),""===this.v&&(this.v=this.o.min),this.$.bind("change blur",function(){i.val(i._validate(i.o.parse(i.$.val())))})),!this.o.displayInput&&this.$.hide(),this.$c=t(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height}),this.$div=t('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"></div>'),this.$.wrap(this.$div).before(this.$c),this.$div=this.$.parent(),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.$c[0]),this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null,!this.c)throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}};return this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1),this.relativeWidth=this.o.width%1!=0&&this.o.width.indexOf("%"),this.relativeHeight=this.o.height%1!=0&&this.o.height.indexOf("%"),this.relative=this.relativeWidth||this.relativeHeight,this._carve(),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind("configure",e).parent().bind("configure",e),this._listen()._configure()._xy().init(),this.isInit=!0,this.$.val(this.o.format(this.v)),this._draw(),this}},this._carve=function(){if(this.relative){var t=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),e=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(t,e)}else this.w=this.o.width,this.h=this.o.height;return this.$div.css({width:this.w+"px",height:this.h+"px"}),this.$c.attr({width:this.w,height:this.h}),1!==this.scale&&(this.$c[0].width=this.$c[0].width*this.scale,this.$c[0].height=this.$c[0].height*this.scale,this.$c.width(this.w),this.$c.height(this.h)),this},this._draw=function(){var t=!0;i.g=i.c,i.clear(),i.dH&&(t=i.dH()),!1!==t&&i.draw()},this._touch=function(t){var n=function(t){var e=i.xy2val(t.originalEvent.touches[i.t].pageX,t.originalEvent.touches[i.t].pageY);e!=i.cv&&(i.cH&&!1===i.cH(e)||(i.change(i._validate(e)),i._draw()))};return this.t=e.c.t(t),n(t),e.c.d.bind("touchmove.k",n).bind("touchend.k",function(){e.c.d.unbind("touchmove.k touchend.k"),i.val(i.cv)}),this},this._mouse=function(t){var n=function(t){var e=i.xy2val(t.pageX,t.pageY);e!=i.cv&&(i.cH&&!1===i.cH(e)||(i.change(i._validate(e)),i._draw()))};return n(t),e.c.d.bind("mousemove.k",n).bind("keyup.k",function(t){if(27===t.keyCode){if(e.c.d.unbind("mouseup.k mousemove.k keyup.k"),i.eH&&!1===i.eH())return;i.cancel()}}).bind("mouseup.k",function(){e.c.d.unbind("mousemove.k mouseup.k keyup.k"),i.val(i.cv)}),this},this._xy=function(){var t=this.$c.offset();return this.x=t.left,this.y=t.top,this},this._listen=function(){return this.o.readOnly?this.$.attr("readonly","readonly"):(this.$c.bind("mousedown",function(t){
t.preventDefault(),i._xy()._mouse(t)}).bind("touchstart",function(t){t.preventDefault(),i._xy()._touch(t)}),this.listen()),this.relative&&t(window).resize(function(){i._carve().init(),i._draw()}),this},this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,"0.4"),this.fgColor=this.h2rgba(this.o.fgColor,"0.6")):this.fgColor=this.o.fgColor,this},this._clear=function(){this.$c[0].width=this.$c[0].width},this._validate=function(t){return~~((t<0?-.5:.5)+t/this.o.step)*this.o.step},this.listen=function(){},this.extend=function(){},this.init=function(){},this.change=function(){},this.val=function(){},this.xy2val=function(){},this.draw=function(){},this.clear=function(){this._clear()},this.h2rgba=function(t,e){var i;return t=t.substring(1,7),i=[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)],"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"},this.copy=function(t,e){for(var i in t)e[i]=t[i]}},e.Dial=function(){e.o.call(this),this.startAngle=null,this.xy=null,this.radius=null,this.lineWidth=null,this.cursorExt=null,this.w2=null,this.PI2=2*Math.PI,this.extend=function(){this.o=t.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:!0},this.o)},this.val=function(t,e){if(null==t)return this.v;t=this.o.parse(t),!1!==e&&t!=this.v&&this.rH&&!1===this.rH(t)||(this.cv=this.o.stopper?i(n(t,this.o.max),this.o.min):t,this.v=this.cv,this.$.val(this.o.format(this.v)),this._draw())},this.xy2val=function(t,e){var r,s;return r=Math.atan2(t-(this.x+this.w2),-(e-this.y-this.w2))-this.angleOffset,this.o.flip&&(r=this.angleArc-r-this.PI2),this.angleArc!=this.PI2&&r<0&&r>-.5?r=0:r<0&&(r+=this.PI2),s=~~(.5+r*(this.o.max-this.o.min)/this.angleArc)+this.o.min,this.o.stopper&&(s=i(n(s,this.o.max),this.o.min)),s},this.listen=function(){var e,r,s,o,a=this,l=function(t){t.preventDefault();var s=t.originalEvent,o=s.detail||s.wheelDeltaX,l=s.detail||s.wheelDeltaY,c=a._validate(a.o.parse(a.$.val()))+(o>0||l>0?a.o.step:o<0||l<0?-a.o.step:0);c=i(n(c,a.o.max),a.o.min),a.val(c,!1),a.rH&&(clearTimeout(e),e=setTimeout(function(){a.rH(c),e=null},100),r||(r=setTimeout(function(){e&&a.rH(c),r=null},200)))},c=1,h={37:-a.o.step,38:a.o.step,39:a.o.step,40:-a.o.step};this.$.bind("keydown",function(e){var r=e.keyCode;if(r>=96&&r<=105&&(r=e.keyCode=r-48),s=parseInt(String.fromCharCode(r)),isNaN(s)&&(13!==r&&8!==r&&9!==r&&189!==r&&(190!==r||a.$.val().match(/\./))&&e.preventDefault(),t.inArray(r,[37,38,39,40])>-1)){e.preventDefault();var l=a.o.parse(a.$.val())+h[r]*c;a.o.stopper&&(l=i(n(l,a.o.max),a.o.min)),a.change(l),a._draw(),o=window.setTimeout(function(){c*=2},30)}}).bind("keyup",function(){isNaN(s)?o&&(window.clearTimeout(o),o=null,c=1,a.val(a.$.val())):a.$.val()>a.o.max&&a.$.val(a.o.max)||a.$.val()<a.o.min&&a.$.val(a.o.min)}),this.$c.bind("mousewheel DOMMouseScroll",l),this.$.bind("mousewheel DOMMouseScroll",l)},this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min),this.$.val(this.v),this.w2=this.w/2,this.cursorExt=this.o.cursor/100,this.xy=this.w2*this.scale,this.lineWidth=this.xy*this.o.thickness,this.lineCap=this.o.lineCap,this.radius=this.xy-this.lineWidth/2,this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset),this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc),this.angleOffset=this.o.angleOffset*Math.PI/180,this.angleArc=this.o.angleArc*Math.PI/180,this.startAngle=1.5*Math.PI+this.angleOffset,this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var t=i(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(3*this.w/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/t>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})},this.change=function(t){this.cv=t,this.$.val(this.o.format(t))},this.angle=function(t){return(t-this.o.min)*this.angleArc/(this.o.max-this.o.min)},this.arc=function(t){var e,i;return t=this.angle(t),this.o.flip?(e=this.endAngle+1e-5,i=e-t-1e-5):(e=this.startAngle-1e-5,i=e+t+1e-5),this.o.cursor&&(e=i-this.cursorExt)&&(i+=this.cursorExt),{s:e,e:i,d:this.o.flip&&!this.o.cursor}},this.draw=function(){var t,e=this.g,i=this.arc(this.cv),n=1;e.lineWidth=this.lineWidth,e.lineCap=this.lineCap,e.beginPath(),e.strokeStyle=this.o.bgColor,e.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),e.stroke(),this.o.displayPrevious&&(t=this.arc(this.v),e.beginPath(),e.strokeStyle=this.pColor,e.arc(this.xy,this.xy,this.radius,t.s,t.e,t.d),e.stroke(),n=this.cv==this.v),e.beginPath(),e.strokeStyle=n?this.o.fgColor:this.fgColor,e.arc(this.xy,this.xy,this.radius,i.s,i.e,i.d),e.stroke()},this.cancel=function(){this.val(this.v)}},t.fn.dial=t.fn.knob=function(i){return this.each(function(){var n=new e.Dial;n.o=i,n.$=t(this),n.run()}).parent()}}(jQuery),function(t){function e(e,i){var s=!1;return t.each(e?r:n,function(e){if(t(i).hasClass(e))return s=e,!1}),s}var i=t.fn.val,n={},r={},s={};t.classVal=function(t,e,i,o){"string"==typeof t&&"boolean"==typeof o&&(e&&(n[t]=e),i&&(r[t]=i),s[t]=o)},t.fn.val=function(){var o,a,l=Array.prototype.slice.call(arguments,0);return l.length?this.each(function(){(o=e(!0,this))?(a=s[o]?t(this):this,a[r[o]].apply(this,l)):i.apply(t(this),l)}):(o=e(!1,this))?(a=s[o]?this:this[0],a[n[o]].apply(a)):i.apply(this)}}(window.jQuery||window.Zepto),function(t){function e(t,e,i){if((t[e]||t[i])&&t[e]===t[i])throw Error("(Link) '"+e+"' can't match '"+i+"'.'")}function i(i){if(void 0===i&&(i={}),"object"!=typeof i)throw Error("(Format) 'format' option must be an object.");var n={};t(r).each(function(t,e){if(void 0===i[e])n[e]=s[t];else{if(typeof i[e]!=typeof s[t])throw Error("(Format) 'format."+e+"' must be a "+typeof s[t]+".");if("decimals"===e&&(0>i[e]||7<i[e]))throw Error("(Format) 'format.decimals' option must be between 0 and 7.");n[e]=i[e]}}),e(n,"mark","thousand"),e(n,"prefix","negative"),e(n,"prefix","negativeBefore"),this.r=n}function n(e,i){return"object"!=typeof e&&t.error("(Link) Initialize with an object."),new n.prototype.p(e.target||function(){},e.method,e.format||{},i)}var r="decimals mark thousand prefix postfix encoder decoder negative negativeBefore to from".split(" "),s=[2,".","","","",function(t){return t},function(t){return t},"-","",function(t){return t},function(t){return t}];i.prototype.a=function(t){return this.r[t]},i.prototype.L=function(t){function e(t){return t.split("").reverse().join("")}t=this.a("encoder")(t);var i=this.a("decimals"),n="",r="",s="",o="";return 0===parseFloat(t.toFixed(i))&&(t="0"),0>t&&(n=this.a("negative"),r=this.a("negativeBefore")),t=Math.abs(t).toFixed(i).toString(),t=t.split("."),this.a("thousand")?(s=e(t[0]).match(/.{1,3}/g),s=e(s.join(e(this.a("thousand"))))):s=t[0],this.a("mark")&&1<t.length&&(o=this.a("mark")+t[1]),this.a("to")(r+this.a("prefix")+n+s+o+this.a("postfix"))},i.prototype.w=function(t){function e(t){return t.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var i;return null!==t&&void 0!==t&&(t=this.a("from")(t),t=t.toString(),i=t.replace(RegExp("^"+e(this.a("negativeBefore"))),""),t!==i?(t=i,i="-"):i="",t=t.replace(RegExp("^"+e(this.a("prefix"))),""),this.a("negative")&&(i="",t=t.replace(RegExp("^"+e(this.a("negative"))),"-")),t=t.replace(RegExp(e(this.a("postfix"))+"$"),"").replace(RegExp(e(this.a("thousand")),"g"),"").replace(this.a("mark"),"."),t=this.a("decoder")(parseFloat(i+t)),!isNaN(t)&&t)},n.prototype.K=function(e,i){this.method=i||"html",this.j=t(e.replace("-tooltip-","")||"<div/>")[0]},n.prototype.H=function(t){this.method="val",this.j=document.createElement("input"),this.j.name=t,this.j.type="hidden"},n.prototype.G=function(e){function i(t,e){return[e?null:t,e?t:null]}var n=this;this.method="val",this.target=e.on("change",function(e){n.B.val(i(t(e.target).val(),n.t),{link:n,set:!0})})},n.prototype.p=function(e,i,n,r){if(this.g=n,this.update=!r,"string"==typeof e&&0===e.indexOf("-tooltip-"))this.K(e,i);else if("string"==typeof e&&0!==e.indexOf("-"))this.H(e);else{if("function"!=typeof e){if(e instanceof t||t.zepto&&t.zepto.isZ(e)){if(!i){if(e.is("input, select, textarea"))return void this.G(e);i="html"}if("function"==typeof i||"string"==typeof i&&e[i])return this.method=i,void(this.target=e)}throw new RangeError("(Link) Invalid Link.")}this.target=!1,this.method=e}},n.prototype.write=function(t,e,i,n){this.update&&!1===n||(this.u=t,this.F=t=this.format(t),"function"==typeof this.method?this.method.call(this.target[0]||i[0],t,e,i):this.target[this.method](t,e,i))},n.prototype.q=function(e){this.g=new i(t.extend({},e,this.g instanceof i?this.g.r:this.g))},n.prototype.J=function(t){this.B=t},n.prototype.I=function(t){this.t=t},n.prototype.format=function(t){return this.g.L(t)},n.prototype.A=function(t){return this.g.w(t)},n.prototype.p.prototype=n.prototype,t.Link=n}(window.jQuery||window.Zepto),function(t){function e(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function i(e){return t.isArray(e)?e:[e]}function n(t,e){t.addClass(e),setTimeout(function(){t.removeClass(e)},300)}function r(t,e){return 100*e/(t[1]-t[0])}function s(t,e){if(e>=t.d.slice(-1)[0])return 100;for(var i,n,s,o=1;e>=t.d[o];)o++;return i=t.d[o-1],n=t.d[o],s=t.c[o-1],i=[i,n],s+r(i,0>i[0]?e+Math.abs(i[0]):e-i[0])/(100/(t.c[o]-s))}function o(t,e){if(100<=e)return t.d.slice(-1)[0];for(var i,n,r,s=1;e>=t.c[s];)s++;return i=t.d[s-1],n=t.d[s],r=t.c[s-1],i=[i,n],100/(t.c[s]-r)*(e-r)*(i[1]-i[0])/100+i[0]}function a(t,e){for(var i,n=1;e>=t.c[n];)n++;return t.m?(i=t.c[n-1],n=t.c[n],e-i>(n-i)/2?n:i):(t.h[n-1]?(i=t.h[n-1],n=t.c[n-1]+Math.round((e-t.c[n-1])/i)*i):n=e,n)}function l(t,i){if(!e(i))throw Error("noUiSlider: 'step' is not numeric.");t.h[0]=i}function c(i,n){if("object"!=typeof n||t.isArray(n))throw Error("noUiSlider: 'range' is not an object.");t.each(n,function(n,r){var s;if("number"==typeof r&&(r=[r]),!t.isArray(r))throw Error("noUiSlider: 'range' contains invalid value.");if(s="min"===n?0:"max"===n?100:parseFloat(n),!e(s)||!e(r[0]))throw Error("noUiSlider: 'range' value isn't numeric.");i.c.push(s),i.d.push(r[0]),s?i.h.push(!isNaN(r[1])&&r[1]):isNaN(r[1])||(i.h[0]=r[1])}),t.each(i.h,function(t,e){if(!e)return!0;i.h[t]=r([i.d[t],i.d[t+1]],e)/(100/(i.c[t+1]-i.c[t]))})}function h(e,i){if("number"==typeof i&&(i=[i]),!t.isArray(i)||!i.length||2<i.length)throw Error("noUiSlider: 'start' option is incorrect.");e.b=i.length,e.start=i}function u(t,e){if(t.m=e,"boolean"!=typeof e)throw Error("noUiSlider: 'snap' option must be a boolean.")}function d(t,e){if("lower"===e&&1===t.b)t.i=1;else if("upper"===e&&1===t.b)t.i=2;else if(!0===e&&2===t.b)t.i=3;else{if(!1!==e)throw Error("noUiSlider: 'connect' option doesn't match handle count.");t.i=0}}function f(t,e){switch(e){case"horizontal":t.k=0;break;case"vertical":t.k=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.")}}function p(t,i){if(2<t.c.length)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.");if(t.margin=r(t.d,i),!e(i))throw Error("noUiSlider: 'margin' option must be numeric.")}function m(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1,t.i=[0,2,1,3][t.i];break;default:throw Error("noUiSlider: 'direction' option was not recognized.")}}function g(t,e){if("string"!=typeof e)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var i=0<=e.indexOf("snap");t.n={s:0<=e.indexOf("tap")||i,extend:0<=e.indexOf("extend"),v:0<=e.indexOf("drag"),fixed:0<=e.indexOf("fixed"),m:i}}function v(e,i,n){e.o=[i.lower,i.upper],e.g=i.format,t.each(e.o,function(e,r){if(!t.isArray(r))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' must be an array.");t.each(r,function(){if(!(this instanceof t.Link))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' can only contain Link instances.");this.I(e),this.J(n),this.q(i.format)})}),e.dir&&1<e.b&&e.o.reverse()}function y(e,i){var n,r={c:[],d:[],h:[!1],margin:0};return n={step:{e:!1,f:l},range:{e:!0,f:c},start:{e:!0,f:h},snap:{e:!1,f:u},connect:{e:!0,f:d},orientation:{e:!1,f:f},margin:{e:!1,f:p},direction:{e:!0,f:m},behaviour:{e:!0,f:g},serialization:{e:!0,f:v}},e=t.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},e),e.serialization=t.extend({lower:[],upper:[],format:{}},e.serialization),t.each(n,function(t,n){if(void 0===e[t]){if(n.e)throw Error("noUiSlider: '"+t+"' is required.");return!0}n.f(r,e[t],i)}),r.style=r.k?"top":"left",r}function b(e,i){var n=t("<div><div/></div>").addClass(E[2]),r=["-lower","-upper"];return e.dir&&r.reverse(),n.children().addClass(E[3]+" "+E[3]+r[i]),n}function w(e,i){return i.j&&(i=new t.Link({target:t(i.j).clone().appendTo(e),method:i.method,format:i.g},!0)),i}function k(e,i){var n,r=[];for(n=0;n<e.b;n++){var s=r,o=n,a=e.o[n],l=i[n].children(),c=e.g,h=void 0,u=[],h=new t.Link({},!0);for(h.q(c),u.push(h),h=0;h<a.length;h++)u.push(w(l,a[h]));s[o]=u}return r}function x(t,e,i){switch(t){case 1:e.addClass(E[7]),i[0].addClass(E[6]);break;case 3:i[1].addClass(E[6]);case 2:i[0].addClass(E[7]);case 0:e.addClass(E[6])}}function _(t,e){var i,n=[];for(i=0;i<t.b;i++)n.push(b(t,i).appendTo(e));return n}function C(e,i){return i.addClass([E[0],E[8+e.dir],E[4+e.k]].join(" ")),t("<div/>").appendTo(i).addClass(E[1])}function D(e,r,l){function c(){return b[["width","height"][r.k]]()}function h(t){var e,i=[S.val()];for(e=0;e<t.length;e++)S.trigger(t[e],i)}function u(e,i,n){var s=e[0]!==D[0][0]?1:0,l=T[0]+r.margin,c=T[1]-r.margin;return n&&1<D.length&&(i=s?Math.max(i,l):Math.min(i,c)),100>i&&(i=a(r,i)),(i=Math.max(Math.min(parseFloat(i.toFixed(7)),100),0))===T[s]?1!==D.length&&((i===l||i===c)&&0):(e.css(r.style,i+"%"),e.is(":first-child")&&e.toggleClass(E[17],50<i),T[s]=i,r.dir&&(i=100-i),t(w[s]).each(function(){this.write(o(r,i),e.children(),S)}),!0)}function d(t,e,i){i||n(S,E[14]),u(t,e,!1),h(["slide","set","change"])}function f(t,e,i,n){t=t.replace(/\s/g,".nui ")+".nui",e.on(t,function(t){var e=S.attr("disabled");if(S.hasClass(E[14])||void 0!==e&&null!==e)return!1;t.preventDefault();var s,o,e=0===t.type.indexOf("touch"),a=0===t.type.indexOf("mouse"),l=0===t.type.indexOf("pointer"),c=t;0===t.type.indexOf("MSPointer")&&(l=!0),t.originalEvent&&(t=t.originalEvent),e&&(s=t.changedTouches[0].pageX,o=t.changedTouches[0].pageY),(a||l)&&(l||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),s=t.clientX+window.pageXOffset,o=t.clientY+window.pageYOffset),c.C=[s,o],c.cursor=a,t=c,t.l=t.C[r.k],i(t,n)})}function p(t,e){var i,n=e.b||D,r=!1,r=100*(t.l-e.start)/c(),s=n[0][0]!==D[0][0]?1:0,o=e.D;i=r+o[0],r+=o[1],1<n.length?(0>i&&(r+=Math.abs(i)),100<r&&(i-=r-100),i=[Math.max(Math.min(i,100),0),Math.max(Math.min(r,100),0)]):i=[i,r],r=u(n[0],i[s],1===n.length),1<n.length&&(r=u(n[1],i[s?0:1],!1)||r),r&&h(["slide"])}function m(e){t("."+E[15]).removeClass(E[15]),e.cursor&&t("body").css("cursor","").off(".nui"),M.off(".nui"),S.removeClass(E[12]),h(["set","change"])}function g(e,i){1===i.b.length&&i.b[0].children().addClass(E[15]),e.stopPropagation(),f(L.move,M,p,{start:e.l,b:i.b,D:[T[0],T[D.length-1]]}),f(L.end,M,m,null),e.cursor&&(t("body").css("cursor",t(e.target).css("cursor")),1<D.length&&S.addClass(E[12]),t("body").on("selectstart.nui",!1))}function v(e){var i=e.l,n=0;e.stopPropagation(),t.each(D,function(){n+=this.offset()[r.style]}),n=i<n/2||1===D.length?0:1,i-=b.offset()[r.style],i=100*i/c(),d(D[n],i,r.n.m),r.n.m&&g(e,{b:[D[n]]})}function y(t){var e=(t=t.l<b.offset()[r.style])?0:100;t=t?0:D.length-1,d(D[t],e,!1)}var b,w,D,S=t(e),T=[-1,-1];if(S.hasClass(E[0]))throw Error("Slider was already initialized.");b=C(r,S),D=_(r,b),w=k(r,D),x(r.i,S,D),function(t){var e;if(!t.fixed)for(e=0;e<D.length;e++)f(L.start,D[e].children(),g,{b:[D[e]]});t.s&&f(L.start,b,v,{b:D}),t.extend&&(S.addClass(E[16]),t.s&&f(L.start,S,y,{b:D})),t.v&&(e=b.find("."+E[7]).addClass(E[10]),t.fixed&&(e=e.add(b.children().not(e).children())),f(L.start,e,g,{b:D}))}(r.n),e.vSet=function(){var e,o,a,l,c,d,f=Array.prototype.slice.call(arguments,0),p=i(f[0]);for("object"==typeof f[1]?(e=f[1].set,o=f[1].link,a=f[1].update,l=f[1].animate):!0===f[1]&&(e=!0),r.dir&&1<r.b&&p.reverse(),l&&n(S,E[14]),f=1<D.length?3:1,1===p.length&&(f=1),c=0;c<f;c++)l=o||w[c%2][0],!1!==(l=l.A(p[c%2]))&&(l=s(r,l),r.dir&&(l=100-l),!0!==u(D[c%2],l,!0)&&t(w[c%2]).each(function(t){if(!t)return d=this.u,!0;this.write(d,D[c%2].children(),S,a)}));return!0===e&&h(["set"]),this},e.vGet=function(){var t,e=[];for(t=0;t<r.b;t++)e[t]=w[t][0].F;return 1===e.length?e[0]:r.dir?e.reverse():e},e.destroy=function(){return t.each(w,function(){t.each(this,function(){this.target&&this.target.off(".nui")})}),t(this).off(".nui").removeClass(E.join(" ")).empty(),l},S.val(r.start)}function S(t){if(!this.length)throw Error("noUiSlider: Can't initialize slider on empty selection.");var e=y(t,this);return this.each(function(){D(this,e,t)})}function T(e){return this.each(function(){var i=t(this).val(),n=this.destroy(),r=t.extend({},n,e);t(this).noUiSlider(r),n.start===r.start&&t(this).val(i)})}var M=t(document),L=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},E="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active noUi-extended noUi-stacking".split(" ");t.noUiSlider={Link:t.Link},t.fn.noUiSlider=function(t,e){return(e?T:S).call(this,t)},t.classVal(E[0],"vGet","vSet",!1)}(window.jQuery||window.Zepto),function(){function t(e){var i=t.modules[e];if(!i)throw new Error('failed to require "'+e+'"');return"exports"in i||"function"!=typeof i.definition||(i.client=i.component=!0,i.definition.call(this,i.exports={},i),delete i.definition),i.exports}t.loader="component",t.helper={},t.helper.semVerSort=function(t,e){for(var i=t.version.split("."),n=e.version.split("."),r=0;r<i.length;++r){var s=parseInt(i[r],10),o=parseInt(n[r],10);if(s!==o)return s>o?1:-1;var a=i[r].substr((""+s).length),l=n[r].substr((""+o).length);if(""===a&&""!==l)return 1;if(""!==a&&""===l)return-1;if(""!==a&&""!==l)return a>l?1:-1}return 0},t.latest=function(e,i){function n(t){throw new Error('failed to find latest module of "'+t+'"')}var r=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/;/(.*)~(.*)/.test(e)||n(e);for(var s=Object.keys(t.modules),o=[],a=[],l=0;l<s.length;l++){var c=s[l];if(new RegExp(e+"@").test(c)){var h=c.substr(e.length+1);null!=r.exec(c)?o.push({version:h,name:c}):a.push({version:h,name:c})}}if(0===o.concat(a).length&&n(e),o.length>0){var u=o.sort(t.helper.semVerSort).pop().name;return!0===i?u:t(u)}var u=a.sort(function(t,e){return t.name>e.name})[0].name;return!0===i?u:t(u)},t.modules={},t.register=function(e,i){t.modules[e]={definition:i}},t.define=function(e,i){t.modules[e]={exports:i}},t.register("abpetkov~transitionize@0.0.3",function(t,e){function i(t,e){if(!(this instanceof i))return new i(t,e);this.element=t,this.props=e||{},this.init()}e.exports=i,i.prototype.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},i.prototype.init=function(){var t=[];for(var e in this.props)t.push(e+" "+this.props[e]);this.element.style.transition=t.join(", "),this.isSafari()&&(this.element.style.webkitTransition=t.join(", "))}}),t.register("ftlabs~fastclick@v0.6.11",function(t,e){function i(t){"use strict";var e,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return i.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return i.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return i.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){return i.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return i.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return i.prototype.onTouchCancel.apply(n,arguments)},i.notNeeded(t)||(this.deviceIsAndroid&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,i.hijacked||i,n):r.call(t,e,i,n)},t.addEventListener=function(e,i,n){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):r.call(t,e,i,n)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}i.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,i.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),i.prototype.deviceIsIOS4=i.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),i.prototype.deviceIsIOSWithBadTarget=i.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),i.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},i.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},i.prototype.sendClick=function(t,e){"use strict";var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},i.prototype.determineEventType=function(t){"use strict";return this.deviceIsAndroid&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},i.prototype.focus=function(t){"use strict";var e;this.deviceIsIOS&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},i.prototype.updateScrollParent=function(t){"use strict";var e,i;if(!(e=t.fastClickScrollParent)||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},i.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},i.prototype.onTouchStart=function(t){"use strict";var e,i,n;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],this.deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<200&&t.preventDefault(),!0},i.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i},i.prototype.onTouchMove=function(t){"use strict";return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},i.prototype.findControl=function(t){"use strict";return t.control!==undefined?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},i.prototype.onTouchEnd=function(t){"use strict";var e,i,n,r,s,o=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=t.changedTouches[0],o=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||o,o.fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(n=o.tagName.toLowerCase())){if(e=this.findControl(o)){if(this.focus(o),this.deviceIsAndroid)return!1;o=e}}else if(this.needsFocus(o))return t.timeStamp-i>100||this.deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(o),this.deviceIsIOS4&&"select"===n||(this.targetElement=null,t.preventDefault()),!1);return!(!this.deviceIsIOS||this.deviceIsIOS4||!(r=o.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(o)||(t.preventDefault(),this.sendClick(o,t)),!1)},i.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},i.prototype.onMouse=function(t){"use strict";return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},i.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||(e=this.onMouse(t),e||(this.targetElement=null),e)},i.prototype.destroy=function(){"use strict";var t=this.layer;this.deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},i.notNeeded=function(t){"use strict";var e,n;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i.prototype.deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===t.style.msTouchAction},i.attach=function(t){"use strict";return new i(t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return i}):void 0!==e&&e.exports?(e.exports=i.attach,e.exports.FastClick=i):window.FastClick=i}),t.register("component~indexof@0.0.3",function(t,e){e.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}}),t.register("component~classes@1.2.1",function(e,i){function n(t){if(!t)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}var r=t("component~indexof@0.0.3"),s=/\s+/,o=Object.prototype.toString;i.exports=function(t){return new n(t)},n.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~r(e,t)||e.push(t),this.el.className=e.join(" "),this},n.prototype.remove=function(t){if("[object RegExp]"==o.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),i=r(e,t);return~i&&e.splice(i,1),this.el.className=e.join(" "),this},n.prototype.removeMatching=function(t){for(var e=this.array(),i=0;i<e.length;i++)t.test(e[i])&&this.remove(e[i]);return this},n.prototype.toggle=function(t,e){return this.list?(void 0!==e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(void 0!==e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},n.prototype.array=function(){var t=this.el.className.replace(/^\s+|\s+$/g,""),e=t.split(s);return""===e[0]&&e.shift(),e},n.prototype.has=n.prototype.contains=function(t){return this.list?this.list.contains(t):!!~r(this.array(),t)}}),t.register("component~event@0.1.4",function(t){var e=window.addEventListener?"addEventListener":"attachEvent",i=window.removeEventListener?"removeEventListener":"detachEvent",n="addEventListener"!==e?"on":"";t.bind=function(t,i,r,s){return t[e](n+i,r,s||!1),r},t.unbind=function(t,e,r,s){return t[i](n+e,r,s||!1),r}}),t.register("component~query@0.0.3",function(t,e){function i(t,e){return e.querySelector(t)}t=e.exports=function(t,e){return e=e||document,i(t,e)},t.all=function(t,e){return e=e||document,e.querySelectorAll(t)},t.engine=function(e){if(!e.one)throw new Error(".one callback required");if(!e.all)throw new Error(".all callback required");return i=e.one,t.all=e.all,t}}),t.register("component~matches-selector@0.1.5",function(e,i){function n(t,e){if(!t||1!==t.nodeType)return!1;if(o)return o.call(t,e);for(var i=r.all(e,t.parentNode),n=0;n<i.length;++n)if(i[n]==t)return!0;return!1}var r=t("component~query@0.0.3"),s=Element.prototype,o=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector;i.exports=n}),t.register("component~closest@0.1.4",function(e,i){var n=t("component~matches-selector@0.1.5");i.exports=function(t,e,i,r){for(t=i?{parentNode:t}:t,r=r||document;(t=t.parentNode)&&t!==document;){if(n(t,e))return t;if(t===r)return}}}),t.register("component~delegate@0.2.3",function(e){var i=t("component~closest@0.1.4"),n=t("component~event@0.1.4");e.bind=function(t,e,r,s,o){return n.bind(t,r,function(n){var r=n.target||n.srcElement;n.delegateTarget=i(r,e,!0,t),n.delegateTarget&&s.call(t,n)},o)},e.unbind=function(t,e,i,r){n.unbind(t,e,i,r)}}),t.register("component~events@1.0.9",function(e,i){function n(t,e){if(!(this instanceof n))return new n(t,e);if(!t)throw new Error("element required");if(!e)throw new Error("object required");this.el=t,this.obj=e,this._events={}}function r(t){var e=t.split(/ +/);return{name:e.shift(),selector:e.join(" ")}}var s=t("component~event@0.1.4"),o=t("component~delegate@0.2.3");i.exports=n,n.prototype.sub=function(t,e,i){this._events[t]=this._events[t]||{},this._events[t][e]=i},n.prototype.bind=function(t,e){function i(){var t=[].slice.call(arguments).concat(h);l[e].apply(l,t)}var n=r(t),a=this.el,l=this.obj,c=n.name,e=e||"on"+c,h=[].slice.call(arguments,2);return n.selector?i=o.bind(a,n.selector,c,i):s.bind(a,c,i),this.sub(c,e,i),i},n.prototype.unbind=function(t,e){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(t);var i=this._events[t];if(i){var n=i[e];n&&s.unbind(this.el,t,n)}},n.prototype.unbindAll=function(){for(var t in this._events)this.unbindAllOf(t)},n.prototype.unbindAllOf=function(t){var e=this._events[t];if(e)for(var i in e)this.unbind(t,i)}}),t.register("switchery",function(e,i){function n(t,e){if(!(this instanceof n))return new n(t,e);this.element=t,this.options=e||{};for(var i in l)null==this.options[i]&&(this.options[i]=l[i]);null!=this.element&&"checkbox"==this.element.type&&this.init(),!0===this.isDisabled()&&this.disable()}var r=t("abpetkov~transitionize@0.0.3"),s=t("ftlabs~fastclick@v0.6.11"),o=t("component~classes@1.2.1"),a=t("component~events@1.0.9");i.exports=n;var l={color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#fff",jackSecondaryColor:null,className:"switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s",size:"default"};n.prototype.hide=function(){this.element.style.display="none"},n.prototype.show=function(){var t=this.create();this.insertAfter(this.element,t)},n.prototype.create=function(){
return this.switcher=document.createElement("span"),this.jack=document.createElement("small"),this.switcher.appendChild(this.jack),this.switcher.className=this.options.className,this.events=a(this.switcher,this),this.switcher},n.prototype.insertAfter=function(t,e){t.parentNode.insertBefore(e,t.nextSibling)},n.prototype.setPosition=function(t){var e=this.isChecked(),i=this.switcher,n=this.jack;t&&e?e=!1:t&&!e&&(e=!0),!0===e?(this.element.checked=!0,window.getComputedStyle?n.style.left=parseInt(window.getComputedStyle(i).width)-parseInt(window.getComputedStyle(n).width)+"px":n.style.left=parseInt(i.currentStyle.width)-parseInt(n.currentStyle.width)+"px",this.options.color&&this.colorize(),this.setSpeed()):(n.style.left=0,this.element.checked=!1,this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor,this.switcher.style.borderColor=this.options.secondaryColor,this.switcher.style.backgroundColor=this.options.secondaryColor!==l.secondaryColor?this.options.secondaryColor:"#fff",this.jack.style.backgroundColor=this.options.jackSecondaryColor!==this.options.jackColor?this.options.jackSecondaryColor:this.options.jackColor,this.setSpeed())},n.prototype.setSpeed=function(){var t={},e={"background-color":this.options.speed,left:this.options.speed.replace(/[a-z]/,"")/2+"s"};t=this.isChecked()?{border:this.options.speed,"box-shadow":this.options.speed,"background-color":3*this.options.speed.replace(/[a-z]/,"")+"s"}:{border:this.options.speed,"box-shadow":this.options.speed},r(this.switcher,t),r(this.jack,e)},n.prototype.setSize=function(){switch(this.options.size){case"small":o(this.switcher).add("switchery-small");break;case"large":o(this.switcher).add("switchery-large");break;default:o(this.switcher).add("switchery-default")}},n.prototype.colorize=function(){var t=this.switcher.offsetHeight/2;this.switcher.style.backgroundColor=this.options.color,this.switcher.style.borderColor=this.options.color,this.switcher.style.boxShadow="inset 0 0 0 "+t+"px "+this.options.color,this.jack.style.backgroundColor=this.options.jackColor},n.prototype.handleOnchange=function(){if(document.dispatchEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!0),this.element.dispatchEvent(t)}else this.element.fireEvent("onchange")},n.prototype.handleChange=function(){var t=this,e=this.element;e.addEventListener?e.addEventListener("change",function(){t.setPosition()}):e.attachEvent("onchange",function(){t.setPosition()})},n.prototype.handleClick=function(){var t=this.switcher;s(t),this.events.bind("click","bindClick")},n.prototype.bindClick=function(){var t=this.element.parentNode.tagName.toLowerCase(),e="label"!==t;this.setPosition(e),this.handleOnchange(this.element.checked)},n.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",!0)},n.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")},n.prototype.init=function(){this.hide(),this.show(),this.setSize(),this.setPosition(),this.markAsSwitched(),this.handleChange(),this.handleClick()},n.prototype.isChecked=function(){return this.element.checked},n.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled||this.element.readOnly},n.prototype.destroy=function(){this.events.unbind()},n.prototype.enable=function(){this.options.disabled&&(this.options.disabled&&(this.options.disabled=!1),this.element.disabled&&(this.element.disabled=!1),this.element.readOnly&&(this.element.readOnly=!1),this.switcher.style.opacity=1,this.events.bind("click","bindClick"))},n.prototype.disable=function(){this.options.disabled||(this.options.disabled||(this.options.disabled=!0),this.element.disabled||(this.element.disabled=!0),this.element.readOnly||(this.element.readOnly=!0),this.switcher.style.opacity=this.options.disabledOpacity,this.destroy())}}),"object"==typeof exports?module.exports=t("switchery"):"function"==typeof define&&define.amd?define("Switchery",[],function(){return t("switchery")}):(this||window).Switchery=t("switchery")}(),function(){var t,e,i,n,r,s={}.hasOwnProperty,o=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,i,n,r,s,o;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),s=t.childNodes,o=[],n=0,r=s.length;n<r;n++)i=s[n],o.push(this.add_option(i,e,t.disabled));return o},t.prototype.add_option=function(t,e,i){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:!0===i?i:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},t.prototype.escapeExpression=function(t){var e,i;return null==t||!1===t?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(i,function(t){return e[t]||"&amp;"})):t},t}(),n.select_to_array=function(t){var e,i,r,s,o;for(i=new n,o=t.childNodes,r=0,s=o.length;r<s;r++)e=o[r],i.add_node(e);return i.parsed},e=function(){function t(e,i){this.form_field=e,this.options=null!=i?i:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||Infinity,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return t.blur_test()},100)},t.prototype.results_option_build=function(t){var e,i,n,r,s;for(e="",s=this.results_data,n=0,r=s.length;n<r;n++)i=s[n],i.group?e+=this.result_add_group(i):e+=this.result_add_option(i),(null!=t?t.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return e},t.prototype.result_add_option=function(t){var e,i;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),i=document.createElement("li"),i.className=e.join(" "),i.style.cssText=t.style,i.setAttribute("data-option-array-index",t.array_index),i.innerHTML=t.search_text,this.outerHTML(i)):""},t.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},t.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},t.prototype.reset_single_select_options=function(){var t,e,i,n,r;for(n=this.results_data,r=[],e=0,i=n.length;e<i;e++)t=n[e],t.selected?r.push(t.selected=!1):r.push(void 0);return r},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,i,n,r,s,o,a,l,c,h,u,d;for(this.no_results_clear(),r=0,o=this.get_search_text(),t=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),n=this.search_contains?"":"^",i=new RegExp(n+t,"i"),c=new RegExp(t,"i"),d=this.results_data,h=0,u=d.length;h<u;h++)e=d[h],e.search_match=!1,s=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(s=this.results_data[e.group_array_index],0===s.active_options&&s.search_match&&(r+=1),s.active_options+=1),e.group&&!this.group_search||(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,i),e.search_match&&!e.group&&(r+=1),e.search_match?(o.length&&(a=e.search_text.search(c),l=e.search_text.substr(0,a+o.length)+"</em>"+e.search_text.substr(a+o.length),e.search_text=l.substr(0,a)+"<em>"+l.substr(a)),null!=s&&(s.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),r<1&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var i,n,r,s;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(n=t.replace(/\[|\]/g,"").split(" "),n.length))for(r=0,s=n.length;r<s;r++)if(i=n[r],e.test(i))return!0},t.prototype.choices_count=function(){var t,e,i,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,n=this.form_field.options,e=0,i=n.length;e<i;e++)t=n[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){if(t.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},t.prototype.keyup_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){if(this.touch_started)return this.search_results_mouseup(t)},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!/iP(od|hone)/i.test(window.navigator.userAgent)&&(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(n){return e.browser_is_supported()?this.each(function(){var e,r;e=t(this),r=e.data("chosen"),"destroy"===n&&r?r.destroy():r||e.data("chosen",new i(this,n))}):this}}),i=function(e){function i(){return r=i.__super__.constructor.apply(this,arguments)}return o(i,e),i.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var e,i;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),i={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",i),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},i.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(e){if(!this.is_disabled&&(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null==e||!t(e.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},i.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},i.prototype.search_results_mousewheel=function(t){var e;if(t.originalEvent&&(e=-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e)return t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())},i.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},i.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(e){var i;return i=t(e.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=n.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(t){var e,i,n,r,s;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),r=n+s,i=this.result_highlight.position().top+this.search_results.scrollTop(),(e=i+this.result_highlight.outerHeight())>=r)return this.search_results.scrollTop(e-n>0?e-n:0);if(i<s)return this.search_results.scrollTop(i)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(t){return this.search_results.html(t)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(){var t;if(this.form_field.tabIndex)return t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t},i.prototype.set_label_behavior=function(){var e=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()})},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(e){var i;if(i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i.length)return this.result_highlight=i,this.result_select(e),this.search_field.focus()},i.prototype.search_results_mouseover=function(e){var i;if(i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first())return this.result_do_highlight(i)},i.prototype.search_results_mouseout=function(e){if(t(e.target).hasClass("active-result"))return this.result_clear_highlight()},i.prototype.choice_build=function(e){var i,n,r=this;return i=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?i.addClass("search-choice-disabled"):(n=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),n.bind("click.chosen",function(t){return r.choice_destroy_link_click(t)}),i.append(n)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(e){if(e.preventDefault(),e.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(e.target))},i.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},i.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(t){var e,i;if(this.result_highlight)return e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),i=this.results_data[e[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},i.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},i.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},i.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var t,e;if(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),null!=(t=e.length?e.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(t)},i.prototype.no_results=function(e){var i;return i=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(e),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var e,i,n,r,s,o,a,l;if(this.is_multiple){for(0,o=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",s=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],a=0,l=s.length;a<l;a++)n=s[a],r+=n+":"+this.search_field.css(n)+";";return e=t("<div />",{style:r}),e.text(this.search_field.val()),t("body").append(e),o=e.width()+25,e.remove(),i=this.container.outerWidth(),o>i-10&&(o=i-10),this.search_field.css({width:o+"px"})}},i}(e)}.call(this),function(t){function e(t,e,i){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:i;default:throw new Error("Implement me")}}function i(t,e){return Tt.call(t,e)}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(t){!1===kt.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function s(t,e){var i=!0;return p(function(){return i&&(r(t),i=!1),e.apply(this,arguments)},e)}function o(t,e){ye[t]||(r(e),ye[t]=!0)}function a(t,e){return function(i){return v(t.call(this,i),e)}}function l(t,e){return function(i){return this.localeData().ordinal(t.call(this,i),e)}}function c(t,e){var i,n,r=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(r,"months");return 0>e-s?(i=t.clone().add(r-1,"months"),n=(e-s)/(s-i)):(i=t.clone().add(r+1,"months"),n=(e-s)/(i-s)),-(r+n)}function h(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):e}function u(){}function d(t,e){!1!==e&&I(t),m(this,t),this._d=new Date(+t._d),!1===we&&(we=!0,kt.updateOffset(this),we=!1)}function f(t){var e=S(t),i=e.year||0,n=e.quarter||0,r=e.month||0,s=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,h=e.millisecond||0;this._milliseconds=+h+1e3*c+6e4*l+36e5*a,this._days=+o+7*s,this._months=+r+3*n+12*i,this._data={},this._locale=kt.localeData(),this._bubble()}function p(t,e){for(var n in e)i(e,n)&&(t[n]=e[n]);return i(e,"toString")&&(t.toString=e.toString),i(e,"valueOf")&&(t.valueOf=e.valueOf),t}function m(t,e){var i,n,r;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Pt.length>0)for(i in Pt)n=Pt[i],void 0!==(r=e[n])&&(t[n]=r);return t}function g(t){return 0>t?Math.ceil(t):Math.floor(t)}function v(t,e,i){for(var n=""+Math.abs(t),r=t>=0;n.length<e;)n="0"+n;return(r?i?"+":"":"-")+n}function y(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function b(t,e){var i;return e=H(e,t),t.isBefore(e)?i=y(t,e):(i=y(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function w(t,e){return function(i,n){var r,s
;return null===n||isNaN(+n)||(o(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),s=i,i=n,n=s),i="string"==typeof i?+i:i,r=kt.duration(i,n),k(this,r,t),this}}function k(t,e,i,n){var r=e._milliseconds,s=e._days,o=e._months;n=null==n||n,r&&t._d.setTime(+t._d+r*i),s&&mt(t,"Date",pt(t,"Date")+s*i),o&&ft(t,pt(t,"Month")+o*i),n&&kt.updateOffset(t,s||o)}function x(t){return"[object Array]"===Object.prototype.toString.call(t)}function _(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function C(t,e,i){var n,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(n=0;r>n;n++)(i&&t[n]!==e[n]||!i&&M(t[n])!==M(e[n]))&&o++;return o+s}function D(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=ue[t]||de[e]||e}return t}function S(t){var e,n,r={};for(n in t)i(t,n)&&(e=D(n))&&(r[e]=t[n]);return r}function T(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}kt[e]=function(r,s){var o,a,l=kt._locale[e],c=[];if("number"==typeof r&&(s=r,r=t),a=function(t){var e=kt().utc().set(n,t);return l.call(kt._locale,e,r||"")},null!=s)return a(s);for(o=0;i>o;o++)c.push(a(o));return c}}function M(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function L(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function E(t,e,i){return ct(kt([t,11,31+e-i]),e,i).week}function $(t){return A(t)?366:365}function A(t){return t%4==0&&t%100!=0||t%400==0}function I(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[Lt]<0||t._a[Lt]>11?Lt:t._a[Et]<1||t._a[Et]>L(t._a[Mt],t._a[Lt])?Et:t._a[$t]<0||t._a[$t]>24||24===t._a[$t]&&(0!==t._a[At]||0!==t._a[It]||0!==t._a[Nt])?$t:t._a[At]<0||t._a[At]>59?At:t._a[It]<0||t._a[It]>59?It:t._a[Nt]<0||t._a[Nt]>999?Nt:-1,t._pf._overflowDayOfYear&&(Mt>e||e>Et)&&(e=Et),t._pf.overflow=e)}function N(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===t)),e._isValid}function F(t){return t?t.toLowerCase().replace("_","-"):t}function P(t){for(var e,i,n,r,s=0;s<t.length;){for(r=F(t[s]).split("-"),e=r.length,i=F(t[s+1]),i=i?i.split("-"):null;e>0;){if(n=O(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&C(r,i,!0)>=e-1)break;e--}s++}return null}function O(t){var e=null;if(!Ft[t]&&Ot)try{e=kt.locale(),require("./locale/"+t),kt.locale(e)}catch(t){}return Ft[t]}function H(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(kt.isMoment(t)||_(t)?+t:+kt(t))-+i,i._d.setTime(+i._d+n),kt.updateOffset(i,!1),i):kt(t).local()}function z(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function R(t){var e,i,n=t.match(Ut);for(e=0,i=n.length;i>e;e++)n[e]=ve[n[e]]?ve[n[e]]:z(n[e]);return function(r){var s="";for(e=0;i>e;e++)s+=n[e]instanceof Function?n[e].call(r,t):n[e];return s}}function U(t,e){return t.isValid()?(e=B(e,t.localeData()),fe[e]||(fe[e]=R(e)),fe[e](t)):t.localeData().invalidDate()}function B(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Bt.lastIndex=0;n>=0&&Bt.test(t);)t=t.replace(Bt,i),Bt.lastIndex=0,n-=1;return t}function W(t,e){var i=e._strict;switch(t){case"Q":return Jt;case"DDDD":return ee;case"YYYY":case"GGGG":case"gggg":return i?ie:Yt;case"Y":case"G":case"g":return re;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?ne:qt;case"S":if(i)return Jt;case"SS":if(i)return te;case"SSS":if(i)return ee;case"DDD":return jt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Gt;case"a":case"A":return e._locale._meridiemParse;case"x":return Zt;case"X":return Qt;case"Z":case"ZZ":return Kt;case"T":return Xt;case"SSSS":return Vt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?te:Wt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Wt;case"Do":return i?e._locale._ordinalParse:e._locale._ordinalParseLenient;default:return new RegExp(Q(Z(t.replace("\\","")),"i"))}}function j(t){t=t||"";var e=t.match(Kt)||[],i=e[e.length-1]||[],n=(i+"").match(ce)||["-",0,0],r=60*n[1]+M(n[2]);return"+"===n[0]?r:-r}function Y(t,e,i){var n,r=i._a;switch(t){case"Q":null!=e&&(r[Lt]=3*(M(e)-1));break;case"M":case"MM":null!=e&&(r[Lt]=M(e)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(e,t,i._strict),null!=n?r[Lt]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(r[Et]=M(e));break;case"Do":null!=e&&(r[Et]=M(parseInt(e.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=M(e));break;case"YY":r[Mt]=kt.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":r[Mt]=M(e);break;case"a":case"A":i._meridiem=e;break;case"h":case"hh":i._pf.bigHour=!0;case"H":case"HH":r[$t]=M(e);break;case"m":case"mm":r[At]=M(e);break;case"s":case"ss":r[It]=M(e);break;case"S":case"SS":case"SSS":case"SSSS":r[Nt]=M(1e3*("0."+e));break;case"x":i._d=new Date(M(e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=j(e);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(e),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=M(e));break;case"gg":case"GG":i._w=i._w||{},i._w[t]=kt.parseTwoDigitYear(e)}}function q(t){var i,n,r,s,o,a,l;i=t._w,null!=i.GG||null!=i.W||null!=i.E?(o=1,a=4,n=e(i.GG,t._a[Mt],ct(kt(),1,4).year),r=e(i.W,1),s=e(i.E,1)):(o=t._locale._week.dow,a=t._locale._week.doy,n=e(i.gg,t._a[Mt],ct(kt(),o,a).year),r=e(i.w,1),null!=i.d?(s=i.d,o>s&&++r):s=null!=i.e?i.e+o:o),l=ht(n,r,s,a,o),t._a[Mt]=l.year,t._dayOfYear=l.dayOfYear}function V(t){var i,n,r,s,o=[];if(!t._d){for(r=K(t),t._w&&null==t._a[Et]&&null==t._a[Lt]&&q(t),t._dayOfYear&&(s=e(t._a[Mt],r[Mt]),t._dayOfYear>$(s)&&(t._pf._overflowDayOfYear=!0),n=st(s,0,t._dayOfYear),t._a[Lt]=n.getUTCMonth(),t._a[Et]=n.getUTCDate()),i=0;3>i&&null==t._a[i];++i)t._a[i]=o[i]=r[i];for(;7>i;i++)t._a[i]=o[i]=null==t._a[i]?2===i?1:0:t._a[i];24===t._a[$t]&&0===t._a[At]&&0===t._a[It]&&0===t._a[Nt]&&(t._nextDay=!0,t._a[$t]=0),t._d=(t._useUTC?st:rt).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[$t]=24)}}function G(t){var e;t._d||(e=S(t._i),t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],V(t))}function K(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function X(e){if(e._f===kt.ISO_8601)return void tt(e);e._a=[],e._pf.empty=!0;var i,n,r,s,o,a=""+e._i,l=a.length,c=0;for(r=B(e._f,e._locale).match(Ut)||[],i=0;i<r.length;i++)s=r[i],n=(a.match(W(s,e))||[])[0],n&&(o=a.substr(0,a.indexOf(n)),o.length>0&&e._pf.unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),c+=n.length),ve[s]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(s),Y(s,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(s);e._pf.charsLeftOver=l-c,a.length>0&&e._pf.unusedInput.push(a),!0===e._pf.bigHour&&e._a[$t]<=12&&(e._pf.bigHour=t),e._a[$t]=h(e._locale,e._a[$t],e._meridiem),V(e),I(e)}function Z(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r})}function Q(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(t){var e,i,r,s,o;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(NaN));for(s=0;s<t._f.length;s++)o=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=n(),e._f=t._f[s],X(e),N(e)&&(o+=e._pf.charsLeftOver,o+=10*e._pf.unusedTokens.length,e._pf.score=o,(null==r||r>o)&&(r=o,i=e));p(t,i||e)}function tt(t){var e,i,n=t._i,r=se.exec(n);if(r){for(t._pf.iso=!0,e=0,i=ae.length;i>e;e++)if(ae[e][1].exec(n)){t._f=ae[e][0]+(r[6]||" ");break}for(e=0,i=le.length;i>e;e++)if(le[e][1].exec(n)){t._f+=le[e][0];break}n.match(Kt)&&(t._f+="Z"),X(t)}else t._isValid=!1}function et(t){tt(t),!1===t._isValid&&(delete t._isValid,kt.createFromInputFallback(t))}function it(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function nt(e){var i,n=e._i;n===t?e._d=new Date:_(n)?e._d=new Date(+n):null!==(i=Ht.exec(n))?e._d=new Date(+i[1]):"string"==typeof n?et(e):x(n)?(e._a=it(n.slice(0),function(t){return parseInt(t,10)}),V(e)):"object"==typeof n?G(e):"number"==typeof n?e._d=new Date(n):kt.createFromInputFallback(e)}function rt(t,e,i,n,r,s,o){var a=new Date(t,e,i,n,r,s,o);return 1970>t&&a.setFullYear(t),a}function st(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function ot(t,e){if("string"==typeof t)if(isNaN(t)){if("number"!=typeof(t=e.weekdaysParse(t)))return null}else t=parseInt(t,10);return t}function at(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function lt(t,e,i){var n=kt.duration(t).abs(),r=St(n.as("s")),s=St(n.as("m")),o=St(n.as("h")),a=St(n.as("d")),l=St(n.as("M")),c=St(n.as("y")),h=r<pe.s&&["s",r]||1===s&&["m"]||s<pe.m&&["mm",s]||1===o&&["h"]||o<pe.h&&["hh",o]||1===a&&["d"]||a<pe.d&&["dd",a]||1===l&&["M"]||l<pe.M&&["MM",l]||1===c&&["y"]||["yy",c];return h[2]=e,h[3]=+t>0,h[4]=i,at.apply({},h)}function ct(t,e,i){var n,r=i-e,s=i-t.day();return s>r&&(s-=7),r-7>s&&(s+=7),n=kt(t).add(s,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function ht(t,e,i,n,r){var s,o,a=st(t,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:r,s=r-a+(a>n?7:0)-(r>a?7:0),o=7*(e-1)+(i-r)+s+1,{year:o>0?t:t-1,dayOfYear:o>0?o:$(t-1)+o}}function ut(e){var i,n=e._i,r=e._f;return e._locale=e._locale||kt.localeData(e._l),null===n||r===t&&""===n?kt.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),kt.isMoment(n)?new d(n,!0):(r?x(r)?J(e):X(e):nt(e),i=new d(e),i._nextDay&&(i.add(1,"d"),i._nextDay=t),i))}function dt(t,e){var i,n;if(1===e.length&&x(e[0])&&(e=e[0]),!e.length)return kt();for(i=e[0],n=1;n<e.length;++n)e[n][t](i)&&(i=e[n]);return i}function ft(t,e){var i;return"string"==typeof e&&"number"!=typeof(e=t.localeData().monthsParse(e))?t:(i=Math.min(t.date(),L(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function pt(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function mt(t,e,i){return"Month"===e?ft(t,i):t._d["set"+(t._isUTC?"UTC":"")+e](i)}function gt(t,e){return function(i){return null!=i?(mt(this,t,i),kt.updateOffset(this,e),this):pt(this,t)}}function vt(t){return 400*t/146097}function yt(t){return 146097*t/400}function bt(t){kt.duration.fn[t]=function(){return this._data[t]}}function wt(t){"undefined"==typeof ender&&(xt=Dt.moment,Dt.moment=t?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",kt):kt)}for(var kt,xt,_t,Ct="2.9.0",Dt="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,St=Math.round,Tt=Object.prototype.hasOwnProperty,Mt=0,Lt=1,Et=2,$t=3,At=4,It=5,Nt=6,Ft={},Pt=[],Ot="undefined"!=typeof module&&module&&module.exports,Ht=/^\/?Date\((\-?\d+)/i,zt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Rt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ut=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Bt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Wt=/\d\d?/,jt=/\d{1,3}/,Yt=/\d{1,4}/,qt=/[+\-]?\d{1,6}/,Vt=/\d+/,Gt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Kt=/Z|[\+\-]\d\d:?\d\d/gi,Xt=/T/i,Zt=/[\+\-]?\d+/,Qt=/[\+\-]?\d+(\.\d{1,3})?/,Jt=/\d/,te=/\d\d/,ee=/\d{3}/,ie=/\d{4}/,ne=/[+-]?\d{6}/,re=/[+-]?\d+/,se=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,oe="YYYY-MM-DDTHH:mm:ssZ",ae=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],le=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ce=/([\+\-]|\d\d)/gi,he=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ue={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},de={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},fe={},pe={s:45,m:45,h:22,d:26,M:11},me="DDD w W M D d".split(" "),ge="M D H h m s w W".split(" "),ve={M:function(){return this.month()+1},MMM:function(t){return this.localeData().monthsShort(this,t)},MMMM:function(t){return this.localeData().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.localeData().weekdaysMin(this,t)},ddd:function(t){return this.localeData().weekdaysShort(this,t)},dddd:function(t){return this.localeData().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var t=this.year();return(t>=0?"+":"-")+v(Math.abs(t),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return M(this.milliseconds()/100)},SS:function(){return v(M(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var t=this.utcOffset(),e="+";return 0>t&&(t=-t,e="-"),e+v(M(t/60),2)+":"+v(M(t)%60,2)},ZZ:function(){var t=this.utcOffset(),e="+";return 0>t&&(t=-t,e="-"),e+v(M(t/60),2)+v(M(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},ye={},be=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],we=!1;me.length;)_t=me.pop(),ve[_t+"o"]=l(ve[_t],_t);for(;ge.length;)_t=ge.pop(),ve[_t+_t]=a(ve[_t],2);ve.DDDD=a(ve.DDD,3),p(u.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t,e,i){var n,r,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(r=kt.utc([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=kt([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e,i){var n=this._calendar[t];return"function"==typeof n?n.apply(e,[i]):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var r=this._relativeTime[i];return"function"==typeof r?r(t,e,i,n):r.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(t){return t},postformat:function(t){return t},week:function(t){return ct(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),kt=function(e,i,r,s){var o;return"boolean"==typeof r&&(s=r,r=t),o={},o._isAMomentObject=!0,o._i=e,o._f=i,o._l=r,o._strict=s,o._isUTC=!1,o._pf=n(),ut(o)},kt.suppressDeprecationWarnings=!1,kt.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),kt.min=function(){return dt("isBefore",[].slice.call(arguments,0))},kt.max=function(){return dt("isAfter",[].slice.call(arguments,0))},kt.utc=function(e,i,r,s){var o;return"boolean"==typeof r&&(s=r,r=t),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=r,o._i=e,o._f=i,o._strict=s,o._pf=n(),ut(o).utc()},kt.unix=function(t){return kt(1e3*t)},kt.duration=function(t,e){var n,r,s,o,a=t,l=null;return kt.isDuration(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(l=zt.exec(t))?(n="-"===l[1]?-1:1,a={y:0,d:M(l[Et])*n,h:M(l[$t])*n,m:M(l[At])*n,s:M(l[It])*n,ms:M(l[Nt])*n}):(l=Rt.exec(t))?(n="-"===l[1]?-1:1,s=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},a={y:s(l[2]),M:s(l[3]),d:s(l[4]),h:s(l[5]),m:s(l[6]),s:s(l[7]),w:s(l[8])}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=b(kt(a.from),kt(a.to)),a={},a.ms=o.milliseconds,a.M=o.months),r=new f(a),kt.isDuration(t)&&i(t,"_locale")&&(r._locale=t._locale),r},kt.version=Ct,kt.defaultFormat=oe,kt.ISO_8601=function(){},kt.momentProperties=Pt,kt.updateOffset=function(){},kt.relativeTimeThreshold=function(e,i){return pe[e]!==t&&(i===t?pe[e]:(pe[e]=i,!0))},kt.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(t,e){return kt.locale(t,e)}),kt.locale=function(t,e){var i;return t&&(i=void 0!==e?kt.defineLocale(t,e):kt.localeData(t))&&(kt.duration._locale=kt._locale=i),kt._locale._abbr},kt.defineLocale=function(t,e){return null!==e?(e.abbr=t,Ft[t]||(Ft[t]=new u),Ft[t].set(e),kt.locale(t),Ft[t]):(delete Ft[t],null)},kt.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(t){return kt.localeData(t)}),kt.localeData=function(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return kt._locale;if(!x(t)){if(e=O(t))return e;t=[t]}return P(t)},kt.isMoment=function(t){return t instanceof d||null!=t&&i(t,"_isAMomentObject")},kt.isDuration=function(t){return t instanceof f};for(_t=be.length-1;_t>=0;--_t)T(be[_t]);kt.normalizeUnits=function(t){return D(t)},kt.invalid=function(t){var e=kt.utc(NaN);return null!=t?p(e._pf,t):e._pf.userInvalidated=!0,e},kt.parseZone=function(){return kt.apply(null,arguments).parseZone()},kt.parseTwoDigitYear=function(t){return M(t)+(M(t)>68?1900:2e3)},kt.isDate=_,p(kt.fn=d.prototype,{clone:function(){return kt(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=kt(this).utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():U(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):U(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return N(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&C(this._a,(this._isUTC?kt.utc(this._a):kt(this._a)).toArray())>0)},parsingFlags:function(){return p({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(t){return this.utcOffset(0,t)},local:function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(t){var e=U(this,t||kt.defaultFormat);return this.localeData().postformat(e)},add:w(1,"add"),subtract:w(-1,"subtract"),diff:function(t,e,i){var n,r,s=H(t,this),o=6e4*(s.utcOffset()-this.utcOffset());return e=D(e),"year"===e||"month"===e||"quarter"===e?(r=c(this,s),"quarter"===e?r/=3:"year"===e&&(r/=12)):(n=this-s,r="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-o)/864e5:"week"===e?(n-o)/6048e5:n),i?r:g(r)},from:function(t,e){return kt.duration({to:this,from:t}).locale(this.locale()).humanize(!e)},fromNow:function(t){return this.from(kt(),t)},calendar:function(t){var e=t||kt(),i=H(e,this).startOf("day"),n=this.diff(i,"days",!0),r=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,kt(e)))},isLeapYear:function(){return A(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=ot(t,this.localeData()),this.add(t-e,"d")):e},month:gt("Month",!0),startOf:function(t){switch(t=D(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=D(e),e===t||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(t,e){return e=D(void 0!==e?e:"millisecond"),"millisecond"===e?(t=kt.isMoment(t)?t:kt(t),+this>+t):(kt.isMoment(t)?+t:+kt(t))<+this.clone().startOf(e)},isBefore:function(t,e){var i;return e=D(void 0!==e?e:"millisecond"),"millisecond"===e?+(t=kt.isMoment(t)?t:kt(t))>+this:(i=kt.isMoment(t)?+t:+kt(t),+this.clone().endOf(e)<i)},isBetween:function(t,e,i){return this.isAfter(t,i)&&this.isBefore(e,i)},isSame:function(t,e){var i;return e=D(e||"millisecond"),"millisecond"===e?(t=kt.isMoment(t)?t:kt(t),+this==+t):(i=+kt(t),+this.clone().startOf(e)<=i&&i<=+this.clone().endOf(e))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=kt.apply(null,arguments),this>t?this:t}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=kt.apply(null,arguments),t>this?this:t}),zone:s("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),utcOffset:function(t,e){var i,n=this._offset||0;return null!=t?("string"==typeof t&&(t=j(t)),Math.abs(t)<16&&(t*=60),!this._isUTC&&e&&(i=this._dateUtcOffset()),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),n!==t&&(!e||this._changeInProgress?k(this,kt.duration(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,kt.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(j(this._i)),this},hasAlignedHourOffset:function(t){return t=t?kt(t).utcOffset():0,(this.utcOffset()-t)%60==0},daysInMonth:function(){return L(this.year(),this.month())},dayOfYear:function(t){var e=St((kt(this).startOf("day")-kt(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=ct(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=ct(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=ct(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return E(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return E(this.year(),t.dow,t.doy)},get:function(t){return t=D(t),this[t]()},set:function(t,e){var i;if("object"==typeof t)for(i in t)this.set(i,t[i]);else t=D(t),"function"==typeof this[t]&&this[t](e);return this},locale:function(e){var i;return e===t?this._locale._abbr:(i=kt.localeData(e),null!=i&&(this._locale=i),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===t?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),kt.fn.millisecond=kt.fn.milliseconds=gt("Milliseconds",!1),kt.fn.second=kt.fn.seconds=gt("Seconds",!1),kt.fn.minute=kt.fn.minutes=gt("Minutes",!1),kt.fn.hour=kt.fn.hours=gt("Hours",!0),kt.fn.date=gt("Date",!0),kt.fn.dates=s("dates accessor is deprecated. Use date instead.",gt("Date",!0)),kt.fn.year=gt("FullYear",!0),kt.fn.years=s("years accessor is deprecated. Use year instead.",gt("FullYear",!0)),kt.fn.days=kt.fn.day,kt.fn.months=kt.fn.month,kt.fn.weeks=kt.fn.week,kt.fn.isoWeeks=kt.fn.isoWeek,kt.fn.quarters=kt.fn.quarter,kt.fn.toJSON=kt.fn.toISOString,kt.fn.isUTC=kt.fn.isUtc,p(kt.duration.fn=f.prototype,{_bubble:function(){var t,e,i,n=this._milliseconds,r=this._days,s=this._months,o=this._data,a=0;o.milliseconds=n%1e3,t=g(n/1e3),o.seconds=t%60,e=g(t/60),o.minutes=e%60,i=g(e/60),o.hours=i%24,r+=g(i/24),a=g(vt(r)),r-=g(yt(a)),s+=g(r/30),r%=30,a+=g(s/12),s%=12,o.days=r,o.months=s,o.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return g(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*M(this._months/12)},humanize:function(t){var e=lt(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var i=kt.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=kt.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=D(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,i;if("month"===(t=D(t))||"year"===t)return e=this._days+this._milliseconds/864e5,i=this._months+12*vt(e),"month"===t?i:i/12;switch(e=this._days+Math.round(yt(this._months/12)),t){case"week":return e/7+this._milliseconds/6048e5;case"day":return e+this._milliseconds/864e5;case"hour":return 24*e+this._milliseconds/36e5;case"minute":return 24*e*60+this._milliseconds/6e4;case"second":return 24*e*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+t)}},lang:kt.fn.lang,locale:kt.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),r=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||r||s?"T":"")+(n?n+"H":"")+(r?r+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),kt.duration.fn.toString=kt.duration.fn.toISOString;for(_t in he)i(he,_t)&&bt(_t.toLowerCase());kt.duration.fn.asMilliseconds=function(){return this.as("ms")},kt.duration.fn.asSeconds=function(){return this.as("s")},kt.duration.fn.asMinutes=function(){return this.as("m")},kt.duration.fn.asHours=function(){return this.as("h")},kt.duration.fn.asDays=function(){return this.as("d")},kt.duration.fn.asWeeks=function(){return this.as("weeks")},kt.duration.fn.asMonths=function(){return this.as("M")},kt.duration.fn.asYears=function(){return this.as("y")},kt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===M(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),Ot?module.exports=kt:"function"==typeof define&&define.amd?(define(function(t,e,i){return i.config&&i.config()&&!0===i.config().noGlobal&&(Dt.moment=xt),kt}),wt(!0)):wt()}.call(this),function(){function t(t){return document.createElementNS(c,t)}function e(t){return(t<10?"0":"")+t}function i(t){var e=++v+"";return t?t+e:e}function n(n,a){function c(t,e){var i=d.offset(),n=/^touch/.test(t.type),r=i.left+y,o=i.top+y,c=(n?t.originalEvent.touches[0]:t).pageX-r,u=(n?t.originalEvent.touches[0]:t).pageY-o,f=Math.sqrt(c*c+u*u),g=!1;if(!e||!(f<b-k||f>b+k)){t.preventDefault();var v=setTimeout(function(){s.addClass("clockpicker-moving")},200);h&&d.append(L.canvas),L.setHand(c,u,!e,!0),l.off(p).on(p,function(t){t.preventDefault();var e=/^touch/.test(t.type),i=(e?t.originalEvent.touches[0]:t).pageX-r,n=(e?t.originalEvent.touches[0]:t).pageY-o;(g||i!==c||n!==u)&&(g=!0,L.setHand(i,n,!1,!0))}),l.off(m).on(m,function(t){l.off(m),t.preventDefault();var i=/^touch/.test(t.type),n=(i?t.originalEvent.changedTouches[0]:t).pageX-r,h=(i?t.originalEvent.changedTouches[0]:t).pageY-o;(e||g)&&n===c&&h===u&&L.setHand(n,h),"hours"===L.currentView?L.toggleView("minutes",_/2):a.autoclose&&(L.minutesView.addClass("clockpicker-dial-out"),
setTimeout(function(){L.done()},_/2)),d.prepend(O),clearTimeout(v),s.removeClass("clockpicker-moving"),l.off(p)})}}var u=o(C),d=u.find(".clockpicker-plate"),g=u.find(".clockpicker-hours"),v=u.find(".clockpicker-minutes"),D=u.find(".clockpicker-am-pm-block"),S="INPUT"===n.prop("tagName"),T=S?n:n.find("input"),M=n.find(".input-group-addon"),L=this;if(this.id=i("cp"),this.element=n,this.options=a,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=S,this.input=T,this.addon=M,this.popover=u,this.plate=d,this.hoursView=g,this.minutesView=v,this.amPmBlock=D,this.spanHours=u.find(".clockpicker-span-hours"),this.spanMinutes=u.find(".clockpicker-span-minutes"),this.spanAmPm=u.find(".clockpicker-span-am-pm"),this.amOrPm="PM",a.twelvehour){var E=['<div class="clockpicker-am-pm-block">','<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-am-button">',"AM</button>",'<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-pm-button">',"PM</button>","</div>"].join("");o(E);o('<button type="button" class="btn btn-sm btn-default clockpicker-button am-button">AM</button>').on("click",function(){L.amOrPm="AM",o(".clockpicker-span-am-pm").empty().append("AM")}).appendTo(this.amPmBlock),o('<button type="button" class="btn btn-sm btn-default clockpicker-button pm-button">PM</button>').on("click",function(){L.amOrPm="PM",o(".clockpicker-span-am-pm").empty().append("PM")}).appendTo(this.amPmBlock)}a.autoclose||o('<button type="button" class="btn btn-sm btn-default btn-block clockpicker-button">'+a.donetext+"</button>").click(o.proxy(this.done,this)).appendTo(u),"top"!==a.placement&&"bottom"!==a.placement||"top"!==a.align&&"bottom"!==a.align||(a.align="left"),"left"!==a.placement&&"right"!==a.placement||"left"!==a.align&&"right"!==a.align||(a.align="top"),u.addClass(a.placement),u.addClass("clockpicker-align-"+a.align),this.spanHours.click(o.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(o.proxy(this.toggleView,this,"minutes")),T.on("focus.clockpicker click.clockpicker",o.proxy(this.show,this)),M.on("click.clockpicker",o.proxy(this.toggle,this));var $,A,I,N,F=o('<div class="clockpicker-tick"></div>');if(a.twelvehour)for($=1;$<13;$+=1)A=F.clone(),I=$/6*Math.PI,N=b,A.css("font-size","120%"),A.css({left:y+Math.sin(I)*N-k,top:y-Math.cos(I)*N-k}),A.html(0===$?"00":$),g.append(A),A.on(f,c);else for($=0;$<24;$+=1){A=F.clone(),I=$/6*Math.PI;var P=$>0&&$<13;N=P?w:b,A.css({left:y+Math.sin(I)*N-k,top:y-Math.cos(I)*N-k}),P&&A.css("font-size","120%"),A.html(0===$?"00":$),g.append(A),A.on(f,c)}for($=0;$<60;$+=5)A=F.clone(),I=$/30*Math.PI,A.css({left:y+Math.sin(I)*b-k,top:y-Math.cos(I)*b-k}),A.css("font-size","120%"),A.html(e($)),v.append(A),A.on(f,c);if(d.on(f,function(t){0===o(t.target).closest(".clockpicker-tick").length&&c(t,!0)}),h){var O=u.find(".clockpicker-canvas"),H=t("svg");H.setAttribute("class","clockpicker-svg"),H.setAttribute("width",x),H.setAttribute("height",x);var z=t("g");z.setAttribute("transform","translate("+y+","+y+")");var R=t("circle");R.setAttribute("class","clockpicker-canvas-bearing"),R.setAttribute("cx",0),R.setAttribute("cy",0),R.setAttribute("r",2);var U=t("line");U.setAttribute("x1",0),U.setAttribute("y1",0);var B=t("circle");B.setAttribute("class","clockpicker-canvas-bg"),B.setAttribute("r",k);var W=t("circle");W.setAttribute("class","clockpicker-canvas-fg"),W.setAttribute("r",3.5),z.appendChild(U),z.appendChild(B),z.appendChild(W),z.appendChild(R),H.appendChild(z),O.append(H),this.hand=U,this.bg=B,this.fg=W,this.bearing=R,this.g=z,this.canvas=O}r(this.options.init)}function r(t){t&&"function"==typeof t&&t()}var s,o=window.jQuery,a=o(window),l=o(document),c="http://www.w3.org/2000/svg",h="SVGAngle"in window&&function(){var t,e=document.createElement("div");return e.innerHTML="<svg/>",t=(e.firstChild&&e.firstChild.namespaceURI)==c,e.innerHTML="",t}(),u=function(){var t=document.createElement("div").style;return"transition"in t||"WebkitTransition"in t||"MozTransition"in t||"msTransition"in t||"OTransition"in t}(),d="ontouchstart"in window,f="mousedown"+(d?" touchstart":""),p="mousemove.clockpicker"+(d?" touchmove.clockpicker":""),m="mouseup.clockpicker"+(d?" touchend.clockpicker":""),g=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,v=0,y=100,b=80,w=54,k=13,x=2*y,_=u?350:1,C=['<div class="popover clockpicker-popover">','<div class="arrow"></div>','<div class="popover-title">','<span class="clockpicker-span-hours text-primary"></span>'," : ",'<span class="clockpicker-span-minutes"></span>','<span class="clockpicker-span-am-pm"></span>',"</div>",'<div class="popover-content">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<span class="clockpicker-am-pm-block">',"</span>","</div>","</div>"].join("");n.DEFAULTS={"default":"",fromnow:0,placement:"bottom",align:"left",donetext:"\u5b8c\u6210",autoclose:!1,twelvehour:!1,vibrate:!0},n.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},n.prototype.locate=function(){var t=this.element,e=this.popover,i=t.offset(),n=t.outerWidth(),r=t.outerHeight(),s=this.options.placement,o=this.options.align,a={};switch(e.show(),s){case"bottom":a.top=i.top+r;break;case"right":a.left=i.left+n;break;case"top":a.top=i.top-e.outerHeight();break;case"left":a.left=i.left-e.outerWidth()}switch(o){case"left":a.left=i.left;break;case"right":a.left=i.left+n-e.outerWidth();break;case"top":a.top=i.top;break;case"bottom":a.top=i.top+r-e.outerHeight()}e.css(a)},n.prototype.show=function(){if(!this.isShown){r(this.options.beforeShow);var t=this;this.isAppended||(s=o(document.body).append(this.popover),a.on("resize.clockpicker"+this.id,function(){t.isShown&&t.locate()}),this.isAppended=!0);var i=((this.input.prop("value")||this.options["default"]||"")+"").split(":");if("now"===i[0]){var n=new Date(+new Date+this.options.fromnow);i=[n.getHours(),n.getMinutes()]}this.hours=+i[0]||0,this.minutes=+i[1]||0,this.spanHours.html(e(this.hours)),this.spanMinutes.html(e(this.minutes)),this.toggleView("hours"),this.locate(),this.isShown=!0,l.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(e){var i=o(e.target);0===i.closest(t.popover).length&&0===i.closest(t.addon).length&&0===i.closest(t.input).length&&t.hide()}),l.on("keyup.clockpicker."+this.id,function(e){27===e.keyCode&&t.hide()}),r(this.options.afterShow)}},n.prototype.hide=function(){r(this.options.beforeHide),this.isShown=!1,l.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),l.off("keyup.clockpicker."+this.id),this.popover.hide(),r(this.options.afterHide)},n.prototype.toggleView=function(t,e){var i=!1;"minutes"===t&&"visible"===o(this.hoursView).css("visibility")&&(r(this.options.beforeHourSelect),i=!0);var n="hours"===t,s=n?this.hoursView:this.minutesView,a=n?this.minutesView:this.hoursView;this.currentView=t,this.spanHours.toggleClass("text-primary",n),this.spanMinutes.toggleClass("text-primary",!n),a.addClass("clockpicker-dial-out"),s.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(e),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){a.css("visibility","hidden")},_),i&&r(this.options.afterHourSelect)},n.prototype.resetClock=function(t){var e=this.currentView,i=this[e],n="hours"===e,r=Math.PI/(n?6:30),s=i*r,o=n&&i>0&&i<13?w:b,a=Math.sin(s)*o,l=-Math.cos(s)*o,c=this;h&&t?(c.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){c.canvas.removeClass("clockpicker-canvas-out"),c.setHand(a,l)},t)):this.setHand(a,l)},n.prototype.setHand=function(t,i,n,r){var s,a=Math.atan2(t,-i),l="hours"===this.currentView,c=Math.PI/(l||n?6:30),u=Math.sqrt(t*t+i*i),d=this.options,f=l&&u<(b+w)/2,p=f?w:b;if(d.twelvehour&&(p=b),a<0&&(a=2*Math.PI+a),s=Math.round(a/c),a=s*c,d.twelvehour?l?0===s&&(s=12):(n&&(s*=5),60===s&&(s=0)):l?(12===s&&(s=0),s=f?0===s?12:s:0===s?0:s+12):(n&&(s*=5),60===s&&(s=0)),this[this.currentView]!==s&&g&&this.options.vibrate&&(this.vibrateTimer||(navigator[g](10),this.vibrateTimer=setTimeout(o.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=s,this[l?"spanHours":"spanMinutes"].html(e(s)),!h)return void this[l?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var t=o(this);t.toggleClass("active",s===+t.html())});r||!l&&s%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg"));var m=Math.sin(a)*p,v=-Math.cos(a)*p;this.hand.setAttribute("x2",m),this.hand.setAttribute("y2",v),this.bg.setAttribute("cx",m),this.bg.setAttribute("cy",v),this.fg.setAttribute("cx",m),this.fg.setAttribute("cy",v)},n.prototype.done=function(){r(this.options.beforeDone),this.hide();var t=this.input.prop("value"),i=e(this.hours)+":"+e(this.minutes);this.options.twelvehour&&(i+=this.amOrPm),this.input.prop("value",i),i!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),r(this.options.afterDone)},n.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.addon.off("click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(a.off("resize.clockpicker"+this.id),this.popover.remove())},o.fn.clockpicker=function(t){var e=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=o(this),r=i.data("clockpicker");if(r)"function"==typeof r[t]&&r[t].apply(r,e);else{var s=o.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);i.data("clockpicker",new n(i,s))}})}}(),function(t,e){if("function"==typeof define&&define.amd)define(["moment","jquery","exports"],function(i,n,r){t.daterangepicker=e(t,r,i,n)});else if("undefined"!=typeof exports){var i,n=require("moment");try{i=require("jquery")}catch(t){if(!(i=window.jQuery))throw new Error("jQuery dependency not found")}e(t,exports,n,i)}else t.daterangepicker=e(t,{},t.moment,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){var r=function(t,e,i){this.parentEl="body",this.element=n(t),this.isShowing=!1,"object"==typeof e&&null!==e||(e={}),this.parentEl=n("object"==typeof e&&e.parentEl&&n(e.parentEl).length?e.parentEl:this.parentEl),this.container=n('<div class="daterangepicker dropdown-menu"><div class="calendar first left"></div><div class="calendar second right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value="" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value="" /></div><button class="applyBtn" disabled="disabled"></button>&nbsp;<button class="cancelBtn"></button></div></div></div>').appendTo(this.parentEl),this.setOptions(e,i),this.container.find(".calendar").on("click.daterangepicker",".prev",n.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",n.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",n.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",n.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",n.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",n.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",n.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",n.proxy(this.updateTime,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",n.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",n.proxy(this.clickCancel,this)).on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",n.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",n.proxy(this.inputsChanged,this)).on("keydown.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",n.proxy(this.inputsKeydown,this)).on("click.daterangepicker","li",n.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",n.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",n.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":n.proxy(this.show,this),"focus.daterangepicker":n.proxy(this.show,this),"keyup.daterangepicker":n.proxy(this.updateFromControl,this),"keydown.daterangepicker":n.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",n.proxy(this.toggle,this))};r.prototype={constructor:r,setOptions:function(t,e){if(this.startDate=i().startOf("day"),this.endDate=i().endOf("day"),this.timeZone=i().utcOffset(),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerSeconds=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.singleDatePicker=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses=["btn","btn-small btn-sm"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.separator=" - ",this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:i.weekdaysMin(),monthNames:i.monthsShort(),firstDay:i.localeData()._week.dow},this.cb=function(){},"string"==typeof t.format&&(this.format=t.format),"string"==typeof t.separator&&(this.separator=t.separator),"string"==typeof t.startDate&&(this.startDate=i(t.startDate,this.format)),"string"==typeof t.endDate&&(this.endDate=i(t.endDate,this.format)),"string"==typeof t.minDate&&(this.minDate=i(t.minDate,this.format)),"string"==typeof t.maxDate&&(this.maxDate=i(t.maxDate,this.format)),"object"==typeof t.startDate&&(this.startDate=i(t.startDate)),"object"==typeof t.endDate&&(this.endDate=i(t.endDate)),"object"==typeof t.minDate&&(this.minDate=i(t.minDate)),"object"==typeof t.maxDate&&(this.maxDate=i(t.maxDate)),"string"==typeof t.applyClass&&(this.applyClass=t.applyClass),"string"==typeof t.cancelClass&&(this.cancelClass=t.cancelClass),"object"==typeof t.dateLimit&&(this.dateLimit=t.dateLimit),"object"==typeof t.locale&&("object"==typeof t.locale.daysOfWeek&&(this.locale.daysOfWeek=t.locale.daysOfWeek.slice()),"object"==typeof t.locale.monthNames&&(this.locale.monthNames=t.locale.monthNames.slice()),"number"==typeof t.locale.firstDay&&(this.locale.firstDay=t.locale.firstDay),"string"==typeof t.locale.applyLabel&&(this.locale.applyLabel=t.locale.applyLabel),"string"==typeof t.locale.cancelLabel&&(this.locale.cancelLabel=t.locale.cancelLabel),"string"==typeof t.locale.fromLabel&&(this.locale.fromLabel=t.locale.fromLabel),"string"==typeof t.locale.toLabel&&(this.locale.toLabel=t.locale.toLabel),"string"==typeof t.locale.weekLabel&&(this.locale.weekLabel=t.locale.weekLabel),"string"==typeof t.locale.customRangeLabel&&(this.locale.customRangeLabel=t.locale.customRangeLabel)),"string"==typeof t.opens&&(this.opens=t.opens),"string"==typeof t.drops&&(this.drops=t.drops),"boolean"==typeof t.showWeekNumbers&&(this.showWeekNumbers=t.showWeekNumbers),"string"==typeof t.buttonClasses&&(this.buttonClasses=[t.buttonClasses]),"object"==typeof t.buttonClasses&&(this.buttonClasses=t.buttonClasses),"boolean"==typeof t.showDropdowns&&(this.showDropdowns=t.showDropdowns),"boolean"==typeof t.singleDatePicker&&(this.singleDatePicker=t.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof t.timePicker&&(this.timePicker=t.timePicker),"boolean"==typeof t.timePickerSeconds&&(this.timePickerSeconds=t.timePickerSeconds),"number"==typeof t.timePickerIncrement&&(this.timePickerIncrement=t.timePickerIncrement),"boolean"==typeof t.timePicker12Hour&&(this.timePicker12Hour=t.timePicker12Hour),0!=this.locale.firstDay)for(var r=this.locale.firstDay;r>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),r--;var s,o,a;if("undefined"==typeof t.startDate&&"undefined"==typeof t.endDate&&n(this.element).is("input[type=text]")){var l=n(this.element).val(),c=l.split(this.separator);s=o=null,2==c.length?(s=i(c[0],this.format),o=i(c[1],this.format)):this.singleDatePicker&&""!==l&&(s=i(l,this.format),o=i(l,this.format)),null!==s&&null!==o&&(this.startDate=s,this.endDate=o)}if("string"==typeof t.timeZone||"number"==typeof t.timeZone?("string"==typeof t.timeZone&&"undefined"!=typeof i.tz?this.timeZone=-1*i.tz.zone(t.timeZone).parse(new Date):this.timeZone=t.timeZone,this.startDate.utcOffset(this.timeZone),this.endDate.utcOffset(this.timeZone)):this.timeZone=i(this.startDate).utcOffset(),"object"==typeof t.ranges){for(a in t.ranges)s="string"==typeof t.ranges[a][0]?i(t.ranges[a][0],this.format):i(t.ranges[a][0]),o="string"==typeof t.ranges[a][1]?i(t.ranges[a][1],this.format):i(t.ranges[a][1]),this.minDate&&s.isBefore(this.minDate)&&(s=i(this.minDate)),this.maxDate&&o.isAfter(this.maxDate)&&(o=i(this.maxDate)),this.minDate&&o.isBefore(this.minDate)||this.maxDate&&s.isAfter(this.maxDate)||(this.ranges[a]=[s,o]);var h="<ul>";for(a in this.ranges)h+="<li>"+a+"</li>";h+="<li>"+this.locale.customRangeLabel+"</li>",h+="</ul>",this.container.find(".ranges ul").remove(),this.container.find(".ranges").prepend(h)}if("function"==typeof e&&(this.cb=e),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day")),this.singleDatePicker?(this.opens="right",this.container.addClass("single"),this.container.find(".calendar.right").show(),this.container.find(".calendar.left").hide(),this.timePicker?this.container.find(".ranges .daterangepicker_start_input, .ranges .daterangepicker_end_input").hide():this.container.find(".ranges").hide(),this.container.find(".calendar.right").hasClass("single")||this.container.find(".calendar.right").addClass("single")):(this.container.removeClass("single"),this.container.find(".calendar.right").removeClass("single"),this.container.find(".ranges").show()),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.oldChosenLabel=this.chosenLabel,this.leftCalendar={month:i([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute(),this.startDate.second()]),calendar:[]},this.rightCalendar={month:i([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute(),this.endDate.second()]),calendar:[]},"right"==this.opens||"center"==this.opens){var u=this.container.find(".calendar.first"),d=this.container.find(".calendar.second");d.hasClass("single")&&(d.removeClass("single"),u.addClass("single")),u.removeClass("left").addClass("right"),d.removeClass("right").addClass("left"),this.singleDatePicker&&(u.show(),d.hide())}"undefined"!=typeof t.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.removeClass("opensleft opensright").addClass("opens"+this.opens),this.updateView(),this.updateCalendars();var f=this.container;n.each(this.buttonClasses,function(t,e){f.find("button").addClass(e)}),this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel),this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel)},setStartDate:function(t){"string"==typeof t&&(this.startDate=i(t,this.format).utcOffset(this.timeZone)),"object"==typeof t&&(this.startDate=i(t)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.oldStartDate=this.startDate.clone(),this.updateView(),this.updateCalendars(),this.updateInputText()},setEndDate:function(t){"string"==typeof t&&(this.endDate=i(t,this.format).utcOffset(this.timeZone)),"object"==typeof t&&(this.endDate=i(t)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.oldEndDate=this.endDate.clone(),this.updateView(),this.updateCalendars(),this.updateInputText()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")&&this.element.val().length){var t=this.element.val().split(this.separator),e=null,n=null;2===t.length&&(e=i(t[0],this.format).utcOffset(this.timeZone),n=i(t[1],this.format).utcOffset(this.timeZone)),(this.singleDatePicker||null===e||null===n)&&(e=i(this.element.val(),this.format).utcOffset(this.timeZone),n=e),n.isBefore(e)||(this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.startDate=e,this.endDate=n,this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.updateCalendars())}},keydown:function(t){9!==t.keyCode&&13!==t.keyCode||this.hide()},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var t,e={top:0,left:0},i=n(window).width();this.parentEl.is("body")||(e={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},i=this.parentEl[0].clientWidth+this.parentEl.offset().left),t="up"==this.drops?this.element.offset().top-this.container.outerHeight()-e.top:this.element.offset().top+this.element.outerHeight()-e.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:t,right:i-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:t,left:this.element.offset().left-e.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:t,left:this.element.offset().left-e.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>n(window).width()&&this.container.css({left:"auto",right:0}))},toggle:function(){this.element.hasClass("active")?this.hide():this.show()},show:function(){this.isShowing||(this.element.addClass("active"),this.container.show(),this.move(),this._outsideClickProxy=n.proxy(function(t){this.outsideClick(t)},this),n(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),this.isShowing=!0,this.element.trigger("show.daterangepicker",this))},outsideClick:function(t){var e=n(t.target);"focusin"==t.type||e.closest(this.element).length||e.closest(this.container).length||e.closest(".calendar-date").length||this.hide()},hide:function(){this.isShowing&&(n(document).off(".daterangepicker"),this.element.removeClass("active"),this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.isShowing=!1,this.element.trigger("hide.daterangepicker",this))},enterRange:function(t){var e=t.target.innerHTML;if(e==this.locale.customRangeLabel)this.updateView();else{var i=this.ranges[e];this.container.find("input[name=daterangepicker_start]").val(i[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(i[1].format(this.format))}},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},inputsChanged:function(t){var e=n(t.target),r=i(e.val(),this.format);if(r.isValid()){var s,o;"daterangepicker_start"===e.attr("name")?(s=!1!==this.minDate&&r.isBefore(this.minDate)?this.minDate:r,o=this.endDate):(s=this.startDate,o=!1!==this.maxDate&&r.isAfter(this.maxDate)?this.maxDate:r),this.setCustomDates(s,o)}},inputsKeydown:function(t){13===t.keyCode&&(this.inputsChanged(t),this.notify())},updateInputText:function(){this.element.is("input")&&!this.singleDatePicker?(this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format)),this.element.trigger("change")):this.element.is("input")&&(this.element.val(this.endDate.format(this.format)),this.element.trigger("change"))},clickRange:function(t){var e=t.target.innerHTML;if(this.chosenLabel=e,e==this.locale.customRangeLabel)this.showCalendars();else{var i=this.ranges[e];this.startDate=i[0],this.endDate=i[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.hideCalendars(),this.hide(),this.element.trigger("apply.daterangepicker",this)}},clickPrev:function(t){n(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.subtract(1,"month"):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(t){n(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):this.rightCalendar.month.add(1,"month"),this.updateCalendars()},hoverDate:function(t){var e=n(t.target).attr("data-title"),i=e.substr(1,1),r=e.substr(3,1);n(t.target).parents(".calendar").hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[i][r].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[i][r].format(this.format))},setCustomDates:function(t,e){if(this.chosenLabel=this.locale.customRangeLabel,t.isAfter(e)){var n=this.endDate.diff(this.startDate);e=i(t).add(n,"ms"),this.maxDate&&e.isAfter(this.maxDate)&&(e=this.maxDate.clone())}this.startDate=t,this.endDate=e,this.updateView(),this.updateCalendars()},clickDate:function(t){var e,r,s=n(t.target).attr("data-title"),o=s.substr(1,1),a=s.substr(3,1),l=n(t.target).parents(".calendar");if(l.hasClass("left")){if(e=this.leftCalendar.calendar[o][a],r=this.endDate,"object"==typeof this.dateLimit){var c=i(e).add(this.dateLimit).startOf("day");r.isAfter(c)&&(r=c)}}else if(e=this.startDate,r=this.rightCalendar.calendar[o][a],"object"==typeof this.dateLimit){var h=i(r).subtract(this.dateLimit).startOf("day");e.isBefore(h)&&(e=h)}this.singleDatePicker&&l.hasClass("left")?r=e.clone():this.singleDatePicker&&l.hasClass("right")&&(e=r.clone()),l.find("td").removeClass("active"),n(t.target).addClass("active"),this.setCustomDates(e,r),this.timePicker||r.endOf("day"),this.singleDatePicker&&!this.timePicker&&this.clickApply()},clickApply:function(){this.updateInputText(),this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.chosenLabel=this.oldChosenLabel,this.updateView(),this.updateCalendars(),this.hide(),this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(t){var e=n(t.target).closest(".calendar").hasClass("left"),i=e?"left":"right",r=this.container.find(".calendar."+i),s=parseInt(r.find(".monthselect").val(),10),o=r.find(".yearselect").val();e||this.singleDatePicker||(o<this.startDate.year()||o==this.startDate.year()&&s<this.startDate.month())&&(s=this.startDate.month(),o=this.startDate.year()),this.minDate&&(o<this.minDate.year()||o==this.minDate.year()&&s<this.minDate.month())&&(s=this.minDate.month(),o=this.minDate.year()),this.maxDate&&(o>this.maxDate.year()||o==this.maxDate.year()&&s>this.maxDate.month())&&(s=this.maxDate.month(),o=this.maxDate.year()),this[i+"Calendar"].month.month(s).year(o),this.updateCalendars()},updateTime:function(t){var e=n(t.target).closest(".calendar"),i=e.hasClass("left"),r=parseInt(e.find(".hourselect").val(),10),s=parseInt(e.find(".minuteselect").val(),10),o=0;if(this.timePickerSeconds&&(o=parseInt(e.find(".secondselect").val(),10)),this.timePicker12Hour){var a=e.find(".ampmselect").val();"PM"===a&&r<12&&(r+=12),"AM"===a&&12===r&&(r=0)}if(i){var l=this.startDate.clone();l.hour(r),l.minute(s),l.second(o),this.startDate=l,this.leftCalendar.month.hour(r).minute(s).second(o),this.singleDatePicker&&(this.endDate=l.clone())}else{var c=this.endDate.clone();c.hour(r),c.minute(s),c.second(o),this.endDate=c,this.singleDatePicker&&(this.startDate=c.clone()),this.rightCalendar.month.hour(r).minute(s).second(o)}this.updateView(),this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),this.leftCalendar.month.second(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),this.rightCalendar.month.second(),"right"),this.container.find(".calendar.left").empty().html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate,"left")),this.container.find(".calendar.right").empty().html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.singleDatePicker?this.minDate:this.startDate,this.maxDate,"right")),this.container.find(".ranges li").removeClass("active");var t=!0,e=0;for(var i in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[i][0])&&this.endDate.isSame(this.ranges[i][1])&&(t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").html()):this.startDate.format("YYYY-MM-DD")==this.ranges[i][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[i][1].format("YYYY-MM-DD")&&(t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").html()),e++;t&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars())},buildCalendar:function(t,e,n,r,s,o){var a,l=i([e,t]).daysInMonth(),c=i([e,t,1]),h=i([e,t,l]),u=i(c).subtract(1,"month").month(),d=i(c).subtract(1,"month").year(),f=i([d,u]).daysInMonth(),p=c.day(),m=[];for(m.firstDay=c,m.lastDay=h,a=0;a<6;a++)m[a]=[];var g=f-p+this.locale.firstDay+1;g>f&&(g-=7),p==this.locale.firstDay&&(g=f-6);var v,y,b=i([d,u,g,12,r,s]).utcOffset(this.timeZone);for(a=0,v=0,y=0;a<42;a++,v++,b=i(b).add(24,"hour"))a>0&&v%7==0&&(v=0,y++),m[y][v]=b.clone().hour(n),b.hour(12),this.minDate&&m[y][v].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&m[y][v].isBefore(this.minDate)&&"left"==o&&(m[y][v]=this.minDate.clone()),this.maxDate&&m[y][v].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&m[y][v].isAfter(this.maxDate)&&"right"==o&&(m[y][v]=this.maxDate.clone());return m},renderDropdowns:function(t,e,i){for(var n=t.month(),r=t.year(),s=i&&i.year()||r+5,o=e&&e.year()||r-50,a='<select class="monthselect">',l=r==o,c=r==s,h=0;h<12;h++)(!l||h>=e.month())&&(!c||h<=i.month())&&(a+="<option value='"+h+"'"+(h===n?" selected='selected'":"")+">"+this.locale.monthNames[h]+"</option>");a+="</select>";for(var u='<select class="yearselect">',d=o;d<=s;d++)u+='<option value="'+d+'"'+(d===r?' selected="selected"':"")+">"+d+"</option>";return u+="</select>",a+u},renderCalendar:function(t,e,i,r,s){var o='<div class="calendar-date">'
;o+='<table class="table-condensed">',o+="<thead>",o+="<tr>",this.showWeekNumbers&&(o+="<th></th>"),!i||i.isBefore(t.firstDay)?o+='<th class="prev available"><i class="fa fa-arrow-left icon icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>':o+="<th></th>";var a=this.locale.monthNames[t[1][1].month()]+t[1][1].format(" YYYY");this.showDropdowns&&(a=this.renderDropdowns(t[1][1],i,r)),o+='<th colspan="5" class="month">'+a+"</th>",!r||r.isAfter(t.lastDay)?o+='<th class="next available"><i class="fa fa-arrow-right icon icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>':o+="<th></th>",o+="</tr>",o+="<tr>",this.showWeekNumbers&&(o+='<th class="week">'+this.locale.weekLabel+"</th>"),n.each(this.locale.daysOfWeek,function(t,e){o+="<th>"+e+"</th>"}),o+="</tr>",o+="</thead>",o+="<tbody>";for(var l=0;l<6;l++){o+="<tr>",this.showWeekNumbers&&(o+='<td class="week">'+t[l][0].week()+"</td>");for(var c=0;c<7;c++){var h="available ";h+=t[l][c].month()==t[1][1].month()?"":"off",i&&t[l][c].isBefore(i,"day")||r&&t[l][c].isAfter(r,"day")?h=" off disabled ":t[l][c].format("YYYY-MM-DD")==e.format("YYYY-MM-DD")?(h+=" active ",t[l][c].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(h+=" start-date "),t[l][c].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(h+=" end-date ")):t[l][c]>=this.startDate&&t[l][c]<=this.endDate&&(h+=" in-range ",t[l][c].isSame(this.startDate)&&(h+=" start-date "),t[l][c].isSame(this.endDate)&&(h+=" end-date "));var u="r"+l+"c"+c;o+='<td class="'+h.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+u+'">'+t[l][c].date()+"</td>"}o+="</tr>"}o+="</tbody>",o+="</table>",o+="</div>";var d;if(this.timePicker){o+='<div class="calendar-time">',o+='<select class="hourselect">';var f=0,p=23;i&&("left"==s||this.singleDatePicker)&&e.format("YYYY-MM-DD")==i.format("YYYY-MM-DD")&&(f=i.hour(),e.hour()<f&&e.hour(f),this.timePicker12Hour&&f>=12&&e.hour()>=12&&(f-=12),this.timePicker12Hour&&12==f&&(f=1)),r&&("right"==s||this.singleDatePicker)&&e.format("YYYY-MM-DD")==r.format("YYYY-MM-DD")&&(p=r.hour(),e.hour()>p&&e.hour(p),this.timePicker12Hour&&p>=12&&e.hour()>=12&&(p-=12));var m=0,g=23,v=e.hour();for(this.timePicker12Hour&&(m=1,g=12,v>=12&&(v-=12),0===v&&(v=12)),d=m;d<=g;d++)o+=d==v?'<option value="'+d+'" selected="selected">'+d+"</option>":d<f||d>p?'<option value="'+d+'" disabled="disabled" class="disabled">'+d+"</option>":'<option value="'+d+'">'+d+"</option>";o+="</select> : ",o+='<select class="minuteselect">';var y=0,b=59;for(i&&("left"==s||this.singleDatePicker)&&e.format("YYYY-MM-DD h A")==i.format("YYYY-MM-DD h A")&&(y=i.minute(),e.minute()<y&&e.minute(y)),r&&("right"==s||this.singleDatePicker)&&e.format("YYYY-MM-DD h A")==r.format("YYYY-MM-DD h A")&&(b=r.minute(),e.minute()>b&&e.minute(b)),d=0;d<60;d+=this.timePickerIncrement){var w=d;w<10&&(w="0"+w),d==e.minute()?o+='<option value="'+d+'" selected="selected">'+w+"</option>":o+=d<y||d>b?'<option value="'+d+'" disabled="disabled" class="disabled">'+w+"</option>":'<option value="'+d+'">'+w+"</option>"}if(o+="</select> ",this.timePickerSeconds){for(o+=': <select class="secondselect">',d=0;d<60;d+=this.timePickerIncrement){var w=d;w<10&&(w="0"+w),d==e.second()?o+='<option value="'+d+'" selected="selected">'+w+"</option>":o+='<option value="'+d+'">'+w+"</option>"}o+="</select>"}if(this.timePicker12Hour){o+='<select class="ampmselect">';var k="",x="";i&&("left"==s||this.singleDatePicker)&&e.format("YYYY-MM-DD")==i.format("YYYY-MM-DD")&&i.hour()>=12&&(k=' disabled="disabled" class="disabled"'),r&&("right"==s||this.singleDatePicker)&&e.format("YYYY-MM-DD")==r.format("YYYY-MM-DD")&&r.hour()<12&&(x=' disabled="disabled" class="disabled"'),e.hour()>=12?o+='<option value="AM"'+k+'>AM</option><option value="PM" selected="selected"'+x+">PM</option>":o+='<option value="AM" selected="selected"'+k+'>AM</option><option value="PM"'+x+">PM</option>",o+="</select>"}o+="</div>"}return o},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData("daterangepicker")}},n.fn.daterangepicker=function(t,e){return this.each(function(){var i=n(this);i.data("daterangepicker")&&i.data("daterangepicker").remove(),i.data("daterangepicker",new r(i,t,e))}),this}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var e;return function(){if(!e||!e.requirejs){e?i=e:e={};var t,i,n;!function(e){function r(t,e){return w.call(t,e)}function s(t,e){var i,n,r,s,o,a,l,c,h,u,d,f=e&&e.split("/"),p=y.map,m=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=t.split("/"),o=t.length-1,y.nodeIdCompat&&x.test(t[o])&&(t[o]=t[o].replace(x,"")),t=f.concat(t),h=0;h<t.length;h+=1)if("."===(d=t[h]))t.splice(h,1),h-=1;else if(".."===d){if(1===h&&(".."===t[2]||".."===t[0]))break;h>0&&(t.splice(h-1,2),h-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||m)&&p){for(i=t.split("/"),h=i.length;h>0;h-=1){if(n=i.slice(0,h).join("/"),f)for(u=f.length;u>0;u-=1)if((r=p[f.slice(0,u).join("/")])&&(r=r[n])){s=r,a=h;break}if(s)break;!l&&m&&m[n]&&(l=m[n],c=h)}!s&&l&&(s=l,a=c),s&&(i.splice(0,a,s),t=i.join("/"))}return t}function o(t,i){return function(){return f.apply(e,k.call(arguments,0).concat([t,i]))}}function a(t){return function(e){return s(e,t)}}function l(t){return function(e){g[t]=e}}function c(t){if(r(v,t)){var i=v[t];delete v[t],b[t]=!0,d.apply(e,i)}if(!r(g,t)&&!r(b,t))throw new Error("No "+t);return g[t]}function h(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function u(t){return function(){return y&&y.config&&y.config[t]||{}}}var d,f,p,m,g={},v={},y={},b={},w=Object.prototype.hasOwnProperty,k=[].slice,x=/\.js$/;p=function(t,e){var i,n=h(t),r=n[0];return t=n[1],r&&(r=s(r,e),i=c(r)),r?t=i&&i.normalize?i.normalize(t,a(e)):s(t,e):(t=s(t,e),n=h(t),r=n[0],t=n[1],r&&(i=c(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:i}},m={require:function(t){return o(t)},exports:function(t){var e=g[t];return void 0!==e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:u(t)}}},d=function(t,i,n,s){var a,h,u,d,f,y,w=[],k=typeof n;if(s=s||t,"undefined"===k||"function"===k){for(i=!i.length&&n.length?["require","exports","module"]:i,f=0;f<i.length;f+=1)if(d=p(i[f],s),"require"===(h=d.f))w[f]=m.require(t);else if("exports"===h)w[f]=m.exports(t),y=!0;else if("module"===h)a=w[f]=m.module(t);else if(r(g,h)||r(v,h)||r(b,h))w[f]=c(h);else{if(!d.p)throw new Error(t+" missing "+h);d.p.load(d.n,o(s,!0),l(h),{}),w[f]=g[h]}u=n?n.apply(g[t],w):void 0,t&&(a&&a.exports!==e&&a.exports!==g[t]?g[t]=a.exports:u===e&&y||(g[t]=u))}else t&&(g[t]=n)},t=i=f=function(t,i,n,r,s){if("string"==typeof t)return m[t]?m[t](i):c(p(t,i).f);if(!t.splice){if(y=t,y.deps&&f(y.deps,y.callback),!i)return;i.splice?(t=i,i=n,n=null):t=e}return i=i||function(){},"function"==typeof n&&(n=r,r=s),r?d(e,t,i,n):setTimeout(function(){d(e,t,i,n)},4),f},f.config=function(t){return f(t)},t._defined=g,n=function(t,e,i){e.splice||(i=e,e=[]),r(g,t)||r(v,t)||(v[t]=[t,e,i])},n.amd={jQuery:!0}}(),e.requirejs=t,e.require=i,e.define=n}}(),e.define("almond",function(){}),e.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(t){function e(t){var e=t.prototype,i=[];for(var n in e){"function"==typeof e[n]&&"constructor"!==n&&i.push(n)}return i}var i={};i.Extend=function(t,e){function i(){this.constructor=t}var n={}.hasOwnProperty;for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},i.Decorate=function(t,i){function n(){var e=Array.prototype.unshift,n=i.prototype.constructor.length,r=t.prototype.constructor;n>0&&(e.call(arguments,t.prototype.constructor),r=i.prototype.constructor),r.apply(this,arguments)}function r(){this.constructor=n}var s=e(i),o=e(t);i.displayName=t.displayName,n.prototype=new r;for(var a=0;a<o.length;a++){var l=o[a];n.prototype[l]=t.prototype[l]}for(var c=(function(t){var e=function(){};t in n.prototype&&(e=n.prototype[t]);var r=i.prototype[t];return function(){return Array.prototype.unshift.call(arguments,e),r.apply(this,arguments)}}),h=0;h<s.length;h++){var u=s[h];n.prototype[u]=c(u)}return n};var n=function(){this.listeners={}};return n.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},n.prototype.trigger=function(t){var e=Array.prototype.slice;this.listeners=this.listeners||{},t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},n.prototype.invoke=function(t,e){for(var i=0,n=t.length;n>i;i++)t[i].apply(this,e)},i.Observable=n,i.generateChars=function(t){for(var e="",i=0;t>i;i++){e+=Math.floor(36*Math.random()).toString(36)}return e},i.bind=function(t,e){return function(){t.apply(e,arguments)}},i._convertData=function(t){for(var e in t){var i=e.split("-"),n=t;if(1!==i.length){for(var r=0;r<i.length;r++){var s=i[r];s=s.substring(0,1).toLowerCase()+s.substring(1),s in n||(n[s]={}),r==i.length-1&&(n[s]=t[e]),n=n[s]}delete t[e]}}return t},i.hasScroll=function(e,i){var n=t(i),r=i.style.overflowX,s=i.style.overflowY;return(r!==s||"hidden"!==s&&"visible"!==s)&&("scroll"===r||"scroll"===s||(n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth))},i.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})},i.appendMany=function(e,i){if("1.7"===t.fn.jquery.substr(0,3)){var n=t();t.map(i,function(t){n=n.add(t)}),i=n}e.append(i)},i}),e.define("select2/results",["jquery","./utils"],function(t,e){function i(t,e,n){this.$element=t,this.data=n,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=t('<li role="treeitem" class="select2-results__option"></li>'),r=this.options.get("translations").get(e.message);n.append(i(r(e.args))),this.$results.append(n)},i.prototype.append=function(t){this.hideLoading();var e=[];if(null==t.results||0===t.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i],r=this.option(n);e.push(r)}this.$results.append(e)},i.prototype.position=function(t,e){e.find(".select2-results").append(t)},i.prototype.sort=function(t){return this.options.get("sorter")(t)},i.prototype.setClasses=function(){var e=this;this.data.current(function(i){var n=t.map(i,function(t){return t.id.toString()}),r=e.$results.find(".select2-results__option[aria-selected]");r.each(function(){var e=t(this),i=t.data(this,"data"),r=""+i.id;null!=i.element&&i.element.selected||null==i.element&&t.inArray(r,n)>-1?e.attr("aria-selected","true"):e.attr("aria-selected","false")});var s=r.filter("[aria-selected=true]");s.length>0?s.first().trigger("mouseenter"):r.first().trigger("mouseenter")})},i.prototype.showLoading=function(t){this.hideLoading();var e=this.options.get("translations").get("searching"),i={disabled:!0,loading:!0,text:e(t)},n=this.option(i);n.className+=" loading-results",this.$results.prepend(n)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(e){var i=document.createElement("li");i.className="select2-results__option";var n={role:"treeitem","aria-selected":"false"};e.disabled&&(delete n["aria-selected"],n["aria-disabled"]="true"),null==e.id&&delete n["aria-selected"],null!=e._resultId&&(i.id=e._resultId),e.title&&(i.title=e.title),e.children&&(n.role="group",n["aria-label"]=e.text,delete n["aria-selected"]);for(var r in n){var s=n[r];i.setAttribute(r,s)}if(e.children){var o=t(i),a=document.createElement("strong");a.className="select2-results__group",t(a),this.template(e,a);for(var l=[],c=0;c<e.children.length;c++){var h=e.children[c],u=this.option(h);l.push(u)}var d=t("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});d.append(l),o.append(a),o.append(d)}else this.template(e,i);return t.data(i,"data",e),i},i.prototype.bind=function(e){var i=this,n=e.id+"-results";this.$results.attr("id",n),e.on("results:all",function(t){i.clear(),i.append(t.data),e.isOpen()&&i.setClasses()}),e.on("results:append",function(t){i.append(t.data),e.isOpen()&&i.setClasses()}),e.on("query",function(t){i.showLoading(t)}),e.on("select",function(){e.isOpen()&&i.setClasses()}),e.on("unselect",function(){e.isOpen()&&i.setClasses()}),e.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),e.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),e.on("results:toggle",function(){var t=i.getHighlightedResults();0!==t.length&&t.trigger("mouseup")}),e.on("results:select",function(){var t=i.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?i.trigger("close"):i.trigger("select",{data:e})}}),e.on("results:previous",function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t);if(0!==n){var r=n-1;0===t.length&&(r=0);var s=e.eq(r);s.trigger("mouseenter");var o=i.$results.offset().top,a=s.offset().top,l=i.$results.scrollTop()+(a-o);0===r?i.$results.scrollTop(0):0>a-o&&i.$results.scrollTop(l)}}),e.on("results:next",function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t),r=n+1;if(!(r>=e.length)){var s=e.eq(r);s.trigger("mouseenter");var o=i.$results.offset().top+i.$results.outerHeight(!1),a=s.offset().top+s.outerHeight(!1),l=i.$results.scrollTop()+a-o;0===r?i.$results.scrollTop(0):a>o&&i.$results.scrollTop(l)}}),e.on("results:focus",function(t){t.element.addClass("select2-results__option--highlighted")}),e.on("results:message",function(t){i.displayMessage(t)}),t.fn.mousewheel&&this.$results.on("mousewheel",function(t){var e=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-i.$results.scrollTop()+t.deltaY,r=t.deltaY>0&&e-t.deltaY<=0,s=t.deltaY<0&&n<=i.$results.height();r?(i.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):s&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),t.preventDefault(),t.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var n=t(this),r=n.data("data");return"true"===n.attr("aria-selected")?void(i.options.get("multiple")?i.trigger("unselect",{originalEvent:e,data:r}):i.trigger("close")):void i.trigger("select",{originalEvent:e,data:r})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var e=t(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:e,element:t(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]"),i=e.index(t),n=this.$results.offset().top,r=t.offset().top,s=this.$results.scrollTop()+(r-n),o=r-n;s-=2*t.outerHeight(!1),2>=i?this.$results.scrollTop(0):(o>this.$results.outerHeight()||0>o)&&this.$results.scrollTop(s)}},i.prototype.template=function(e,i){var n=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),s=n(e);null==s?i.style.display="none":"string"==typeof s?i.innerHTML=r(s):t(i).append(s)},i}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e,e},n.prototype.bind=function(t){var e=this,n=(t.id,t.id+"-results");this.container=t,this.$selection.on("focus",function(t){e.trigger("focus",t)}),this.$selection.on("blur",function(t){e.trigger("blur",t)}),this.$selection.on("keydown",function(t){e.trigger("keypress",t),t.which===i.SPACE&&t.preventDefault()}),t.on("results:focus",function(t){e.$selection.attr("aria-activedescendant",t.data._resultId)}),t.on("selection:update",function(t){e.update(t.data)}),t.on("open",function(){e.$selection.attr("aria-expanded","true"),e.$selection.attr("aria-owns",n),e._attachCloseHandler(t)}),t.on("close",function(){e.$selection.attr("aria-expanded","false"),e.$selection.removeAttr("aria-activedescendant"),e.$selection.removeAttr("aria-owns"),e.$selection.focus(),e._detachCloseHandler(t)}),t.on("enable",function(){e.$selection.attr("tabindex",e._tabindex)}),t.on("disable",function(){e.$selection.attr("tabindex","-1")})},n.prototype._attachCloseHandler=function(e){t(document.body).on("mousedown.select2."+e.id,function(e){var i=t(e.target),n=i.closest(".select2");t(".select2.select2-container--open").each(function(){var e=t(this);this!=n[0]&&e.data("element").select2("close")})})},n.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},n.prototype.position=function(t,e){e.find(".selection").append(t)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.")},n}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(t,e,i){function n(){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},n.prototype.bind=function(t){var e=this;n.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(t){1===t.which&&e.trigger("toggle",{originalEvent:t})}),this.$selection.on("focus",function(){}),this.$selection.on("blur",function(){}),t.on("selection:update",function(t){e.update(t.data)})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(t){var e=this.options.get("templateSelection");return this.options.get("escapeMarkup")(e(t))},n.prototype.selectionContainer=function(){return t("<span></span>")},n.prototype.update=function(t){if(0===t.length)return void this.clear();var e=t[0],i=this.display(e),n=this.$selection.find(".select2-selection__rendered");n.empty().append(i),n.prop("title",e.title||e.text)},n}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(t,e,i){function n(){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},n.prototype.bind=function(){var e=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",function(t){e.trigger("toggle",{originalEvent:t})}),this.$selection.on("click",".select2-selection__choice__remove",function(i){var n=t(this),r=n.parent(),s=r.data("data");e.trigger("unselect",{originalEvent:i,data:s})})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(t){var e=this.options.get("templateSelection");return this.options.get("escapeMarkup")(e(t))},n.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},n.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],n=0;n<t.length;n++){var r=t[n],s=this.display(r),o=this.selectionContainer();o.append(s),o.prop("title",r.title||r.text),o.data("data",r),e.push(o)}var a=this.$selection.find(".select2-selection__rendered");i.appendMany(a,e)}},n}),e.define("select2/selection/placeholder",["../utils"],function(){function t(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i)}return t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();return i.html(this.display(e)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},t.prototype.update=function(t,e){var i=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||i)return t.call(this,e);this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},t}),e.define("select2/selection/allowClear",["jquery","../keys"],function(t,e){function i(){}return i.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(t){n._handleClear(t)}),e.on("keypress",function(t){n._handleKeyboardClear(t,e)})},i.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){e.stopPropagation();for(var n=i.data("data"),r=0;r<n.length;r++){var s={data:n[r]};if(this.trigger("unselect",s),s.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle")}}},i.prototype._handleKeyboardClear=function(t,i,n){n.isOpen()||(i.which==e.DELETE||i.which==e.BACKSPACE)&&this._handleClear(i)},i.prototype.update=function(e,i){if(e.call(this,i),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var n=t('<span class="select2-selection__clear">&times;</span>');n.data("data",i),this.$selection.find(".select2-selection__rendered").prepend(n)}},i}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(t,e,i){function n(t,e,i){t.call(this,e,i)}return n.prototype.render=function(e){var i=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></li>');return this.$searchContainer=i,this.$search=i.find("input"),e.call(this)},n.prototype.bind=function(t,e,n){var r=this;t.call(this,e,n),e.on("open",function(){r.$search.attr("tabindex",0),r.$search.focus()}),e.on("close",function(){r.$search.attr("tabindex",-1),r.$search.val(""),r.$search.focus()}),e.on("enable",function(){r.$search.prop("disabled",!1)}),e.on("disable",function(){r.$search.prop("disabled",!0)}),this.$selection.on("focusin",".select2-search--inline",function(t){r.trigger("focus",t)}),this.$selection.on("focusout",".select2-search--inline",function(t){r.trigger("blur",t)}),this.$selection.on("keydown",".select2-search--inline",function(t){if(t.stopPropagation(),r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented(),t.which===i.BACKSPACE&&""===r.$search.val()){var e=r.$searchContainer.prev(".select2-selection__choice");if(e.length>0){var n=e.data("data");r.searchRemoveChoice(n),t.preventDefault()}}}),this.$selection.on("input",".select2-search--inline",function(){r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input",".select2-search--inline",function(t){r.handleSearch(t)})},n.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},n.prototype.update=function(t,e){this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch()},n.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.trigger("open"),this.$search.val(e.text+" ")},n.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";if(""!==this.$search.attr("placeholder"))t=this.$selection.find(".select2-selection__rendered").innerWidth();else{t=.75*(this.$search.val().length+1)+"em"}this.$search.css("width",t)},n}),e.define("select2/selection/eventRelay",["jquery"],function(t){function e(){}return e.prototype.bind=function(e,i,n){var r=this,s=["open","opening","close","closing","select","selecting","unselect","unselecting"],o=["opening","closing","selecting","unselecting"];e.call(this,i,n),i.on("*",function(e,i){if(-1!==t.inArray(e,s)){i=i||{};var n=t.Event("select2:"+e,{params:i});r.$element.trigger(n),-1!==t.inArray(e,o)&&(i.prevented=n.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,e){function i(t){this.dict=t||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(t){return this.dict[t]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(t){if(!(t in i._cache)){var n=e(t);i._cache[t]=n}return new i(i._cache[t])},i}),e.define("select2/diacritics",[],function(){return{"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c",
"\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"}}),e.define("select2/data/base",["../utils"],function(t){function e(){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,i){var n=e.id+"-result-";return n+=t.generateChars(4),n+=null!=i.id?"-"+i.id.toString():"-"+t.generateChars(4)},e}),e.define("select2/data/select",["./base","../utils","jquery"],function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,t),n.prototype.current=function(t){var e=[],n=this;this.$element.find(":selected").each(function(){var t=i(this),r=n.item(t);e.push(r)}),t(e)},n.prototype.select=function(t){var e=this;if(t.selected=!0,i(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(n){var r=[];t=[t],t.push.apply(t,n);for(var s=0;s<t.length;s++){var o=t[s].id;-1===i.inArray(o,r)&&r.push(o)}e.$element.val(r),e.$element.trigger("change")});else{var n=t.id;this.$element.val(n),this.$element.trigger("change")}},n.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple"))return t.selected=!1,i(t.element).is("option")?(t.element.selected=!1,void this.$element.trigger("change")):void this.current(function(n){for(var r=[],s=0;s<n.length;s++){var o=n[s].id;o!==t.id&&-1===i.inArray(o,r)&&r.push(o)}e.$element.val(r),e.$element.trigger("change")})},n.prototype.bind=function(t){var e=this;this.container=t,t.on("select",function(t){e.select(t.data)}),t.on("unselect",function(t){e.unselect(t.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})},n.prototype.query=function(t,e){var n=[],r=this;this.$element.children().each(function(){var e=i(this);if(e.is("option")||e.is("optgroup")){var s=r.item(e),o=r.matches(t,s);null!==o&&n.push(o)}}),e({results:n})},n.prototype.addOptions=function(t){e.appendMany(this.$element,t)},n.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup"),e.label=t.text):(e=document.createElement("option"),void 0!==e.textContent?e.textContent=t.text:e.innerText=t.text),t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var n=i(e),r=this._normalizeItem(t);return r.element=e,i.data(e,"data",r),n},n.prototype.item=function(t){var e={};if(null!=(e=i.data(t[0],"data")))return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var n=t.children("option"),r=[],s=0;s<n.length;s++){var o=i(n[s]),a=this.item(o);r.push(a)}e.children=r}return e=this._normalizeItem(e),e.element=t[0],i.data(t[0],"data",e),e},n.prototype._normalizeItem=function(t){i.isPlainObject(t)||(t={id:t,text:t}),t=i.extend({},{text:""},t);var e={selected:!1,disabled:!1};return null!=t.id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),i.extend({},e,t)},n.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},n}),e.define("select2/data/array",["./select","../utils","jquery"],function(t,e,i){function n(t,e){var i=e.get("data")||[];n.__super__.constructor.call(this,t,e),this.addOptions(this.convertToOptions(i))}return e.Extend(n,t),n.prototype.select=function(t){var e=this.$element.find("option").filter(function(e,i){return i.value==t.id.toString()});0===e.length&&(e=this.option(t),this.addOptions(e)),n.__super__.select.call(this,t)},n.prototype.convertToOptions=function(t){function n(t){return function(){return i(this).val()==t.id}}for(var r=this,s=this.$element.find("option"),o=s.map(function(){return r.item(i(this)).id}).get(),a=[],l=0;l<t.length;l++){var c=this._normalizeItem(t[l]);if(i.inArray(c.id,o)>=0){var h=s.filter(n(c)),u=this.item(h),d=(i.extend(!0,{},u,c),this.option(u));h.replaceWith(d)}else{var f=this.option(c);if(c.children){var p=this.convertToOptions(c.children);e.appendMany(f,p)}a.push(f)}}return a},n}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(t,e,i){function n(e,i){this.ajaxOptions=this._applyDefaults(i.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),t.__super__.constructor.call(this,e,i)}return e.Extend(n,t),n.prototype._applyDefaults=function(t){var e={data:function(t){return{q:t.term}},transport:function(t,e,n){var r=i.ajax(t);return r.then(e),r.fail(n),r}};return i.extend({},e,t,!0)},n.prototype.processResults=function(t){return t},n.prototype.query=function(t,e){function n(){var n=s.transport(s,function(n){var s=r.processResults(n,t);r.options.get("debug")&&window.console&&console.error&&(s&&s.results&&i.isArray(s.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(s)},function(){});r._request=n}var r=this;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var s=i.extend({type:"GET"},this.ajaxOptions);"function"==typeof s.url&&(s.url=s.url(t)),"function"==typeof s.data&&(s.data=s.data(t)),this.ajaxOptions.delay&&""!==t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(n,this.ajaxOptions.delay)):n()},n}),e.define("select2/data/tags",["jquery"],function(t){function e(e,i,n){var r=n.get("tags"),s=n.get("createTag");if(void 0!==s&&(this.createTag=s),e.call(this,i,n),t.isArray(r))for(var o=0;o<r.length;o++){var a=r[o],l=this._normalizeItem(a),c=this.option(l);this.$element.append(c)}}return e.prototype.query=function(t,e,i){function n(t,s){for(var o=t.results,a=0;a<o.length;a++){var l=o[a],c=null!=l.children&&!n({results:l.children},!0);if(l.text===e.term||c)return!s&&(t.data=o,void i(t))}if(s)return!0;var h=r.createTag(e);if(null!=h){var u=r.option(h);u.attr("data-select2-tag",!0),r.addOptions([u]),r.insertTag(o,h)}t.results=o,i(t)}var r=this;return this._removeOldTags(),null==e.term||null!=e.page?void t.call(this,e,i):void t.call(this,e,n)},e.prototype.createTag=function(e,i){var n=t.trim(i.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(t,e,i){e.unshift(i)},e.prototype._removeOldTags=function(){(this._lastTag,this.$element.find("option[data-select2-tag]")).each(function(){this.selected||t(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(t){function e(t,e,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),t.call(this,e,i)}return e.prototype.bind=function(t,e,i){t.call(this,e,i),this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")},e.prototype.query=function(t,e,i){function n(t){r.select(t)}var r=this;e.term=e.term||"";var s=this.tokenizer(e,this.options,n);s.term!==e.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.focus()),e.term=s.term),t.call(this,e,i)},e.prototype.tokenizer=function(e,i,n,r){for(var s=n.get("tokenSeparators")||[],o=i.term,a=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};a<o.length;){var c=o[a];if(-1!==t.inArray(c,s)){var h=o.substr(0,a);r(l(t.extend({},i,{term:h}))),o=o.substr(a+1)||"",a=0}else a++}return{term:o}},e}),e.define("select2/data/minimumInputLength",[],function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){return e.term=e.term||"",e.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):void t.call(this,e,i)},t}),e.define("select2/data/maximumInputLength",[],function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){return e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):void t.call(this,e,i)},t}),e.define("select2/data/maximumSelectionLength",[],function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){var n=this;this.current(function(r){var s=null!=r?r.length:0;return n.maximumSelectionLength>0&&s>=n.maximumSelectionLength?void n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):void t.call(n,e,i)})},t}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},i.prototype.position=function(){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),e.define("select2/dropdown/search",["jquery","../utils"],function(t){function e(){}return e.prototype.render=function(e){var i=e.call(this),n=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),i.prepend(n),i},e.prototype.bind=function(e,i,n){var r=this;e.call(this,i,n),this.$search.on("keydown",function(t){r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented()}),this.$search.on("input",function(){t(this).off("keyup")}),this.$search.on("keyup input",function(t){r.handleSearch(t)}),i.on("open",function(){r.$search.attr("tabindex",0),r.$search.focus(),window.setTimeout(function(){r.$search.focus()},0)}),i.on("close",function(){r.$search.attr("tabindex",-1),r.$search.val("")}),i.on("results:all",function(t){if(null==t.query.term||""===t.query.term){r.showSearch(t)?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide")}})},e.prototype.handleSearch=function(){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},e.prototype.showSearch=function(){return!0},e}),e.define("select2/dropdown/hidePlaceholder",[],function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i,n)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var i=e.slice(0),n=e.length-1;n>=0;n--){var r=e[n];this.placeholder.id===r.id&&i.splice(n,1)}return i},t}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(t){function e(t,e,i,n){this.lastParams={},t.call(this,e,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,i,n){var r=this;e.call(this,i,n),i.on("query",function(t){r.lastParams=t,r.loading=!0}),i.on("query:append",function(t){r.lastParams=t,r.loading=!0}),this.$results.on("scroll",function(){var e=t.contains(document.documentElement,r.$loadingMore[0]);if(!r.loading&&e){r.$results.offset().top+r.$results.outerHeight(!1)+50>=r.$loadingMore.offset().top+r.$loadingMore.outerHeight(!1)&&r.loadMore()}})},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="option load-more" role="treeitem"></li>'),i=this.options.get("translations").get("loadingMore");return e.html(i(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(t,e){function i(t,e,i){this.$dropdownParent=i.get("dropdownParent")||document.body,t.call(this,e,i)}return i.prototype.bind=function(t,e,i){var n=this,r=!1;t.call(this,e,i),e.on("open",function(){n._showDropdown(),n._attachPositioningHandler(e),r||(r=!0,e.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),e.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}))}),e.on("close",function(){n._hideDropdown(),n._detachPositioningHandler(e)}),this.$dropdownContainer.on("mousedown",function(t){t.stopPropagation()})},i.prototype.position=function(t,e,i){e.attr("class",i.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(e){var i=t("<span></span>"),n=e.call(this);return i.append(n),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},i.prototype._attachPositioningHandler=function(i){var n=this,r="scroll.select2."+i.id,s="resize.select2."+i.id,o="orientationchange.select2."+i.id,a=this.$container.parents().filter(e.hasScroll);a.each(function(){t(this).data("select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})}),a.on(r,function(){var e=t(this).data("select2-scroll-position");t(this).scrollTop(e.y)}),t(window).on(r+" "+s+" "+o,function(){n._positionDropdown(),n._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i){var n="scroll.select2."+i.id,r="resize.select2."+i.id,s="orientationchange.select2."+i.id;this.$container.parents().filter(e.hasScroll).off(n),t(window).off(n+" "+r+" "+s)},i.prototype._positionDropdown=function(){var e=t(window),i=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),r=null,s=(this.$container.position(),this.$container.offset());s.bottom=s.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=s.top,o.bottom=s.top+o.height;var a={height:this.$dropdown.outerHeight(!1)},l={top:e.scrollTop(),bottom:e.scrollTop()+e.height()},c=l.top<s.top-a.height,h=l.bottom>s.bottom+a.height,u={left:s.left,top:o.bottom};i||n||(r="below"),h||!c||i?!c&&h&&i&&(r="below"):r="above",("above"==r||i&&"below"!==r)&&(u.top=o.top-a.height),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(u)},i.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.width="auto"),this.$dropdown.css(t)},i.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function t(e){for(var i=0,n=0;n<e.length;n++){var r=e[n];r.children?i+=t(r.children):i++}return i}function e(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,i,n)}return e.prototype.showSearch=function(e,i){return!(t(i.data.results)<this.minimumResultsForSearch)&&e.call(this,i)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("close",function(){n._handleSelectOnClose()})},t.prototype._handleSelectOnClose=function(){var t=this.getHighlightedResults();t.length<1||this.trigger("select",{data:t.data("data")})},t}),e.define("select2/dropdown/closeOnSelect",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",function(t){n._selectTriggered(t)}),e.on("unselect",function(t){n._selectTriggered(t)})},t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;i&&i.ctrlKey||this.trigger("close")},t}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,i="Please delete "+e+" character";return 1!=e&&(i+="s"),i},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results\u2026"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching\u2026"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(t,e,i,n,r,s,o,a,l,c,h,u,d,f,p,m,g,v,y,b,w,k,x,_,C,D,S,T,M){function L(){this.reset()}return L.prototype.apply=function(u){if(u=t.extend({},this.defaults,u),null==u.dataAdapter){if(u.dataAdapter=null!=u.ajax?p:null!=u.data?f:d,u.minimumInputLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,v)),u.maximumInputLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,y)),u.maximumSelectionLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,b)),u.tags&&(u.dataAdapter=c.Decorate(u.dataAdapter,m)),(null!=u.tokenSeparators||null!=u.tokenizer)&&(u.dataAdapter=c.Decorate(u.dataAdapter,g)),null!=u.query){var M=e(u.amdBase+"compat/query");u.dataAdapter=c.Decorate(u.dataAdapter,M)}if(null!=u.initSelection){var L=e(u.amdBase+"compat/initSelection");u.dataAdapter=c.Decorate(u.dataAdapter,L)}}if(null==u.resultsAdapter&&(u.resultsAdapter=i,null!=u.ajax&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,_)),null!=u.placeholder&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,x)),u.selectOnClose&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,S))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=w;else{var E=c.Decorate(w,k);u.dropdownAdapter=E}if(0!==u.minimumResultsForSearch&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,D)),u.closeOnSelect&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,T)),null!=u.dropdownCssClass||null!=u.dropdownCss||null!=u.adaptDropdownCssClass){var $=e(u.amdBase+"compat/dropdownCss");u.dropdownAdapter=c.Decorate(u.dropdownAdapter,$)}u.dropdownAdapter=c.Decorate(u.dropdownAdapter,C)}if(null==u.selectionAdapter){if(u.selectionAdapter=u.multiple?r:n,null!=u.placeholder&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,s)),u.allowClear&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,o)),u.multiple&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,a)),null!=u.containerCssClass||null!=u.containerCss||null!=u.adaptContainerCssClass){var A=e(u.amdBase+"compat/containerCss");u.selectionAdapter=c.Decorate(u.selectionAdapter,A)}u.selectionAdapter=c.Decorate(u.selectionAdapter,l)}if("string"==typeof u.language)if(u.language.indexOf("-")>0){var I=u.language.split("-"),N=I[0];u.language=[u.language,N]}else u.language=[u.language];if(t.isArray(u.language)){var F=new h;u.language.push("en");for(var P=u.language,O=0;O<P.length;O++){var H=P[O],z={};try{z=h.loadPath(H)}catch(t){try{H=this.defaults.amdLanguageBase+H,z=h.loadPath(H)}catch(t){u.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+H+'" could not be automatically loaded. A fallback will be used instead.');continue}}F.extend(z)}u.translations=F}else{var R=h.loadPath(this.defaults.amdLanguageBase+"en"),U=new h(u.language);U.extend(R),u.translations=U}return u},L.prototype.reset=function(){function e(t){function e(t){return u[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function i(n,r){if(""===t.trim(n.term))return r;if(r.children&&r.children.length>0){for(var s=t.extend(!0,{},r),o=r.children.length-1;o>=0;o--){null==i(n,r.children[o])&&s.children.splice(o,1)}return s.children.length>0?s:i(n,s)}var a=e(r.text).toUpperCase(),l=e(n.term).toUpperCase();return a.indexOf(l)>-1?r:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:M,matcher:i,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},L.prototype.set=function(e,i){var n=t.camelCase(e),r={};r[n]=i;var s=c._convertData(r);t.extend(this.defaults,s)},new L}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(t,e,i,n){function r(e,r){if(this.options=e,null!=r&&this.fromElement(r),this.options=i.apply(this.options),r&&r.is("input")){var s=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=n.Decorate(this.options.dataAdapter,s)}}return r.prototype.fromElement=function(t){var i=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(this.options.dir=t.prop("dir")?t.prop("dir"):t.closest("[dir]").prop("dir")?t.closest("[dir]").prop("dir"):"ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var r={};r=e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset?e.extend(!0,{},t[0].dataset,t.data()):t.data();var s=e.extend(!0,{},r);s=n._convertData(s);for(var o in s)e.inArray(o,i)>-1||(e.isPlainObject(this.options[o])?e.extend(this.options[o],s[o]):this.options[o]=s[o]);return this},r.prototype.get=function(t){return this.options[t]},r.prototype.set=function(t,e){this.options[t]=e},r}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(t,e,i,n){var r=function(t,i){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),i=i||{},this.options=new e(i,t),r.__super__.constructor.call(this);var n=t.attr("tabindex")||0;t.data("old-tabindex",n),t.attr("tabindex","-1");var s=this.options.get("dataAdapter");this.dataAdapter=new s(t,this.options);var o=this.render();this._placeContainer(o);var a=this.options.get("selectionAdapter");this.selection=new a(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,o);var l=this.options.get("dropdownAdapter");this.dropdown=new l(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,o);var c=this.options.get("resultsAdapter");this.results=new c(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var h=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(t){h.trigger("selection:update",{data:t})}),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return i.Extend(r,i.Observable),r.prototype._generateId=function(t){var e="";return e=null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+i.generateChars(2):i.generateChars(4),e="select2-"+e},r.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},r.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var n=this._resolveWidth(t,"style");return null!=n?n:this._resolveWidth(t,"element")}if("element"==e){var r=t.outerWidth(!1);return 0>=r?"auto":r+"px"}if("style"==e){var s=t.attr("style");if("string"!=typeof s)return null;for(var o=s.split(";"),a=0,l=o.length;l>a;a+=1){var c=o[a].replace(/\s/g,""),h=c.match(i);if(null!==h&&h.length>=1)return h[1]}return null}return e},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})}),this._sync=i.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=n?(this._observer=new n(function(i){t.each(i,e._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",e._sync,!1)},r.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",function(e,i){t.trigger(e,i)})},r.prototype._registerSelectionEvents=function(){var e=this,i=["toggle"];this.selection.on("toggle",function(){e.toggleDropdown()}),this.selection.on("*",function(n,r){-1===t.inArray(n,i)&&e.trigger(n,r)})},r.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",function(e,i){t.trigger(e,i)})},r.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",function(e,i){t.trigger(e,i)})},r.prototype._registerEvents=function(){var t=this;this.on("open",function(){t.$container.addClass("select2-container--open")}),this.on("close",function(){t.$container.removeClass("select2-container--open")}),this.on("enable",function(){t.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){t.$container.addClass("select2-container--disabled")}),this.on("focus",function(){t.$container.addClass("select2-container--focus")}),this.on("blur",function(){t.$container.removeClass("select2-container--focus")}),this.on("query",function(e){t.isOpen()||t.trigger("open"),this.dataAdapter.query(e,function(i){t.trigger("results:all",{data:i,query:e})})}),this.on("query:append",function(e){this.dataAdapter.query(e,function(i){t.trigger("results:append",{data:i,query:e})})}),this.on("keypress",function(e){var i=e.which;t.isOpen()?i===n.ENTER?(t.trigger("results:select"),e.preventDefault()):i===n.SPACE&&e.ctrlKey?(t.trigger("results:toggle"),
e.preventDefault()):i===n.UP?(t.trigger("results:previous"),e.preventDefault()):i===n.DOWN?(t.trigger("results:next"),e.preventDefault()):(i===n.ESC||i===n.TAB)&&(t.close(),e.preventDefault()):(i===n.ENTER||i===n.SPACE||(i===n.DOWN||i===n.UP)&&e.altKey)&&(t.open(),e.preventDefault())})},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},r.prototype.trigger=function(t,e){var i=r.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(t in n){var s=n[t],o={prevented:!1,name:t,args:e};if(i.call(this,s,o),o.prevented)return void(e.prevented=!0)}i.call(this,t,e)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||(this.trigger("query",{}),this.trigger("open"))},r.prototype.close=function(){this.isOpen()&&this.trigger("close")},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==t||0===t.length)&&(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},r.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},r.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var i=e[0];t.isArray(i)&&(i=t.map(i,function(t){return t.toString()})),this.$element.val(i).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},r}),e.define("select2/compat/utils",["jquery"],function(t){function e(e,i,n){var r,s,o=[];r=t.trim(e.attr("class")),r&&(r=""+r,t(r.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&o.push(this)})),r=t.trim(i.attr("class")),r&&(r=""+r,t(r.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&null!=(s=n(this))&&o.push(s)})),e.attr("class",o.join(" "))}return{syncCssClasses:e}}),e.define("select2/compat/containerCss",["jquery","./utils"],function(t,e){function i(){return null}function n(){}return n.prototype.render=function(n){var r=n.call(this),s=this.options.get("containerCssClass")||"";t.isFunction(s)&&(s=s(this.$element));var o=this.options.get("adaptContainerCssClass");if(o=o||i,-1!==s.indexOf(":all:")){s=s.replace(":all","");var a=o;o=function(t){var e=a(t);return null!=e?e+" "+t:t}}var l=this.options.get("containerCss")||{};return t.isFunction(l)&&(l=l(this.$element)),e.syncCssClasses(r,this.$element,o),r.css(l),r.addClass(s),r},n}),e.define("select2/compat/dropdownCss",["jquery","./utils"],function(t,e){function i(){return null}function n(){}return n.prototype.render=function(n){var r=n.call(this),s=this.options.get("dropdownCssClass")||"";t.isFunction(s)&&(s=s(this.$element));var o=this.options.get("adaptDropdownCssClass");if(o=o||i,-1!==s.indexOf(":all:")){s=s.replace(":all","");var a=o;o=function(t){var e=a(t);return null!=e?e+" "+t:t}}var l=this.options.get("dropdownCss")||{};return t.isFunction(l)&&(l=l(this.$element)),e.syncCssClasses(r,this.$element,o),r.css(l),r.addClass(s),r},n}),e.define("select2/compat/initSelection",["jquery"],function(t){function e(t,e,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=i.get("initSelection"),this._isInitialized=!1,t.call(this,e,i)}return e.prototype.current=function(e,i){var n=this;return this._isInitialized?void e.call(this,i):void this.initSelection.call(null,this.$element,function(e){n._isInitialized=!0,t.isArray(e)||(e=[e]),i(e)})},e}),e.define("select2/compat/inputData",["jquery"],function(t){function e(t,e,i){this._currentData=[],this._valueSeparator=i.get("valueSeparator")||",","hidden"===e.prop("type")&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),t.call(this,e,i)}return e.prototype.current=function(e,i){function n(e,i){var r=[];return e.selected||-1!==t.inArray(e.id,i)?(e.selected=!0,r.push(e)):e.selected=!1,e.children&&r.push.apply(r,n(e.children,i)),r}for(var r=[],s=0;s<this._currentData.length;s++){var o=this._currentData[s];r.push.apply(r,n(o,this.$element.val().split(this._valueSeparator)))}i(r)},e.prototype.select=function(e,i){if(this.options.get("multiple")){var n=this.$element.val();n+=this._valueSeparator+i.id,this.$element.val(n),this.$element.trigger("change")}else this.current(function(e){t.map(e,function(t){t.selected=!1})}),this.$element.val(i.id),this.$element.trigger("change")},e.prototype.unselect=function(t,e){var i=this;e.selected=!1,this.current(function(t){for(var n=[],r=0;r<t.length;r++){var s=t[r];e.id!=s.id&&n.push(s.id)}i.$element.val(n.join(i._valueSeparator)),i.$element.trigger("change")})},e.prototype.query=function(t,e,i){for(var n=[],r=0;r<this._currentData.length;r++){var s=this._currentData[r],o=this.matches(e,s);null!==o&&n.push(o)}i({results:n})},e.prototype.addOptions=function(e,i){var n=t.map(i,function(e){return t.data(e[0],"data")});this._currentData.push.apply(this._currentData,n)},e}),e.define("select2/compat/matcher",["jquery"],function(t){function e(e){function i(i,n){var r=t.extend(!0,{},n);if(null==i.term||""===t.trim(i.term))return r;if(n.children){for(var s=n.children.length-1;s>=0;s--){var o=n.children[s];e(i.term,o.text,o)||r.children.splice(s,1)}if(r.children.length>0)return r}return e(i.term,n.text,n)?r:null}return i}return e}),e.define("select2/compat/query",[],function(){function t(t,e,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.callback=i,this.options.get("query").call(null,e)},t}),e.define("select2/dropdown/attachContainer",[],function(){function t(t,e,i){t.call(this,e,i)}return t.prototype.position=function(t,e,i){i.find(".dropdown-wrapper").append(e),e.addClass("select2-dropdown--below"),i.addClass("select2-container--below")},t}),e.define("select2/dropdown/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,i){t.call(this,e,i);var n=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(n.join(" "),function(t){t.stopPropagation()})},t}),e.define("select2/selection/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,i){t.call(this,e,i);var n=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(n.join(" "),function(t){t.stopPropagation()})},t}),e.define("jquery.select2",["jquery","require","./select2/core","./select2/defaults"],function(t,e,i,n){if(e("jquery.mousewheel"),null==t.fn.select2){var r=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each(function(){var n=t.extend({},e,!0);new i(t(this),n)}),this;if("string"==typeof e){var n=this.data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2.");var s=Array.prototype.slice.call(arguments,1),o=n[e](s);return t.inArray(e,r)>-1?this:o}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=n),i}),function(i){"function"==typeof e.define&&e.define.amd?e.define("jquery.mousewheel",["jquery"],i):"object"==typeof exports?module.exports=i:i(t)}(function(t){function e(e){var o=e||window.event,a=l.call(arguments,1),c=0,u=0,d=0,f=0,p=0,m=0;if(e=t.event.fix(o),e.type="mousewheel","detail"in o&&(d=-1*o.detail),"wheelDelta"in o&&(d=o.wheelDelta),"wheelDeltaY"in o&&(d=o.wheelDeltaY),"wheelDeltaX"in o&&(u=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(u=-1*d,d=0),c=0===d?u:d,"deltaY"in o&&(d=-1*o.deltaY,c=d),"deltaX"in o&&(u=o.deltaX,0===d&&(c=-1*u)),0!==d||0!==u){if(1===o.deltaMode){var g=t.data(this,"mousewheel-line-height");c*=g,d*=g,u*=g}else if(2===o.deltaMode){var v=t.data(this,"mousewheel-page-height");c*=v,d*=v,u*=v}if(f=Math.max(Math.abs(d),Math.abs(u)),(!s||s>f)&&(s=f,n(o,f)&&(s/=40)),n(o,f)&&(c/=40,u/=40,d/=40),c=Math[c>=1?"floor":"ceil"](c/s),u=Math[u>=1?"floor":"ceil"](u/s),d=Math[d>=1?"floor":"ceil"](d/s),h.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=e.clientX-y.left,m=e.clientY-y.top}return e.deltaX=u,e.deltaY=d,e.deltaFactor=s,e.offsetX=p,e.offsetY=m,e.deltaMode=0,a.unshift(e,c,u,d),r&&clearTimeout(r),r=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function i(){s=null}function n(t,e){return h.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var r,s,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=o.length;c;)t.event.fixHooks[o[--c]]=t.event.mouseHooks;var h=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",h.getLineHeight(this)),t.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=a.length;i;)this.removeEventListener(a[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),{define:e.define,require:e.require}}(),i=e.require("jquery.select2");return t.fn.select2.amd=e,i}),function(t){"use strict";function e(t,e){return t+".touchspin_"+e}function i(i,n){return t.map(i,function(t){return e(t,n)})}var n=0;t.fn.TouchSpin=function(e){if("destroy"===e)return void this.each(function(){var e=t(this),n=e.data();t(document).off(i(["mouseup","touchend","touchcancel","mousemove","touchmove","scroll","scrollstart"],n.spinnerid).join(" "))});var r={min:0,max:100,initval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalupclass:"glyphicon glyphicon-chevron-up",verticaldownclass:"glyphicon glyphicon-chevron-down",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default",buttondown_txt:"-",buttonup_txt:"+"},s={min:"min",max:"max",initval:"init-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){function o(){if(!F.data("alreadyinitialized")){if(F.data("alreadyinitialized",!0),n+=1,F.data("spinnerid",n),!F.is("input"))return void console.log("Must be an input.");c(),a(),w(),d(),m(),g(),v(),y(),L.input.css("display","block")}}function a(){""!==T.initval&&""===F.val()&&F.val(T.initval)}function l(t){u(t),w();var e=L.input.val();""!==e&&(e=Number(L.input.val()),L.input.val(e.toFixed(T.decimals)))}function c(){T=t.extend({},r,P,h(),e)}function h(){var e={};return t.each(s,function(t,i){var n="bts-"+i;F.is("[data-"+n+"]")&&(e[t]=F.data(n))}),e}function u(e){T=t.extend({},T,e)}function d(){var t=F.val(),e=F.parent();""!==t&&(t=Number(t).toFixed(T.decimals)),F.data("initvalue",t).val(t),F.addClass("form-control"),e.hasClass("input-group")?f(e):p()}function f(e){e.addClass("bootstrap-touchspin");var i,n,r=F.prev(),s=F.next(),o='<span class="input-group-addon bootstrap-touchspin-prefix">'+T.prefix+"</span>",a='<span class="input-group-addon bootstrap-touchspin-postfix">'+T.postfix+"</span>";r.hasClass("input-group-btn")?(i='<button class="'+T.buttondown_class+' bootstrap-touchspin-down" type="button">'+T.buttondown_txt+"</button>",r.append(i)):(i='<span class="input-group-btn"><button class="'+T.buttondown_class+' bootstrap-touchspin-down" type="button">'+T.buttondown_txt+"</button></span>",t(i).insertBefore(F)),s.hasClass("input-group-btn")?(n='<button class="'+T.buttonup_class+' bootstrap-touchspin-up" type="button">'+T.buttonup_txt+"</button>",s.prepend(n)):(n='<span class="input-group-btn"><button class="'+T.buttonup_class+' bootstrap-touchspin-up" type="button">'+T.buttonup_txt+"</button></span>",t(n).insertAfter(F)),t(o).insertBefore(F),t(a).insertAfter(F),M=e}function p(){var e;e=T.verticalbuttons?'<div class="input-group bootstrap-touchspin"><span class="input-group-addon bootstrap-touchspin-prefix">'+T.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+T.postfix+'</span><span class="input-group-btn-vertical"><button class="'+T.buttondown_class+' bootstrap-touchspin-up" type="button"><i class="'+T.verticalupclass+'"></i></button><button class="'+T.buttonup_class+' bootstrap-touchspin-down" type="button"><i class="'+T.verticaldownclass+'"></i></button></span></div>':'<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="'+T.buttondown_class+' bootstrap-touchspin-down" type="button">'+T.buttondown_txt+'</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+T.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+T.postfix+'</span><span class="input-group-btn"><button class="'+T.buttonup_class+' bootstrap-touchspin-up" type="button">'+T.buttonup_txt+"</button></span></div>",M=t(e).insertBefore(F),t(".bootstrap-touchspin-prefix",M).after(F),F.hasClass("input-sm")?M.addClass("input-group-sm"):F.hasClass("input-lg")&&M.addClass("input-group-lg")}function m(){L={down:t(".bootstrap-touchspin-down",M),up:t(".bootstrap-touchspin-up",M),input:t("input",M),prefix:t(".bootstrap-touchspin-prefix",M).addClass(T.prefix_extraclass),postfix:t(".bootstrap-touchspin-postfix",M).addClass(T.postfix_extraclass)}}function g(){""===T.prefix&&L.prefix.hide(),""===T.postfix&&L.postfix.hide()}function v(){F.on("keydown",function(t){var e=t.keyCode||t.which;38===e?("up"!==H&&(x(),D()),t.preventDefault()):40===e&&("down"!==H&&(_(),C()),t.preventDefault())}),F.on("keyup",function(t){var e=t.keyCode||t.which;38===e?S():40===e&&S()}),F.on("blur",function(){w()}),L.down.on("keydown",function(t){var e=t.keyCode||t.which;(32===e||13===e)&&("down"!==H&&(_(),C()),t.preventDefault())}),L.down.on("keyup",function(t){var e=t.keyCode||t.which;(32===e||13===e)&&S()}),L.up.on("keydown",function(t){var e=t.keyCode||t.which;(32===e||13===e)&&("up"!==H&&(x(),D()),t.preventDefault())}),L.up.on("keyup",function(t){var e=t.keyCode||t.which;(32===e||13===e)&&S()}),L.down.on("mousedown.touchspin",function(t){L.down.off("touchstart.touchspin"),F.is(":disabled")||(_(),C(),t.preventDefault(),t.stopPropagation())}),L.down.on("touchstart.touchspin",function(t){L.down.off("mousedown.touchspin"),F.is(":disabled")||(_(),C(),t.preventDefault(),t.stopPropagation())}),L.up.on("mousedown.touchspin",function(t){L.up.off("touchstart.touchspin"),F.is(":disabled")||(x(),D(),t.preventDefault(),t.stopPropagation())}),L.up.on("touchstart.touchspin",function(t){L.up.off("mousedown.touchspin"),F.is(":disabled")||(x(),D(),t.preventDefault(),t.stopPropagation())}),L.up.on("mouseout touchleave touchend touchcancel",function(t){H&&(t.stopPropagation(),S())}),L.down.on("mouseout touchleave touchend touchcancel",function(t){H&&(t.stopPropagation(),S())}),L.down.on("mousemove touchmove",function(t){H&&(t.stopPropagation(),t.preventDefault())}),L.up.on("mousemove touchmove",function(t){H&&(t.stopPropagation(),t.preventDefault())}),t(document).on(i(["mouseup","touchend","touchcancel"],n).join(" "),function(t){H&&(t.preventDefault(),S())}),t(document).on(i(["mousemove","touchmove","scroll","scrollstart"],n).join(" "),function(t){H&&(t.preventDefault(),S())}),F.on("mousewheel DOMMouseScroll",function(t){if(T.mousewheel&&F.is(":focus")){var e=t.originalEvent.wheelDelta||-t.originalEvent.deltaY||-t.originalEvent.detail;t.stopPropagation(),t.preventDefault(),0>e?_():x()}})}function y(){F.on("touchspin.uponce",function(){S(),x()}),F.on("touchspin.downonce",function(){S(),_()}),F.on("touchspin.startupspin",function(){D()}),F.on("touchspin.startdownspin",function(){C()}),F.on("touchspin.stopspin",function(){S()}),F.on("touchspin.updatesettings",function(t,e){l(e)})}function b(t){switch(T.forcestepdivisibility){case"round":return(Math.round(t/T.step)*T.step).toFixed(T.decimals);case"floor":return(Math.floor(t/T.step)*T.step).toFixed(T.decimals);case"ceil":return(Math.ceil(t/T.step)*T.step).toFixed(T.decimals);default:return t}}function w(){var t,e,i;""!==(t=F.val())&&(T.decimals>0&&"."===t||(e=parseFloat(t),isNaN(e)&&(e=0),i=e,e.toString()!==t&&(i=e),e<T.min&&(i=T.min),e>T.max&&(i=T.max),i=b(i),Number(t).toString()!==i.toString()&&(F.val(i),F.trigger("change"))))}function k(){if(T.booster){var t=Math.pow(2,Math.floor(O/T.boostat))*T.step;return T.maxboostedstep&&t>T.maxboostedstep&&(t=T.maxboostedstep,E=Math.round(E/t)*t),Math.max(T.step,t)}return T.step}function x(){w(),E=parseFloat(L.input.val()),isNaN(E)&&(E=0);var t=E,e=k();E+=e,E>T.max&&(E=T.max,F.trigger("touchspin.on.max"),S()),L.input.val(Number(E).toFixed(T.decimals)),t!==E&&F.trigger("change")}function _(){w(),E=parseFloat(L.input.val()),isNaN(E)&&(E=0);var t=E,e=k();E-=e,E<T.min&&(E=T.min,F.trigger("touchspin.on.min"),S()),L.input.val(E.toFixed(T.decimals)),t!==E&&F.trigger("change")}function C(){S(),O=0,H="down",F.trigger("touchspin.on.startspin"),F.trigger("touchspin.on.startdownspin"),I=setTimeout(function(){$=setInterval(function(){O++,_()},T.stepinterval)},T.stepintervaldelay)}function D(){S(),O=0,H="up",F.trigger("touchspin.on.startspin"),F.trigger("touchspin.on.startupspin"),N=setTimeout(function(){A=setInterval(function(){O++,x()},T.stepinterval)},T.stepintervaldelay)}function S(){switch(clearTimeout(I),clearTimeout(N),clearInterval($),clearInterval(A),H){case"up":F.trigger("touchspin.on.stopupspin"),F.trigger("touchspin.on.stopspin");break;case"down":F.trigger("touchspin.on.stopdownspin"),F.trigger("touchspin.on.stopspin")}O=0,H=!1}var T,M,L,E,$,A,I,N,F=t(this),P=F.data(),O=0,H=!1;o()})}}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";var e=function(e,i){var n=["autofocus","savable","hideable","width","height","resize","iconlibrary","language","footer","fullscreen","hiddenButtons","disabledButtons"];t.each(n,function(n,r){void 0!==t(e).data(r)&&(i="object"==typeof i?i:{},i[r]=t(e).data(r))}),this.$ns="bootstrap-markdown",this.$element=t(e),this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null},this.$options=t.extend(!0,{},t.fn.markdown.defaults,i,this.$element.data("options")),this.$oldContent=null,this.$isPreview=!1,this.$isFullscreen=!1,this.$editor=null,this.$textarea=null,this.$handler=[],this.$callback=[],this.$nextTab=[],this.showEditor()};e.prototype={constructor:e,__alterButtons:function(e,i){var n=this.$handler,r="all"==e,s=this;t.each(n,function(t,n){var o=!0;!1===(o=!r&&n.indexOf(e)<0)&&i(s.$editor.find('button[data-handler="'+n+'"]'))})},__buildButtons:function(e,i){var n,r=this.$ns,s=this.$handler,o=this.$callback;for(n=0;n<e.length;n++){var a,l=e[n];for(a=0;a<l.length;a++){var c,h=l[a].data,u=t("<div/>",{"class":"btn-group"});for(c=0;c<h.length;c++){var d,f,p=h[c],m=r+"-"+p.name,g=this.__getIcon(p.icon),v=p.btnText?p.btnText:"",y=p.btnClass?p.btnClass:"btn",b=p.tabIndex?p.tabIndex:"-1",w="undefined"!=typeof p.hotkey?p.hotkey:"",k="undefined"!=typeof jQuery.hotkeys&&""!==w?" ("+w+")":"";d=t("<button></button>"),d.text(" "+this.__localize(v)).addClass("btn-default btn-sm").addClass(y),y.match(/btn\-(primary|success|info|warning|danger|link)/)&&d.removeClass("btn-default"),d.attr({type:"button",title:this.__localize(p.title)+k,tabindex:b,"data-provider":r,"data-handler":m,"data-hotkey":w}),!0===p.toggle&&d.attr("data-toggle","button"),f=t("<span/>"),f.addClass(g),f.prependTo(d),u.append(d),s.push(m),o.push(p.callback)}i.append(u)}}return i},__setListener:function(){var e=void 0!==this.$textarea.attr("rows"),i=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",n=e?this.$textarea.attr("rows"):i;this.$textarea.attr("rows",n),this.$options.resize&&this.$textarea.css("resize",this.$options.resize),this.$textarea.on("focus",t.proxy(this.focus,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)).on("change",t.proxy(this.change,this)).on("select",t.proxy(this.select,this)),this.eventSupported("keydown")&&this.$textarea.on("keydown",t.proxy(this.keydown,this)),this.$textarea.data("markdown",this)},__handle:function(e){var i=t(e.currentTarget),n=this.$handler,r=this.$callback,s=i.attr("data-handler"),o=n.indexOf(s),a=r[o];t(e.currentTarget).focus(),a(this),this.change(this),s.indexOf("cmdSave")<0&&this.$textarea.focus(),e.preventDefault()},__localize:function(e){var i=t.fn.markdown.messages,n=this.$options.language;return void 0!==i&&"undefined"!=typeof i[n]&&"undefined"!=typeof i[n][e]?i[n][e]:e},__getIcon:function(t){return"object"==typeof t?t[this.$options.iconlibrary]:t},setFullscreen:function(e){var i=this.$editor,n=this.$textarea;!0===e?(i.addClass("md-fullscreen-mode"),t("body").addClass("md-nooverflow"),this.$options.onFullscreen(this)):(i.removeClass("md-fullscreen-mode"),t("body").removeClass("md-nooverflow"),1==this.$isPreview&&this.hidePreview().showPreview()),this.$isFullscreen=e,n.focus()},showEditor:function(){var e,i=this,n=this.$ns,r=this.$element,s=(r.css("height"),r.css("width"),this.$editable),o=this.$handler,a=this.$callback,l=this.$options,c=t("<div/>",{"class":"md-editor",click:function(){i.focus()}});if(null===this.$editor){var h=t("<div/>",{"class":"md-header btn-toolbar"}),u=[];if(l.buttons.length>0&&(u=u.concat(l.buttons[0])),l.additionalButtons.length>0&&t.each(l.additionalButtons[0],function(e,i){var n=t.grep(u,function(t){return t.name===i.name});n.length>0?n[0].data=n[0].data.concat(i.data):u.push(l.additionalButtons[0][e])}),l.reorderButtonGroups.length>0&&(u=u.filter(function(t){return l.reorderButtonGroups.indexOf(t.name)>-1}).sort(function(t,e){return l.reorderButtonGroups.indexOf(t.name)<l.reorderButtonGroups.indexOf(e.name)?-1:l.reorderButtonGroups.indexOf(t.name)>l.reorderButtonGroups.indexOf(e.name)?1:0})),u.length>0&&(h=this.__buildButtons([u],h)),l.fullscreen.enable&&h.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="#"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOn)+'"></span></a></div>').on("click",".md-control-fullscreen",function(t){t.preventDefault(),i.setFullscreen(!0)}),c.append(h),r.is("textarea"))r.before(c),e=r,e.addClass("md-input"),c.append(e);else{var d="function"==typeof toMarkdown?toMarkdown(r.html()):r.html(),f=t.trim(d);e=t("<textarea/>",{"class":"md-input",val:f}),c.append(e),s.el=r,s.type=r.prop("tagName").toLowerCase(),s.content=r.html(),t(r[0].attributes).each(function(){s.attrKeys.push(this.nodeName),s.attrValues.push(this.nodeValue)}),r.replaceWith(c)}var p=t("<div/>",{"class":"md-footer"}),m=!1,g="";if(l.savable){m=!0;var v="cmdSave";o.push(v),a.push(l.onSave),p.append('<button class="btn btn-success" data-provider="'+n+'" data-handler="'+v+'"><i class="icon icon-white icon-ok"></i> '+this.__localize("Save")+"</button>")}if(g="function"==typeof l.footer?l.footer(this):l.footer,""!==t.trim(g)&&(m=!0,p.append(g)),m&&c.append(p),l.width&&"inherit"!==l.width&&(jQuery.isNumeric(l.width)?(c.css("display","table"),e.css("width",l.width+"px")):c.addClass(l.width)),l.height&&"inherit"!==l.height)if(jQuery.isNumeric(l.height)){var y=l.height;h&&(y=Math.max(0,y-h.outerHeight())),p&&(y=Math.max(0,y-p.outerHeight())),e.css("height",y+"px")}else c.addClass(l.height);this.$editor=c,this.$textarea=e,this.$editable=s,this.$oldContent=this.getContent(),this.__setListener(),this.$editor.attr("id",(new Date).getTime()),this.$editor.on("click",'[data-provider="bootstrap-markdown"]',t.proxy(this.__handle,this)),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this.eventSupported("keydown")&&"object"==typeof jQuery.hotkeys&&h.find('[data-provider="bootstrap-markdown"]').each(function(){var i=t(this),n=i.attr("data-hotkey");""!==n.toLowerCase()&&e.bind("keydown",n,function(){return i.trigger("click"),!1})}),"preview"===l.initialstate?this.showPreview():"fullscreen"===l.initialstate&&l.fullscreen.enable&&this.setFullscreen(!0)}else this.$editor.show();return l.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),l.fullscreen.enable&&!1!==l.fullscreen&&(this.$editor.append('<div class="md-fullscreen-controls"><a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOff)+'"></span></a></div>'),this.$editor.on("click",".exit-fullscreen",function(t){t.preventDefault(),i.setFullscreen(!1)})),this.hideButtons(l.hiddenButtons),this.disableButtons(l.disabledButtons),l.onShow(this),this},parseContent:function(t){var t=t||this.$textarea.val();return this.$options.parser?this.$options.parser(t):"object"==typeof markdown?markdown.toHTML(t):"function"==typeof marked?marked(t):t},showPreview:function(){var e,i,n=this.$options,r=this.$textarea,s=r.next(),o=t("<div/>",{"class":"md-preview","data-provider":"markdown-preview"});return 1==this.$isPreview?this:(this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview"),i=n.onPreview(this),e="string"==typeof i?i:this.parseContent(),o.html(e),s&&"md-footer"==s.attr("class")?o.insertBefore(s):r.parent().append(o),o.css({width:r.outerWidth()+"px",height:r.outerHeight()+"px"}),this.$options.resize&&o.css("resize",this.$options.resize),r.hide(),o.data("markdown",this),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this)},hidePreview:function(){return this.$isPreview=!1,this.$editor.find('div[data-provider="markdown-preview"]').remove(),this.enableButtons("all"),this.disableButtons(this.$options.disabledButtons),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(t){return this.$textarea.val(t),this},findSelection:function(t){var e,i=this.getContent();if((e=i.indexOf(t))>=0&&t.length>0){var n,r=this.getSelection();return this.setSelection(e,e+t.length),n=this.getSelection(),this.setSelection(r.start,r.end),n}return null},getSelection:function(){var t=this.$textarea[0];return("selectionStart"in t&&function(){var e=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:e,text:t.value.substr(t.selectionStart,e)}}||function(){return null})()},setSelection:function(t,e){var i=this.$textarea[0];return("selectionStart"in i&&function(){i.selectionStart=t,i.selectionEnd=e}||function(){return null})()},replaceSelection:function(t){var e=this.$textarea[0];return("selectionStart"in e&&function(){return e.value=e.value.substr(0,e.selectionStart)+t+e.value.substr(e.selectionEnd,e.value.length),e.selectionStart=e.value.length,this}||function(){return e.value+=t,jQuery(e)})()},getNextTab:function(){if(0===this.$nextTab.length)return null;var t,e=this.$nextTab.shift();return"function"==typeof e?t=e():"object"==typeof e&&e.length>0&&(t=e),t},setNextTab:function(t,e){if("string"==typeof t){var i=this;this.$nextTab.push(function(){return i.findSelection(t)})}else if("number"==typeof t&&"number"==typeof e){var n=this.getSelection();this.setSelection(t,e),this.$nextTab.push(this.getSelection()),this.setSelection(n.start,n.end)}},__parseButtonNameParam:function(t){return"string"==typeof t?t.split(" "):t},enableButtons:function(e){var i=this.__parseButtonNameParam(e),n=this;return t.each(i,function(t){n.__alterButtons(i[t],function(t){t.removeAttr("disabled")})}),this},disableButtons:function(e){var i=this.__parseButtonNameParam(e),n=this;return t.each(i,function(t){n.__alterButtons(i[t],function(t){t.attr("disabled","disabled")})}),this},hideButtons:function(e){var i=this.__parseButtonNameParam(e),n=this;return t.each(i,function(t){n.__alterButtons(i[t],function(t){t.addClass("hidden")})}),this},showButtons:function(e){var i=this.__parseButtonNameParam(e),n=this;return t.each(i,function(t){n.__alterButtons(i[t],function(t){t.removeClass("hidden")})}),this},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},keyup:function(t){var e=!1;switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var i;if(null!==(i=this.getNextTab())){var n=this;setTimeout(function(){n.setSelection(i.start,i.end)},500),e=!0}else{var r=this.getSelection();r.start==r.end&&r.end==this.getContent().length?e=!1:(this.setSelection(this.getContent().length,this.getContent().length),e=!0)}break;case 13:e=!1;break;case 27:this.$isFullscreen&&this.setFullscreen(!1),e=!1;break;default:e=!1}e&&(t.stopPropagation(),t.preventDefault()),this.$options.onChange(this)},change:function(){return this.$options.onChange(this),this},select:function(){return this.$options.onSelect(this),this},focus:function(){var e=this.$options,i=(e.hideable,this.$editor);return i.addClass("active"),t(document).find(".md-editor").each(function(){if(t(this).attr("id")!==i.attr("id")){var e
;null===(e=t(this).find("textarea").data("markdown"))&&(e=t(this).find('div[data-provider="markdown-preview"]').data("markdown")),e&&e.blur()}}),e.onFocus(this),this},blur:function(){var e=this.$options,i=e.hideable,n=this.$editor,r=this.$editable;if(n.hasClass("active")||0===this.$element.parent().length){if(n.removeClass("active"),i)if(null!==r.el){var s=t("<"+r.type+"/>"),o=this.getContent(),a=this.parseContent(o);t(r.attrKeys).each(function(t){s.attr(r.attrKeys[t],r.attrValues[t])}),s.html(a),n.replaceWith(s)}else n.hide();e.onBlur(this)}return this}};var i=t.fn.markdown;t.fn.markdown=function(i){return this.each(function(){var n=t(this),r=n.data("markdown"),s="object"==typeof i&&i;r||n.data("markdown",r=new e(this,s))})},t.fn.markdown.messages={},t.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",parser:null,buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold","fa-3":"icon-bold"},callback:function(t){var e,i,n=t.getSelection(),r=t.getContent();e=0===n.length?t.__localize("strong text"):n.text,"**"===r.substr(n.start-2,2)&&"**"===r.substr(n.end,2)?(t.setSelection(n.start-2,n.end+2),t.replaceSelection(e),i=n.start-2):(t.replaceSelection("**"+e+"**"),i=n.start+2),t.setSelection(i,i+e.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic","fa-3":"icon-italic"},callback:function(t){var e,i,n=t.getSelection(),r=t.getContent();e=0===n.length?t.__localize("emphasized text"):n.text,"_"===r.substr(n.start-1,1)&&"_"===r.substr(n.end,1)?(t.setSelection(n.start-1,n.end+1),t.replaceSelection(e),i=n.start-1):(t.replaceSelection("_"+e+"_"),i=n.start+1),t.setSelection(i,i+e.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-header","fa-3":"icon-font"},callback:function(t){var e,i,n,r,s=t.getSelection(),o=t.getContent();e=0===s.length?t.__localize("heading text"):s.text+"\n",n=4,"### "===o.substr(s.start-n,n)||(n=3,"###"===o.substr(s.start-n,n))?(t.setSelection(s.start-n,s.end),t.replaceSelection(e),i=s.start-n):s.start>0&&!!(r=o.substr(s.start-1,1))&&"\n"!=r?(t.replaceSelection("\n\n### "+e),i=s.start+6):(t.replaceSelection("### "+e),i=s.start+4),t.setSelection(i,i+e.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:"glyphicon glyphicon-link",fa:"fa fa-link","fa-3":"icon-link"},callback:function(e){var i,n,r,s=e.getSelection();e.getContent();i=0===s.length?e.__localize("enter link description here"):s.text,r=prompt(e.__localize("Insert Hyperlink"),"http://");var o=new RegExp("^((http|https)://|(mailto:)|(//))[a-z0-9]","i");if(null!==r&&""!==r&&"http://"!==r&&o.test(r)){var a=t("<div>"+r+"</div>").text();e.replaceSelection("["+i+"]("+a+")"),n=s.start+1,e.setSelection(n,n+i.length)}}},{name:"cmdImage",title:"Image",hotkey:"Ctrl+G",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o","fa-3":"icon-picture"},callback:function(e){var i,n,r,s=e.getSelection();e.getContent();i=0===s.length?e.__localize("enter image description here"):s.text,r=prompt(e.__localize("Insert Image Hyperlink"),"http://");var o=new RegExp("^((http|https)://|(//))[a-z0-9]","i");if(null!==r&&""!==r&&"http://"!==r&&o.test(r)){var a=t("<div>"+r+"</div>").text();e.replaceSelection("!["+i+"]("+a+' "'+e.__localize("enter image title here")+'")'),n=s.start+2,e.setNextTab(e.__localize("enter image title here")),e.setSelection(n,n+i.length)}}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list","fa-3":"icon-list-ul"},callback:function(e){var i,n,r=e.getSelection();e.getContent();if(0===r.length)i=e.__localize("list text here"),e.replaceSelection("- "+i),n=r.start+2;else if(r.text.indexOf("\n")<0)i=r.text,e.replaceSelection("- "+i),n=r.start+2;else{var s=[];s=r.text.split("\n"),i=s[0],t.each(s,function(t,e){s[t]="- "+e}),e.replaceSelection("\n\n"+s.join("\n")),n=r.start+4}e.setSelection(n,n+i.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:"glyphicon glyphicon-th-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol"},callback:function(e){var i,n,r=e.getSelection();e.getContent();if(0===r.length)i=e.__localize("list text here"),e.replaceSelection("1. "+i),n=r.start+3;else if(r.text.indexOf("\n")<0)i=r.text,e.replaceSelection("1. "+i),n=r.start+3;else{var s=[];s=r.text.split("\n"),i=s[0],t.each(s,function(t,e){s[t]="1. "+e}),e.replaceSelection("\n\n"+s.join("\n")),n=r.start+5}e.setSelection(n,n+i.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:"glyphicon glyphicon-asterisk",fa:"fa fa-code","fa-3":"icon-code"},callback:function(t){var e,i,n=t.getSelection(),r=t.getContent();e=0===n.length?t.__localize("code text here"):n.text,"```\n"===r.substr(n.start-4,4)&&"\n```"===r.substr(n.end,4)?(t.setSelection(n.start-4,n.end+4),t.replaceSelection(e),i=n.start-4):"`"===r.substr(n.start-1,1)&&"`"===r.substr(n.end,1)?(t.setSelection(n.start-1,n.end+1),t.replaceSelection(e),i=n.start-1):r.indexOf("\n")>-1?(t.replaceSelection("```\n"+e+"\n```"),i=n.start+4):(t.replaceSelection("`"+e+"`"),i=n.start+1),t.setSelection(i,i+e.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:"glyphicon glyphicon-comment",fa:"fa fa-quote-left","fa-3":"icon-quote-left"},callback:function(e){var i,n,r=e.getSelection();e.getContent();if(0===r.length)i=e.__localize("quote here"),e.replaceSelection("> "+i),n=r.start+2;else if(r.text.indexOf("\n")<0)i=r.text,e.replaceSelection("> "+i),n=r.start+2;else{var s=[];s=r.text.split("\n"),i=s[0],t.each(s,function(t,e){s[t]="> "+e}),e.replaceSelection("\n\n"+s.join("\n")),n=r.start+4}e.setSelection(n,n+i.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search"},callback:function(t){var e=t.$isPreview;!1===e?t.showPreview():t.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small"}}},onShow:function(){},onPreview:function(){},onSave:function(){},onBlur:function(){},onFocus:function(){},onChange:function(){},onFullscreen:function(){},onSelect:function(){}},t.fn.markdown.Constructor=e,t.fn.markdown.noConflict=function(){return t.fn.markdown=i,this};var n=function(t){var e=t;if(e.data("markdown"))return void e.data("markdown").showEditor();e.markdown()},r=function(){var e=t(document.activeElement);t(document).find(".md-editor").each(function(){var i=t(this),n=e.closest(".md-editor")[0]===this,r=i.find("textarea").data("markdown")||i.find('div[data-provider="markdown-preview"]').data("markdown");r&&!n&&r.blur()})};t(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(e){n(t(this)),e.preventDefault()}).on("click focusin",function(t){r(t)}).ready(function(){t('textarea[data-provide="markdown"]').each(function(){n(t(this))})})}),function(t){function e(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function i(){var t=require("util");return"Markdown.mk_block( "+t.inspect(this.toString())+", "+t.inspect(this.trailing)+", "+t.inspect(this.lineNumber)+" )"}function n(t){for(var e=0,i=-1;-1!==(i=t.indexOf("\n",i+1));)e++;return e}function r(t,e){function i(t){this.len_after=t,this.name="close_"+e}var n=t+"_state",r="strong"==t?"em_state":"strong_state";return function(s){if(this[n][0]==e)return this[n].shift(),[s.length,new i(s.length-e.length)];var o=this[r].slice(),a=this[n].slice();this[n].unshift(e);var l=this.processInline(s.substr(e.length)),c=l[l.length-1];this[n].shift();if(c instanceof i){l.pop();return[s.length-c.len_after,[t].concat(l)]}return this[r]=o,this[n]=a,[e.length,e]}}function s(t){for(var e=t.split(""),i=[""],n=!1;e.length;){var r=e.shift();switch(r){case" ":n?i[i.length-1]+=r:i.push("");break;case"'":case'"':n=!n;break;case"\\":r=e.shift();default:i[i.length-1]+=r}}return i}function o(t){return g(t)&&t.length>1&&"object"==typeof t[1]&&!g(t[1])?t[1]:undefined}function l(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c(t){if("string"==typeof t)return l(t);var e=t.shift(),i={},n=[];for(!t.length||"object"!=typeof t[0]||t[0]instanceof Array||(i=t.shift());t.length;)n.push(arguments.callee(t.shift()));var r="";for(var s in i)r+=" "+s+'="'+l(i[s])+'"';return"img"==e||"br"==e||"hr"==e?"<"+e+r+"/>":"<"+e+r+">"+n.join("")+"</"+e+">"}function h(t,e,i){var n;i=i||{};var r=t.slice(0);"function"==typeof i.preprocessTreeNode&&(r=i.preprocessTreeNode(r,e));var s=o(r);if(s){r[1]={};for(n in s)r[1][n]=s[n];s=r[1]}if("string"==typeof r)return r;switch(r[0]){case"header":r[0]="h"+r[1].level,delete r[1].level;break;case"bulletlist":r[0]="ul";break;case"numberlist":r[0]="ol";break;case"listitem":r[0]="li";break;case"para":r[0]="p";break;case"markdown":r[0]="html",s&&delete s.references;break;case"code_block":r[0]="pre",n=s?2:1;var a=["code"];a.push.apply(a,r.splice(n)),r[n]=a;break;case"inlinecode":r[0]="code";break;case"img":r[1].src=r[1].href,delete r[1].href;break;case"linebreak":r[0]="br";break;case"link":r[0]="a";break;case"link_ref":r[0]="a";var l=e[s.ref];if(!l)return s.original;delete s.ref,s.href=l.href,l.title&&(s.title=l.title),delete s.original;break;case"img_ref":r[0]="img";var l=e[s.ref];if(!l)return s.original;delete s.ref,s.src=l.href,l.title&&(s.title=l.title),delete s.original}if(n=1,s){for(var c in r[1])n=2;1===n&&r.splice(n,1)}for(;n<r.length;++n)r[n]=arguments.callee(r[n],e,i);return r}function u(t){for(var e=o(t)?2:1;e<t.length;)"string"==typeof t[e]?e+1<t.length&&"string"==typeof t[e+1]?t[e]+=t.splice(e+1,1)[0]:++e:(arguments.callee(t[e]),++e)}var d=t.Markdown=function t(e){switch(typeof e){case"undefined":this.dialect=t.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in t.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=t.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};t.parse=function(t,e){return new d(e).toTree(t)},t.toHTML=function(e,i,n){var r=t.toHTMLTree(e,i,n);return t.renderJsonML(r)},t.toHTMLTree=function(t,e,i){"string"==typeof t&&(t=this.parse(t,e));var n=o(t),r={};n&&n.references&&(r=n.references);var s=h(t,r,i);return u(s),s};var f=d.mk_block=function(t,n,r){1==arguments.length&&(n="\n\n");var s=new String(t);return s.trailing=n,s.inspect=i,s.toSource=e,r!=undefined&&(s.lineNumber=r),s};d.prototype.split_blocks=function(t){var e,i=/([\s\S]+?)($|\n(?:\s*\n|$)+)/g,r=[],s=1;for(null!=(e=/^(\s*\n)/.exec(t))&&(s+=n(e[0]),i.lastIndex=e[0].length);null!==(e=i.exec(t));)r.push(f(e[1],e[2],s)),s+=n(e[0]);return r},d.prototype.processBlock=function(t,e){var i=this.dialect.block,n=i.__order__;if("__call__"in i)return i.__call__.call(this,t,e);for(var r=0;r<n.length;r++){var s=i[n[r]].call(this,t,e);if(s)return(!g(s)||s.length>0&&!g(s[0]))&&this.debug(n[r],"didn't return a proper array"),s}return[]},d.prototype.processInline=function(t){return this.dialect.inline.__call__.call(this,String(t))},d.prototype.toTree=function(t,e){var i=t instanceof Array?t:this.split_blocks(t),n=this.tree;try{for(this.tree=e||this.tree||["markdown"];i.length;){var r=this.processBlock(i.shift(),i);r.length&&this.tree.push.apply(this.tree,r)}return this.tree}finally{e&&(this.tree=n)}},d.prototype.debug=function(){var t=Array.prototype.slice.call(arguments);t.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,t),"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log.apply(null,t)},d.prototype.loop_re_over_block=function(t,e,i){for(var n,r=e.valueOf();r.length&&null!=(n=t.exec(r));)r=r.substr(n[0].length),i.call(this,n);return r},d.dialects={},d.dialects.Gruber={block:{atxHeader:function(t,e){var i=t.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!i)return undefined;var n=["header",{level:i[1].length}];return Array.prototype.push.apply(n,this.processInline(i[2])),i[0].length<t.length&&e.unshift(f(t.substr(i[0].length),t.trailing,t.lineNumber+2)),[n]},setextHeader:function(t,e){var i=t.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!i)return undefined;var n="="===i[2]?1:2,r=["header",{level:n},i[1]];return i[0].length<t.length&&e.unshift(f(t.substr(i[0].length),t.trailing,t.lineNumber+2)),[r]},code:function(t,e){var i=[],n=/^(?: {0,3}\t| {4})(.*)\n?/;if(!t.match(n))return undefined;t:for(;;){var r=this.loop_re_over_block(n,t.valueOf(),function(t){i.push(t[1])});if(r.length){e.unshift(f(r,t.trailing));break t}if(!e.length)break t;if(!e[0].match(n))break t;i.push(t.trailing.replace(/[^\n]/g,"").substring(2)),t=e.shift()}return[["code_block",i.join("\n")]]},horizRule:function(t,e){var i=t.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!i)return undefined;var n=[["hr"]];return i[1]&&n.unshift.apply(n,this.processBlock(i[1],[])),i[3]&&e.unshift(f(i[3])),n},lists:function(){function t(t){return new RegExp("(?:^("+l+"{0,"+t+"} {0,3})("+s+")\\s+)|(^"+l+"{0,"+(t-1)+"}[ ]{0,4})")}function e(t){return t.replace(/ {0,3}\t/g,"    ")}function i(t,e,i,n){if(e)return void t.push(["para"].concat(i));var r=t[t.length-1]instanceof Array&&"para"==t[t.length-1][0]?t[t.length-1]:t;n&&t.length>1&&i.unshift(n);for(var s=0;s<i.length;s++){var o=i[s];"string"==typeof o&&r.length>1&&"string"==typeof r[r.length-1]?r[r.length-1]+=o:r.push(o)}}function n(t,e){for(var i=new RegExp("^("+l+"{"+t+"}.*?\\n?)*$"),n=new RegExp("^"+l+"{"+t+"}","gm"),r=[];e.length>0;){if(i.exec(e[0])){var s=e.shift(),o=s.replace(n,"");r.push(f(o,s.trailing,s.lineNumber))}break}return r}function r(t,e,i){var n=t.list,r=n[n.length-1];if(!(r[1]instanceof Array&&"para"==r[1][0]))if(e+1==i.length)r.push(["para"].concat(r.splice(1)));else{var s=r.pop();r.push(["para"].concat(r.splice(1)),s)}}var s="[*+-]|\\d+\\.",o=/[*+-]/,a=new RegExp("^( {0,3})("+s+")[ \t]+"),l="(?: {0,3}\\t| {4})";return function(s,l){function c(t){var e=o.exec(t[2])?["bulletlist"]:["numberlist"];return f.push({list:e,indent:t[1]}),e}var h=s.match(a);if(!h)return undefined;for(var u,d,f=[],p=c(h),g=!1,v=[f[0].list];;){for(var y=s.split(/(?=\n)/),b="",w=0;w<y.length;w++){var k="",x=y[w].replace(/^\n/,function(t){return k=t,""}),_=t(f.length);if(h=x.match(_),h[1]!==undefined){b.length&&(i(u,g,this.processInline(b),k),g=!1,b=""),h[1]=e(h[1]);var C=Math.floor(h[1].length/4)+1;if(C>f.length)p=c(h),u.push(p),u=p[1]=["listitem"];else{var D=!1;for(d=0;d<f.length;d++)if(f[d].indent==h[1]){p=f[d].list,f.splice(d+1),D=!0;break}D||(C++,C<=f.length?(f.splice(C),p=f[C-1].list):(p=c(h),u.push(p))),u=["listitem"],p.push(u)}k=""}x.length>h[0].length&&(b+=k+x.substr(h[0].length))}b.length&&(i(u,g,this.processInline(b),k),g=!1,b="");var S=n(f.length,l);S.length>0&&(m(f,r,this),u.push.apply(u,this.toTree(S,[])));var T=l[0]&&l[0].valueOf()||"";if(!T.match(a)&&!T.match(/^ /))break;s=l.shift();var M=this.dialect.block.horizRule(s,l);if(M){v.push.apply(v,M);break}m(f,r,this),g=!0}return v}}(),blockquote:function(t,e){if(!t.match(/^>/m))return undefined;var i=[];if(">"!=t[0]){for(var n=t.split(/\n/),r=[];n.length&&">"!=n[0][0];)r.push(n.shift());t=n.join("\n"),i.push.apply(i,this.processBlock(r.join("\n"),[]))}for(;e.length&&">"==e[0][0];){var s=e.shift();t=new String(t+t.trailing+s),t.trailing=s.trailing}var o=t.replace(/^> ?/gm,"");this.tree;return i.push(this.toTree(o,["blockquote"])),i},referenceDefn:function(t,e){var i=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!t.match(i))return undefined;o(this.tree)||this.tree.splice(1,0,{});var n=o(this.tree);n.references===undefined&&(n.references={});var r=this.loop_re_over_block(i,t,function(t){t[2]&&"<"==t[2][0]&&">"==t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1));var e=n.references[t[1].toLowerCase()]={href:t[2]};t[4]!==undefined?e.title=t[4]:t[5]!==undefined&&(e.title=t[5])});return r.length&&e.unshift(f(r,t.trailing)),[]},para:function(t){return[["para"].concat(this.processInline(t))]}}},d.dialects.Gruber.inline={__oneElement__:function(t,e,i){var n,r;if(e=e||this.dialect.inline.__patterns__,!(n=new RegExp("([\\s\\S]*?)("+(e.source||e)+")").exec(t)))return[t.length,t];if(n[1])return[n[1].length,n[1]];var r;return n[2]in this.dialect.inline&&(r=this.dialect.inline[n[2]].call(this,t.substr(n.index),n,i||[])),r=r||[n[2].length,n[2]]},__call__:function(t,e){function i(t){"string"==typeof t&&"string"==typeof r[r.length-1]?r[r.length-1]+=t:r.push(t)}for(var n,r=[];t.length>0;)n=this.dialect.inline.__oneElement__.call(this,t,e,r),t=t.substr(n.shift()),m(n,i);return r},"]":function(){},"}":function(){},"\\":function(t){return t.match(/^\\[\\`\*_{}\[\]()#\+.!\-]/)?[2,t[1]]:[1,"\\"]},"![":function(t){var e=t.match(/^!\[(.*?)\][ \t]*\([ \t]*(\S*)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1)),e[2]=this.dialect.inline.__call__.call(this,e[2],/\\/)[0];var i={alt:e[1],href:e[2]||""};return e[4]!==undefined&&(i.title=e[4]),[e[0].length,["img",i]]}return e=t.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),e?[e[0].length,["img_ref",{alt:e[1],ref:e[2].toLowerCase(),original:e[0]}]]:[2,"!["]},"[":function(t){var e=String(t),i=d.DialectHelpers.inline_until_char.call(this,t.substr(1),"]");if(!i)return[1,"["];var n,r,s=1+i[0],o=i[1];t=t.substr(s);var a=t.match(/^\s*\([ \t]*(\S+)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(a){var l=a[1];if(s+=a[0].length,l&&"<"==l[0]&&">"==l[l.length-1]&&(l=l.substring(1,l.length-1)),!a[3])for(var c=1,h=0;h<l.length;h++)switch(l[h]){case"(":c++;break;case")":0==--c&&(s-=l.length-h,l=l.substring(0,h))}return l=this.dialect.inline.__call__.call(this,l,/\\/)[0],r={href:l||""},a[3]!==undefined&&(r.title=a[3]),n=["link",r].concat(o),[s,n]}return a=t.match(/^\s*\[(.*?)\]/),a?(s+=a[0].length,r={ref:(a[1]||String(o)).toLowerCase(),original:e.substr(0,s)},n=["link_ref",r].concat(o),[s,n]):1==o.length&&"string"==typeof o[0]?(r={ref:o[0].toLowerCase(),original:e.substr(0,s)},n=["link_ref",r,o[0]],[s,n]):[1,"["]},"<":function(t){var e;return null!=(e=t.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?e[3]?[e[0].length,["link",{href:"mailto:"+e[3]},e[3]]]:"mailto"==e[2]?[e[0].length,["link",{href:e[1]},e[1].substr("mailto:".length)]]:[e[0].length,["link",{href:e[1]},e[1]]]:[1,"<"]},"`":function(t){var e=t.match(/(`+)(([\s\S]*?)\1)/);return e&&e[2]?[e[1].length+e[2].length,["inlinecode",e[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}},d.dialects.Gruber.inline["**"]=r("strong","**"),d.dialects.Gruber.inline.__=r("strong","__"),d.dialects.Gruber.inline["*"]=r("em","*"),d.dialects.Gruber.inline._=r("em","_"),d.buildBlockOrder=function(t){var e=[];for(var i in t)"__order__"!=i&&"__call__"!=i&&e.push(i);t.__order__=e},d.buildInlinePatterns=function(t){var e=[];for(var i in t)if(!i.match(/^__.*__$/)){var n=i.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");e.push(1==i.length?n:"(?:"+n+")")}e=e.join("|"),t.__patterns__=e;var r=t.__call__;t.__call__=function(t,i){return i!=undefined?r.call(this,t,i):r.call(this,t,e)}},d.DialectHelpers={},d.DialectHelpers.inline_until_char=function(t,e){for(var i=0,n=[];;){if(t[i]==e)return i++,[i,n];if(i>=t.length)return null;var r=this.dialect.inline.__oneElement__.call(this,t.substr(i));i+=r[0],n.push.apply(n,r.slice(1))}},d.subclassDialect=function(t){function e(){}function i(){}return e.prototype=t.block,i.prototype=t.inline,{block:new e,inline:new i}},d.buildBlockOrder(d.dialects.Gruber.block),d.buildInlinePatterns(d.dialects.Gruber.inline),d.dialects.Maruku=d.subclassDialect(d.dialects.Gruber),d.dialects.Maruku.processMetaHash=function(t){for(var e=s(t),i={},n=0;n<e.length;++n)if(/^#/.test(e[n]))i.id=e[n].substring(1);else if(/^\./.test(e[n]))i["class"]?i["class"]=i["class"]+e[n].replace(/./," "):i["class"]=e[n].substring(1);else if(/\=/.test(e[n])){var r=e[n].split(/\=/);i[r[0]]=r[1]}return i},d.dialects.Maruku.block.document_meta=function(t){if(t.lineNumber>1)return undefined;if(!t.match(/^(?:\w+:.*\n)*\w+:.*$/))return undefined;o(this.tree)||this.tree.splice(1,0,{});var e=t.split(/\n/);for(p in e){var i=e[p].match(/(\w+):\s*(.*)$/),n=i[1].toLowerCase(),r=i[2];this.tree[1][n]=r}return[]},d.dialects.Maruku.block.block_meta=function(t){var e=t.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!e)return undefined;var i,n=this.dialect.processMetaHash(e[2]);if(""===e[1]){var r=this.tree[this.tree.length-1];if(i=o(r),"string"==typeof r)return undefined;i||(i={},r.splice(1,0,i));for(a in n)i[a]=n[a];return[]}var s=t.replace(/\n.*$/,""),l=this.processBlock(s,[]);(i=o(l[0]))||(i={},l[0].splice(1,0,i));for(a in n)i[a]=n[a];return l},d.dialects.Maruku.block.definition_list=function(t,e){var i,n=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,r=["dl"];if(!(a=t.match(n)))return undefined;for(var s=[t];e.length&&n.exec(e[0]);)s.push(e.shift());for(var o=0;o<s.length;++o){var a=s[o].match(n),l=a[1].replace(/\n$/,"").split(/\n/),c=a[2].split(/\n:\s+/);for(i=0;i<l.length;++i)r.push(["dt",l[i]]);for(i=0;i<c.length;++i)r.push(["dd"].concat(this.processInline(c[i].replace(/(\n)\s+/,"$1"))))}return[r]},d.dialects.Maruku.inline["{:"]=function(t,e,i){if(!i.length)return[2,"{:"];var n=i[i.length-1];if("string"==typeof n)return[2,"{:"];var r=t.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!r)return[2,"{:"];var s=this.dialect.processMetaHash(r[1]),a=o(n);a||(a={},n.splice(1,0,a));for(var l in s)a[l]=s[l];return[r[0].length,""]},d.buildBlockOrder(d.dialects.Maruku.block),d.buildInlinePatterns(d.dialects.Maruku.inline);var m,g=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)};m=Array.prototype.forEach?function(t,e,i){return t.forEach(e,i)}:function(t,e,i){for(var n=0;n<t.length;n++)e.call(i||t,t[n],n,t)},t.renderJsonML=function(t,e){e=e||{},e.root=e.root||!1;var i=[];if(e.root)i.push(c(t));else for(t.shift(),!t.length||"object"!=typeof t[0]||t[0]instanceof Array||t.shift();t.length;)i.push(c(t.shift()));return i.join("\n\n")}}(function(){return"undefined"==typeof exports?(window.markdown={},window.markdown):exports}()),function(t){"use strict";function e(e,i){this.itemsArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=i&&i.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=t('<div class="bootstrap-tagsinput"></div>'),this.$input=t('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(i)}function i(t,e){if("function"!=typeof t[e]){var i=t[e];t[e]=function(t){return t[i]}}}function n(t,e){if("function"!=typeof t[e]){var i=t[e];t[e]=function(){return i}}}function r(t){return t?l.text(t).html():""}function s(t){var e=0;if(document.selection){t.focus();var i=document.selection.createRange();i.moveStart("character",-t.value.length),e=i.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}function o(e,i){var n=!1;return t.each(i,function(t,i){if("number"==typeof i&&e.which===i)return n=!0,!1;if(e.which===i.which){var r=!i.hasOwnProperty("altKey")||e.altKey===i.altKey,s=!i.hasOwnProperty("shiftKey")||e.shiftKey===i.shiftKey,o=!i.hasOwnProperty("ctrlKey")||e.ctrlKey===i.ctrlKey;if(r&&s&&o)return n=!0,!1}}),n}var a={tagClass:function(){return"label label-info"},itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},itemTitle:function(){return null},freeInput:!0,addOnBlur:!0,maxTags:undefined,maxChars:undefined,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!0,onTagExists:function(t,e){e.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};e.prototype={constructor:e,add:function(e,i,n){var s=this;if(!(s.options.maxTags&&s.itemsArray.length>=s.options.maxTags)&&(!1===e||e)){if("string"==typeof e&&s.options.trimValue&&(e=t.trim(e)),"object"==typeof e&&!s.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(s.isSelect&&!s.multiple&&s.itemsArray.length>0&&s.remove(s.itemsArray[0]),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var o=s.options.delimiterRegex?s.options.delimiterRegex:s.options.delimiter,a=e.split(o);if(a.length>1){for(var l=0;l<a.length;l++)this.add(a[l],!0);return void(i||s.pushVal())}}var c=s.options.itemValue(e),h=s.options.itemText(e),u=s.options.tagClass(e),d=s.options.itemTitle(e),f=t.grep(s.itemsArray,function(t){return s.options.itemValue(t)===c})[0];if(!f||s.options.allowDuplicates){if(!(s.items().toString().length+e.length+1>s.options.maxInputLength)){var p=t.Event("beforeItemAdd",{item:e,cancel:!1,options:n});if(s.$element.trigger(p),!p.cancel){s.itemsArray.push(e);var m=t('<span class="tag '+r(u)+(null!==d?'" title="'+d:"")+'">'+r(h)+'<span data-role="remove"></span></span>');if(m.data("item",e),s.findInputWrapper().before(m),m.after(" "),s.isSelect&&!t('option[value="'+encodeURIComponent(c)+'"]',s.$element)[0]){var g=t("<option selected>"+r(h)+"</option>");g.data("item",e),g.attr("value",c),s.$element.append(g)}i||s.pushVal(),s.options.maxTags!==s.itemsArray.length&&s.items().toString().length!==s.options.maxInputLength||s.$container.addClass("bootstrap-tagsinput-max"),s.$element.trigger(t.Event("itemAdded",{item:e,options:n}))}}}else if(s.options.onTagExists){var v=t(".tag",s.$container).filter(function(){return t(this).data("item")===f});s.options.onTagExists(e,v)}}}},remove:function(e,i,n){var r=this;if(r.objectItems&&(e="object"==typeof e?t.grep(r.itemsArray,function(t){return r.options.itemValue(t)==r.options.itemValue(e)}):t.grep(r.itemsArray,function(t){return r.options.itemValue(t)==e}),e=e[e.length-1]),e){var s=t.Event("beforeItemRemove",{item:e,cancel:!1,options:n});if(r.$element.trigger(s),s.cancel)return;t(".tag",r.$container).filter(function(){return t(this).data("item")===e}).remove(),t("option",r.$element).filter(function(){return t(this).data("item")===e}).remove(),-1!==t.inArray(e,r.itemsArray)&&r.itemsArray.splice(t.inArray(e,r.itemsArray),1)}i||r.pushVal(),r.options.maxTags>r.itemsArray.length&&r.$container.removeClass("bootstrap-tagsinput-max"),r.$element.trigger(t.Event("itemRemoved",{item:e,options:n}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.itemsArray.length>0;)e.itemsArray.pop();e.pushVal()},refresh:function(){var e=this;t(".tag",e.$container).each(function(){var i=t(this),n=i.data("item"),s=e.options.itemValue(n),o=e.options.itemText(n),a=e.options.tagClass(n);if(i.attr("class",null),i.addClass("tag "+r(a)),i.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=r(o),e.isSelect){t("option",e.$element).filter(function(){return t(this).data("item")===n}).attr("value",s)}})},items:function(){return this.itemsArray},pushVal:function(){var e=this,i=t.map(e.items(),function(t){return e.options.itemValue(t).toString()});e.$element.val(i,!0).trigger("change")},build:function(e){var r=this;if(r.options=t.extend({},a,e),r.objectItems&&(r.options.freeInput=!1),i(r.options,"itemValue"),i(r.options,"itemText"),n(r.options,"tagClass"),r.options.typeahead){var l=r.options.typeahead||{};n(l,"source"),r.$input.typeahead(t.extend({},l,{source:function(e,i){function n(t){for(var e=[],n=0;n<t.length;n++){var o=r.options.itemText(t[n]);s[o]=t[n],e.push(o)}i(e)}this.map={};var s=this.map,o=l.source(e);t.isFunction(o.success)?o.success(n):t.isFunction(o.then)?o.then(n):t.when(o).then(n)},updater:function(t){return r.add(this.map[t]),this.map[t]},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}}))}if(r.options.typeaheadjs){var c=null,h={},u=r.options.typeaheadjs;t.isArray(u)?(c=u[0],h=u[1]):h=u,r.$input.typeahead(c,h).on("typeahead:selected",t.proxy(function(t,e){h.valueKey?r.add(e[h.valueKey]):r.add(e),r.$input.typeahead("val","")},r))}r.$container.on("click",t.proxy(function(){r.$element.attr("disabled")||r.$input.removeAttr("disabled"),r.$input.focus()},r)),r.options.addOnBlur&&r.options.freeInput&&r.$input.on("focusout",t.proxy(function(){0===t(".typeahead, .twitter-typeahead",r.$container).length&&(r.add(r.$input.val()),r.$input.val(""))},r)),r.$container.on("keydown","input",t.proxy(function(e){var i=t(e.target),n=r.findInputWrapper();if(r.$element.attr("disabled"))return void r.$input.attr("disabled","disabled");switch(e.which){case 8:if(0===s(i[0])){var o=n.prev();o.length&&r.remove(o.data("item"))}break;case 46:if(0===s(i[0])){var a=n.next();a.length&&r.remove(a.data("item"))}break;case 37:var l=n.prev();0===i.val().length&&l[0]&&(l.before(n),i.focus());break;case 39:var c=n.next();0===i.val().length&&c[0]&&(c.after(n),i.focus())}var h=i.val().length;Math.ceil(h/5);i.attr("size",Math.max(this.inputSize,i.val().length))},r)),r.$container.on("keypress","input",t.proxy(function(e){var i=t(e.target);if(r.$element.attr("disabled"))return void r.$input.attr("disabled","disabled");var n=i.val(),s=r.options.maxChars&&n.length>=r.options.maxChars;r.options.freeInput&&(o(e,r.options.confirmKeys)||s)&&(0!==n.length&&(r.add(s?n.substr(0,r.options.maxChars):n),i.val("")),!1===r.options.cancelConfirmKeysOnEmpty&&e.preventDefault());var a=i.val().length;Math.ceil(a/5);i.attr("size",Math.max(this.inputSize,i.val().length))},r)),r.$container.on("click","[data-role=remove]",t.proxy(function(e){r.$element.attr("disabled")||r.remove(t(e.target).closest(".tag").data("item"))},r)),r.options.itemValue===a.itemValue&&("INPUT"===r.$element[0].tagName?r.add(r.$element.val()):t("option",r.$element).each(function(){r.add(t(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],i=this.$container[0];e&&e.parentNode!==i;)e=e.parentNode;return t(e)}},t.fn.tagsinput=function(i,n,r){var s=[];return this.each(function(){var o=t(this).data("tagsinput");if(o)if(i||n){if(o[i]!==undefined){if(3===o[i].length&&r!==undefined)var a=o[i](n,null,r);else var a=o[i](n);a!==undefined&&s.push(a)}}else s.push(o);else o=new e(this,i),t(this).data("tagsinput",o),s.push(o),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())}),"string"==typeof i?s.length>1?s:s[0]:s},t.fn.tagsinput.Constructor=e;var l=t("<div />");t(function(){t("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),function(t,e,i,n){function r(e,i){this.element=t(e),this.settings=t.extend({},x,i),this._defaults=x,this._name=k,this.init()}function s(t){t.element.trigger("change")}function o(e){e.element.find("option").each(function(i,n){var r=t(n);void 0===r.data("original-index")&&r.data("original-index",e.elementCount++),void 0===r.data("_selected")&&r.data("_selected",!1)})}function a(e,i,n){e.element.find("option").each(function(r,s){var o=t(s);o.data("original-index")===i&&(o.prop("selected",n),n?(o.attr("data-sortindex",e.sortIndex),e.sortIndex++):o.removeAttr("data-sortindex"))})}function l(t,e){return t.replace(/\{(\d+)\}/g,function(t,i){return"undefined"!=typeof e[i]?e[i]:t})}function c(t){if(t.settings.infoText){var e=t.elements.select1.find("option").length,i=t.elements.select2.find("option").length,n=t.element.find("option").length-t.selectedElements,r=t.selectedElements,s="";s=0===n?t.settings.infoTextEmpty:e===n?l(t.settings.infoText,[e,n]):l(t.settings.infoTextFiltered,[e,n]),t.elements.info1.html(s),t.elements.box1.toggleClass("filtered",!(e===n||0===n)),s=0===r?t.settings.infoTextEmpty:i===r?l(t.settings.infoText,[i,r]):l(t.settings.infoTextFiltered,[i,r]),t.elements.info2.html(s),t.elements.box2.toggleClass("filtered",!(i===r||0===r))}}function h(e){e.selectedElements=0,e.elements.select1.empty(),e.elements.select2.empty(),e.element.find("option").each(function(i,n){var r=t(n)
;r.prop("selected")?(e.selectedElements++,e.elements.select2.append(r.clone(!0).prop("selected",r.data("_selected")))):e.elements.select1.append(r.clone(!0).prop("selected",r.data("_selected")))}),e.settings.showFilterInputs&&(u(e,1),u(e,2)),c(e)}function u(e,i){if(e.settings.showFilterInputs){d(e,i),e.elements["select"+i].empty().scrollTop(0);var n=new RegExp(t.trim(e.elements["filterInput"+i].val()),"gi"),r=e.element.find("option"),s=e.element;s=1===i?r.not(":selected"):s.find("option:selected"),s.each(function(s,o){var a=t(o),l=!0;(o.text.match(n)||e.settings.filterOnValues&&a.attr("value").match(n))&&(l=!1,e.elements["select"+i].append(a.clone(!0).prop("selected",a.data("_selected")))),r.eq(a.data("original-index")).data("filtered"+i,l)}),c(e)}}function d(e,i){var n=e.element.find("option");e.elements["select"+i].find("option").each(function(e,i){var r=t(i);n.eq(r.data("original-index")).data("_selected",r.prop("selected"))})}function f(t){var e=t.children("option");e.sort(function(t,e){var i=parseInt(t.getAttribute("data-sortindex")),n=parseInt(e.getAttribute("data-sortindex"));return i>n?1:i<n?-1:0}),e.detach().appendTo(t)}function p(e){e.find("option").sort(function(e,i){return t(e).data("original-index")>t(i).data("original-index")?1:-1}).appendTo(e)}function m(t){t.elements.select1.find("option").each(function(){t.element.find("option").data("_selected",!1)})}function g(e){"all"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect?"moved"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect||d(e,1):(d(e,1),d(e,2)),e.elements.select1.find("option:selected").each(function(i,n){var r=t(n);r.data("filtered1")||a(e,r.data("original-index"),!0)}),h(e),s(e),e.settings.sortByInputOrder?f(e.elements.select2):p(e.elements.select2)}function v(e){"all"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect?"moved"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect||d(e,2):(d(e,1),d(e,2)),e.elements.select2.find("option:selected").each(function(i,n){var r=t(n);r.data("filtered2")||a(e,r.data("original-index"),!1)}),h(e),s(e),p(e.elements.select1)}function y(e){"all"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect?"moved"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect||d(e,1):(d(e,1),d(e,2)),e.element.find("option").each(function(i,n){var r=t(n);r.data("filtered1")||(r.prop("selected",!0),r.attr("data-sortindex",e.sortIndex),e.sortIndex++)}),h(e),s(e)}function b(e){"all"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect?"moved"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect||d(e,2):(d(e,1),d(e,2)),e.element.find("option").each(function(e,i){var n=t(i);n.data("filtered2")||(n.prop("selected",!1),n.removeAttr("data-sortindex"))}),h(e),s(e)}function w(t){t.elements.form.submit(function(e){t.elements.filterInput1.is(":focus")?(e.preventDefault(),t.elements.filterInput1.focusout()):t.elements.filterInput2.is(":focus")&&(e.preventDefault(),t.elements.filterInput2.focusout())}),t.element.on("bootstrapDualListbox.refresh",function(e,i){t.refresh(i)}),t.elements.filterClear1.on("click",function(){t.setNonSelectedFilter("",!0)}),t.elements.filterClear2.on("click",function(){t.setSelectedFilter("",!0)}),t.elements.moveButton.on("click",function(){g(t)}),t.elements.moveAllButton.on("click",function(){y(t)}),t.elements.removeButton.on("click",function(){v(t)}),t.elements.removeAllButton.on("click",function(){b(t)}),t.elements.filterInput1.on("change keyup",function(){u(t,1)}),t.elements.filterInput2.on("change keyup",function(){u(t,2)})}var k="bootstrapDualListbox",x={bootstrap2Compatible:!1,filterTextClear:"show all",filterPlaceHolder:"Filter",moveSelectedLabel:"Move selected",moveAllLabel:"Move all",removeSelectedLabel:"Remove selected",removeAllLabel:"Remove all",moveOnSelect:!0,preserveSelectionOnMove:!1,selectedListLabel:!1,nonSelectedListLabel:!1,helperSelectNamePostfix:"_helper",selectorMinimalHeight:100,showFilterInputs:!0,nonSelectedFilter:"",selectedFilter:"",infoText:"Showing all {0}",infoTextFiltered:'<span class="label label-warning">Filtered</span> {0} from {1}',infoTextEmpty:"Empty list",filterOnValues:!1,sortByInputOrder:!1},_=/android/i.test(navigator.userAgent.toLowerCase());r.prototype={init:function(){this.container=t('<div class="bootstrap-duallistbox-container"> <div class="box1">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn clear1 pull-right"></button>   </span>   <input class="filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn moveall">       <i></i>       <i></i>     </button>     <button type="button" class="btn move">       <i></i>     </button>   </div>   <select multiple="multiple"></select> </div> <div class="box2">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn clear2 pull-right"></button>   </span>   <input class="filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn remove">       <i></i>     </button>     <button type="button" class="btn removeall">       <i></i>       <i></i>     </button>   </div>   <select multiple="multiple"></select> </div></div>').insertBefore(this.element),this.elements={originalSelect:this.element,box1:t(".box1",this.container),box2:t(".box2",this.container),filterInput1:t(".box1 .filter",this.container),filterInput2:t(".box2 .filter",this.container),filterClear1:t(".box1 .clear1",this.container),filterClear2:t(".box2 .clear2",this.container),label1:t(".box1 > label",this.container),label2:t(".box2 > label",this.container),info1:t(".box1 .info",this.container),info2:t(".box2 .info",this.container),select1:t(".box1 select",this.container),select2:t(".box2 select",this.container),moveButton:t(".box1 .move",this.container),removeButton:t(".box2 .remove",this.container),moveAllButton:t(".box1 .moveall",this.container),removeAllButton:t(".box2 .removeall",this.container),form:t(t(".box1 .filter",this.container)[0].form)},this.originalSelectName=this.element.attr("name")||"";var e="bootstrap-duallistbox-nonselected-list_"+this.originalSelectName,i="bootstrap-duallistbox-selected-list_"+this.originalSelectName;return this.elements.select1.attr("id",e),this.elements.select2.attr("id",i),this.elements.label1.attr("for",e),this.elements.label2.attr("for",i),this.selectedElements=0,this.sortIndex=0,this.elementCount=0,this.setBootstrap2Compatible(this.settings.bootstrap2Compatible),this.setFilterTextClear(this.settings.filterTextClear),this.setFilterPlaceHolder(this.settings.filterPlaceHolder),this.setMoveSelectedLabel(this.settings.moveSelectedLabel),this.setMoveAllLabel(this.settings.moveAllLabel),this.setRemoveSelectedLabel(this.settings.removeSelectedLabel),this.setRemoveAllLabel(this.settings.removeAllLabel),this.setMoveOnSelect(this.settings.moveOnSelect),this.setPreserveSelectionOnMove(this.settings.preserveSelectionOnMove),this.setSelectedListLabel(this.settings.selectedListLabel),this.setNonSelectedListLabel(this.settings.nonSelectedListLabel),this.setHelperSelectNamePostfix(this.settings.helperSelectNamePostfix),this.setSelectOrMinimalHeight(this.settings.selectorMinimalHeight),o(this),this.setShowFilterInputs(this.settings.showFilterInputs),this.setNonSelectedFilter(this.settings.nonSelectedFilter),this.setSelectedFilter(this.settings.selectedFilter),this.setInfoText(this.settings.infoText),this.setInfoTextFiltered(this.settings.infoTextFiltered),this.setInfoTextEmpty(this.settings.infoTextEmpty),this.setFilterOnValues(this.settings.filterOnValues),this.setSortByInputOrder(this.settings.sortByInputOrder),this.element.hide(),w(this),h(this),this.element},setBootstrap2Compatible:function(t,e){return this.settings.bootstrap2Compatible=t,t?(this.container.removeClass("row").addClass("row-fluid bs2compatible"),this.container.find(".box1, .box2").removeClass("col-md-6").addClass("span6"),this.container.find(".clear1, .clear2").removeClass("btn-default btn-xs").addClass("btn-mini"),this.container.find("input, select").removeClass("form-control"),this.container.find(".btn").removeClass("btn-default"),this.container.find(".moveall > i, .move > i").removeClass("glyphicon glyphicon-arrow-right").addClass("icon-arrow-right"),this.container.find(".removeall > i, .remove > i").removeClass("glyphicon glyphicon-arrow-left").addClass("icon-arrow-left")):(this.container.removeClass("row-fluid bs2compatible").addClass("row"),this.container.find(".box1, .box2").removeClass("span6").addClass("col-md-6"),this.container.find(".clear1, .clear2").removeClass("btn-mini").addClass("btn-default btn-xs"),this.container.find("input, select").addClass("form-control"),this.container.find(".btn").addClass("btn-default"),this.container.find(".moveall > i, .move > i").removeClass("icon-arrow-right").addClass("glyphicon glyphicon-arrow-right"),this.container.find(".removeall > i, .remove > i").removeClass("icon-arrow-left").addClass("glyphicon glyphicon-arrow-left")),e&&h(this),this.element},setFilterTextClear:function(t,e){return this.settings.filterTextClear=t,this.elements.filterClear1.html(t),this.elements.filterClear2.html(t),e&&h(this),this.element},setFilterPlaceHolder:function(t,e){return this.settings.filterPlaceHolder=t,this.elements.filterInput1.attr("placeholder",t),this.elements.filterInput2.attr("placeholder",t),e&&h(this),this.element},setMoveSelectedLabel:function(t,e){return this.settings.moveSelectedLabel=t,this.elements.moveButton.attr("title",t),e&&h(this),this.element},setMoveAllLabel:function(t,e){return this.settings.moveAllLabel=t,this.elements.moveAllButton.attr("title",t),e&&h(this),this.element},setRemoveSelectedLabel:function(t,e){return this.settings.removeSelectedLabel=t,this.elements.removeButton.attr("title",t),e&&h(this),this.element},setRemoveAllLabel:function(t,e){return this.settings.removeAllLabel=t,this.elements.removeAllButton.attr("title",t),e&&h(this),this.element},setMoveOnSelect:function(t,e){if(_&&(t=!0),this.settings.moveOnSelect=t,this.settings.moveOnSelect){this.container.addClass("moveonselect");var i=this;this.elements.select1.on("change",function(){g(i)}),this.elements.select2.on("change",function(){v(i)})}else this.container.removeClass("moveonselect"),this.elements.select1.off("change"),this.elements.select2.off("change");return e&&h(this),this.element},setPreserveSelectionOnMove:function(t,e){return _&&(t=!1),this.settings.preserveSelectionOnMove=t,e&&h(this),this.element},setSelectedListLabel:function(t,e){return this.settings.selectedListLabel=t,t?this.elements.label2.show().html(t):this.elements.label2.hide().html(t),e&&h(this),this.element},setNonSelectedListLabel:function(t,e){return this.settings.nonSelectedListLabel=t,t?this.elements.label1.show().html(t):this.elements.label1.hide().html(t),e&&h(this),this.element},setHelperSelectNamePostfix:function(t,e){return this.settings.helperSelectNamePostfix=t,t?(this.elements.select1.attr("name",this.originalSelectName+t+"1"),this.elements.select2.attr("name",this.originalSelectName+t+"2")):(this.elements.select1.removeAttr("name"),this.elements.select2.removeAttr("name")),e&&h(this),this.element},setSelectOrMinimalHeight:function(t,e){this.settings.selectorMinimalHeight=t;var i=this.element.height();return this.element.height()<t&&(i=t),this.elements.select1.height(i),this.elements.select2.height(i),e&&h(this),this.element},setShowFilterInputs:function(t,e){return t?(this.elements.filterInput1.show(),this.elements.filterInput2.show()):(this.setNonSelectedFilter(""),this.setSelectedFilter(""),h(this),this.elements.filterInput1.hide(),this.elements.filterInput2.hide()),this.settings.showFilterInputs=t,e&&h(this),this.element},setNonSelectedFilter:function(t,e){if(this.settings.showFilterInputs)return this.settings.nonSelectedFilter=t,this.elements.filterInput1.val(t),e&&h(this),this.element},setSelectedFilter:function(t,e){if(this.settings.showFilterInputs)return this.settings.selectedFilter=t,this.elements.filterInput2.val(t),e&&h(this),this.element},setInfoText:function(t,e){return this.settings.infoText=t,e&&h(this),this.element},setInfoTextFiltered:function(t,e){return this.settings.infoTextFiltered=t,e&&h(this),this.element},setInfoTextEmpty:function(t,e){return this.settings.infoTextEmpty=t,e&&h(this),this.element},setFilterOnValues:function(t,e){return this.settings.filterOnValues=t,e&&h(this),this.element},setSortByInputOrder:function(t,e){return this.settings.sortByInputOrder=t,e&&h(this),this.element},getContainer:function(){return this.container},refresh:function(t){o(this),t?m(this):(d(this,1),d(this,2)),h(this)},destroy:function(){return this.container.remove(),this.element.show(),t.data(this,"plugin_"+k,null),this.element}},t.fn[k]=function(e){var i=arguments;if(e===n||"object"==typeof e)return this.each(function(){t(this).is("select")?t.data(this,"plugin_"+k)||t.data(this,"plugin_"+k,new r(this,e)):t(this).find("select").each(function(i,n){t(n).bootstrapDualListbox(e)})});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var s;return this.each(function(){var n=t.data(this,"plugin_"+k);n instanceof r&&"function"==typeof n[e]&&(s=n[e].apply(n,Array.prototype.slice.call(i,1)))}),s!==n?s:this}}}(jQuery,window,document),function(t,e){"use strict";"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):e(t.jQuery)}(this,function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"!=typeof this.options.autoSelect||this.options.autoSelect,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=t(this.options.menu),this.$appendTo=this.options.appendTo?t(this.options.appendTo):null,this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus&&this.options.showHintOnFocus,this.afterSelect=this.options.afterSelect,this.addItem=!1};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").data("value");if(this.$element.data("active",t),this.autoSelect||t){var e=this.updater(t);e||(e=""),this.$element.val(this.displayText(e)||e).change(),this.afterSelect(e)}return this.hide()},updater:function(t){return t},setSource:function(t){this.source=t},show:function(){var e,i=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});e="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight;var n;return n=this.shown?this.$menu:this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element),n.css({top:i.top+i.height+e,left:i.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(e){if(this.query=void 0!==e&&null!==e?e:this.$element.val()||"",this.query.length<this.options.minLength&&!this.options.showHintOnFocus)return this.shown?this.hide():this;var i=t.proxy(function(){t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(i,this.delay)},process:function(e){var i=this;return e=t.grep(e,function(t){return i.matcher(t)}),e=this.sorter(e),e.length||this.options.addItem?(e.length>0?this.$element.data("active",e[0]):this.$element.data("active",null),this.options.addItem&&e.push(this.options.addItem),"all"==this.options.items?this.render(e).show():this.render(e.slice(0,this.options.items)).show()):this.shown?this.hide():this},matcher:function(t){return~this.displayText(t).toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,i=[],n=[],r=[];e=t.shift();){var s=this.displayText(e);s.toLowerCase().indexOf(this.query.toLowerCase())?~s.indexOf(this.query)?n.push(e):r.push(e):i.push(e)}return i.concat(n,r)},highlighter:function(e){var i,n,r,s,o,a=t("<div></div>"),l=this.query,c=e.toLowerCase().indexOf(l.toLowerCase());if(0===(i=l.length))return a.text(e).html();for(;c>-1;)n=e.substr(0,c),r=e.substr(c,i),s=e.substr(c+i),o=t("<strong></strong>").text(r),a.append(document.createTextNode(n)).append(o),e=s,c=e.toLowerCase().indexOf(l.toLowerCase());return a.append(document.createTextNode(e)).html()},render:function(e){var i=this,n=this,r=!1,s=[],o=i.options.separator;return t.each(e,function(t,i){t>0&&i[o]!==e[t-1][o]&&s.push({__type:"divider"}),!i[o]||0!==t&&i[o]===e[t-1][o]||s.push({__type:"category",name:i[o]}),s.push(i)}),e=t(s).map(function(e,s){if("category"==(s.__type||!1))return t(i.options.headerHtml).text(s.name)[0];if("divider"==(s.__type||!1))return t(i.options.headerDivider)[0];var o=n.displayText(s);return e=t(i.options.item).data("value",s),e.find("a").html(i.highlighter(o,s)),o==n.$element.val()&&(e.addClass("active"),n.$element.data("active",s),r=!0),e[0]}),this.autoSelect&&!r&&(e.filter(":not(.dropdown-header)").first().addClass("active"),this.$element.data("active",e.first().data("value"))),this.$menu.html(e),this},displayText:function(t){return void 0!==t&&"undefined"!=typeof t.name&&t.name||t},next:function(){var e=this.$menu.find(".active").removeClass("active"),i=e.next();i.length||(i=t(this.$menu.find("li")[0])),i.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("input",t.proxy(this.input,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this)).on("mousedown",t.proxy(this.mousedown,this))},mousedown:function(t){this.mouseddown=!0,t.stopPropagation(),t.preventDefault()},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("input").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown)switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:if(t.shiftKey)return;t.preventDefault(),this.prev();break;case 40:if(t.shiftKey)return;t.preventDefault(),this.next()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.shown||40!=e.keyCode?this.move(e):this.lookup()},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},input:function(t){this.lookup(),t.preventDefault()},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide()}t.preventDefault()},focus:function(){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup())},blur:function(t){this.focused=!1,!this.mousedover&&this.shown&&(this.mouseddown&&t.originalEvent?this.mouseddown=!1:this.hide())},click:function(t){t.preventDefault(),this.select(),this.$element.focus(),this.hide()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1}};var i=t.fn.typeahead;t.fn.typeahead=function(i){var n=arguments;return"string"==typeof i&&"getActive"==i?this.data("active"):this.each(function(){var r=t(this),s=r.data("typeahead"),o="object"==typeof i&&i;s||r.data("typeahead",s=new e(this,o)),"string"==typeof i&&s[i]&&(n.length>1?s[i].apply(s,Array.prototype.slice.call(n,1)):s[i]())})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:t.noop,addItem:!1,delay:0,separator:"category",headerHtml:'<li class="dropdown-header"></li>',headerDivider:'<li class="divider" role="separator"></li>'},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=i,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}),function(t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else{if("function"==typeof define&&define.amd)return define([],t);this.CodeMirror=t()}}(function(){"use strict";function t(i,n){if(!(this instanceof t))return new t(i,n);this.options=n=n?mr(n):{},mr(As,n,!1),p(n);var r=n.value;"string"==typeof r&&(r=new io(r,n.mode)),this.doc=r;var s=this.display=new e(i,r);s.wrapper.CodeMirror=this,h(this),l(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!cs&&De(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new lr},Qr&&Jr<11&&setTimeout(gr(Ce,this,!0),20),Me(this),Er(),Jt(this),this.curOp.forceUpdate=!0,Ln(this,r),n.autofocus&&!cs||Cr()==s.input?setTimeout(gr(Ze,this),20):Qe(this);for(var o in Is)Is.hasOwnProperty(o)&&Is[o](this,n[o],Ns);w(this);for(var a=0;a<Hs.length;++a)Hs[a](this);ee(this)}function e(t,e){var i=this,n=i.input=wr("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");ts?n.style.width="1000px":n.setAttribute("wrap","off"),ls&&(n.style.border="1px solid black"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),i.inputDiv=wr("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),i.scrollbarH=wr("div",[wr("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),i.scrollbarV=wr("div",[wr("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i.scrollbarFiller=wr("div",null,"CodeMirror-scrollbar-filler"),i.gutterFiller=wr("div",null,"CodeMirror-gutter-filler"),i.lineDiv=wr("div",null,"CodeMirror-code"),i.selectionDiv=wr("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=wr("div",null,"CodeMirror-cursors"),i.measure=wr("div",null,"CodeMirror-measure"),i.lineMeasure=wr("div",null,"CodeMirror-measure"),i.lineSpace=wr("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=wr("div",[wr("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=wr("div",[i.mover],"CodeMirror-sizer"),i.heightForcer=wr("div",null,null,"position: absolute; height: "+fo+"px; width: 1px;"),i.gutters=wr("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=wr("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=wr("div",[i.inputDiv,i.scrollbarH,i.scrollbarV,i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),Qr&&Jr<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),ls&&(n.style.width="0px"),ts||(i.scroller.draggable=!0),ss&&(i.inputDiv.style.height="1px",i.inputDiv.style.position="absolute"),Qr&&Jr<8&&(i.scrollbarH.style.minHeight=i.scrollbarV.style.minWidth="18px"),t.appendChild?t.appendChild(i.wrapper):t(i.wrapper),i.viewFrom=i.viewTo=e.first,i.view=[],i.externalMeasured=null,i.viewOffset=0,i.lastSizeC=0,i.updateLineNumbers=null,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.prevInput="",i.alignWidgets=!1,i.pollingFast=!1,i.poll=new lr,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.inaccurateSelection=!1,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null}function i(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),n(e)}function n(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.frontier=t.doc.first,xt(t,100),t.state.modeGen++,t.curOp&&pe(t)}function r(t){t.options.lineWrapping?(Tr(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth=""):(Sr(t.display.wrapper,"CodeMirror-wrap"),f(t)),o(t),pe(t),Rt(t),setTimeout(function(){v(t)},100)}function s(t){var e=Zt(t.display),i=t.options.lineWrapping,n=i&&Math.max(5,t.display.scroller.clientWidth/Qt(t.display)-3);return function(r){if(en(t.doc,r))return 0;var s=0;if(r.widgets)for(var o=0;o<r.widgets.length;o++)r.widgets[o].height&&(s+=r.widgets[o].height);return i?s+(Math.ceil(r.text.length/n)||1)*e:s+e}}function o(t){var e=t.doc,i=s(t);e.iter(function(t){var e=i(t);e!=t.height&&In(t,e)})}function a(t){var e=Ws[t.options.keyMap],i=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(i?" cm-keymap-"+i:"")}function l(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Rt(t)}function c(t){h(t),pe(t),setTimeout(function(){b(t)},20)}function h(t){var e=t.display.gutters,i=t.options.gutters;kr(e);for(var n=0;n<i.length;++n){var r=i[n],s=e.appendChild(wr("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(t.display.lineGutter=s,s.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=n?"":"none",u(t)}function u(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px",t.display.scrollbarH.style.left=t.options.fixedGutter?e+"px":0}function d(t){if(0==t.height)return 0;for(var e,i=t.text.length,n=t;e=Gi(n);){var r=e.find(0,!0);n=r.from.line,i+=r.from.ch-r.to.ch}for(n=t;e=Ki(n);){var r=e.find(0,!0);i-=n.text.length-r.from.ch,n=r.to.line,i+=n.text.length-r.to.ch}return i}function f(t){var e=t.display,i=t.doc;e.maxLine=En(i,i.first),e.maxLineLength=d(e.maxLine),e.maxLineChanged=!0,i.iter(function(t){var i=d(t);i>e.maxLineLength&&(e.maxLineLength=i,e.maxLine=t)})}function p(t){var e=dr(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function m(t){return t.display.scroller.clientHeight-t.display.wrapper.clientHeight<fo-3}function g(t){var e=t.display.scroller;return{clientHeight:e.clientHeight,barHeight:t.display.scrollbarV.clientHeight,scrollWidth:e.scrollWidth,clientWidth:e.clientWidth,hScrollbarTakesSpace:m(t),barWidth:t.display.scrollbarH.clientWidth,docHeight:Math.round(t.doc.height+Tt(t.display))}}function v(t,e){e||(e=g(t));var i=t.display,n=Ar(i.measure),r=e.docHeight+fo,s=e.scrollWidth>e.clientWidth;s&&e.scrollWidth<=e.clientWidth+1&&n>0&&!e.hScrollbarTakesSpace&&(s=!1);var o=r>e.clientHeight;if(o?(i.scrollbarV.style.display="block",i.scrollbarV.style.bottom=s?n+"px":"0",i.scrollbarV.firstChild.style.height=Math.max(0,r-e.clientHeight+(e.barHeight||i.scrollbarV.clientHeight))+"px"):(i.scrollbarV.style.display="",i.scrollbarV.firstChild.style.height="0"),s?(i.scrollbarH.style.display="block",i.scrollbarH.style.right=o?n+"px":"0",i.scrollbarH.firstChild.style.width=e.scrollWidth-e.clientWidth+(e.barWidth||i.scrollbarH.clientWidth)+"px"):(i.scrollbarH.style.display="",i.scrollbarH.firstChild.style.width="0"),s&&o?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=i.scrollbarFiller.style.width=n+"px"):i.scrollbarFiller.style.display="",s&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n+"px",i.gutterFiller.style.width=i.gutters.offsetWidth+"px"):i.gutterFiller.style.display="",!t.state.checkedOverlayScrollbar&&e.clientHeight>0){if(0===n){var a=hs&&!os?"12px":"18px";i.scrollbarV.style.minWidth=i.scrollbarH.style.minHeight=a;var l=function(e){tr(e)!=i.scrollbarV&&tr(e)!=i.scrollbarH&&ce(t,Ae)(e)};lo(i.scrollbarV,"mousedown",l),lo(i.scrollbarH,"mousedown",l)}t.state.checkedOverlayScrollbar=!0}}function y(t,e,i){var n=i&&null!=i.top?Math.max(0,i.top):t.scroller.scrollTop;n=Math.floor(n-St(t));var r=i&&null!=i.bottom?i.bottom:n+t.wrapper.clientHeight,s=Fn(e,n),o=Fn(e,r);if(i&&i.ensure){var a=i.ensure.from.line,l=i.ensure.to.line;if(a<s)return{from:a,to:Fn(e,Pn(En(e,a))+t.wrapper.clientHeight)};if(Math.min(l,e.lastLine())>=o)return{from:Fn(e,Pn(En(e,l))-t.wrapper.clientHeight),to:l}}return{from:s,to:Math.max(o,s+1)}}function b(t){var e=t.display,i=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=x(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,s=n+"px",o=0;o<i.length;o++)if(!i[o].hidden){t.options.fixedGutter&&i[o].gutter&&(i[o].gutter.style.left=s);var a=i[o].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=s}t.options.fixedGutter&&(e.gutters.style.left=n+r+"px")}}function w(t){if(!t.options.lineNumbers)return!1;var e=t.doc,i=k(t.options,e.first+e.size-1),n=t.display;if(i.length!=n.lineNumChars){var r=n.measure.appendChild(wr("div",[wr("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=r.firstChild.offsetWidth,o=r.offsetWidth-s;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(s,n.lineGutter.offsetWidth-o),n.lineNumWidth=n.lineNumInnerWidth+o,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",u(t),!0}return!1}function k(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function x(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function _(t,e,i){var n=t.display;this.viewport=e,this.visible=y(n,t.doc,e),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.oldViewFrom=n.viewFrom,this.oldViewTo=n.viewTo,this.oldScrollerWidth=n.scroller.clientWidth,this.force=i,this.dims=$(t)}function C(t,e){var i=t.display,n=t.doc;if(e.editorIsHidden)return ge(t),!1;if(!e.force&&e.visible.from>=i.viewFrom&&e.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&0==we(t))return!1;w(t)&&(ge(t),e.dims=$(t));var r=n.first+n.size,s=Math.max(e.visible.from-t.options.viewportMargin,n.first),o=Math.min(r,e.visible.to+t.options.viewportMargin);i.viewFrom<s&&s-i.viewFrom<20&&(s=Math.max(n.first,i.viewFrom)),i.viewTo>o&&i.viewTo-o<20&&(o=Math.min(r,i.viewTo)),gs&&(s=Ji(t.doc,s),o=tn(t.doc,o));var a=s!=i.viewFrom||o!=i.viewTo||i.lastSizeC!=e.wrapperHeight;be(t,s,o),i.viewOffset=Pn(En(t.doc,i.viewFrom)),t.display.mover.style.top=i.viewOffset+"px";var l=we(t);if(!a&&0==l&&!e.force&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var c=Cr();return l>4&&(i.lineDiv.style.display="none"),A(t,i.updateLineNumbers,e.dims),l>4&&(i.lineDiv.style.display=""),c&&Cr()!=c&&c.offsetHeight&&c.focus(),kr(i.cursorDiv),kr(i.selectionDiv),a&&(i.lastSizeC=e.wrapperHeight,xt(t,400)),i.updateLineNumbers=null,!0}function D(t,e){for(var i=(e.force,e.viewport),n=!0;;n=!1){if(n&&t.options.lineWrapping&&e.oldScrollerWidth!=t.display.scroller.clientWidth)!0;else if(!1,i&&null!=i.top&&(i={top:Math.min(t.doc.height+Tt(t.display)-fo-t.display.scroller.clientHeight,i.top)}),e.visible=y(t.display,t.doc,i),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!C(t,e))break;L(t);var r=g(t);yt(t),T(t,r),v(t,r)}ir(t,"update",t),t.display.viewFrom==e.oldViewFrom&&t.display.viewTo==e.oldViewTo||ir(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo)}function S(t,e){var i=new _(t,e);if(C(t,i)){L(t),D(t,i);var n=g(t);yt(t),T(t,n),v(t,n)}}function T(t,e){t.display.sizer.style.minHeight=t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=Math.max(e.docHeight,e.clientHeight-fo)+"px"}function M(t,e){t.display.sizer.offsetWidth+t.display.gutters.offsetWidth<t.display.scroller.clientWidth-1&&(t.display.sizer.style.minHeight=t.display.heightForcer.style.top="0px",t.display.gutters.style.height=e.docHeight+"px")}function L(t){for(var e=t.display,i=e.lineDiv.offsetTop,n=0;n<e.view.length;n++){var r,s=e.view[n];if(!s.hidden){if(Qr&&Jr<8){var o=s.node.offsetTop+s.node.offsetHeight;r=o-i,i=o}else{var a=s.node.getBoundingClientRect();r=a.bottom-a.top}var l=s.line.height-r;if(r<2&&(r=Zt(e)),(l>.001||l<-.001)&&(In(s.line,r),E(s.line),s.rest))for(var c=0;c<s.rest.length;c++)E(s.rest[c])}}}function E(t){
if(t.widgets)for(var e=0;e<t.widgets.length;++e)t.widgets[e].height=t.widgets[e].node.offsetHeight}function $(t){for(var e=t.display,i={},n={},r=e.gutters.clientLeft,s=e.gutters.firstChild,o=0;s;s=s.nextSibling,++o)i[t.options.gutters[o]]=s.offsetLeft+s.clientLeft+r,n[t.options.gutters[o]]=s.clientWidth;return{fixedPos:x(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}function A(t,e,i){function n(e){var i=e.nextSibling;return ts&&hs&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),i}for(var r=t.display,s=t.options.lineNumbers,o=r.lineDiv,a=o.firstChild,l=r.view,c=r.viewFrom,h=0;h<l.length;h++){var u=l[h];if(u.hidden);else if(u.node){for(;a!=u.node;)a=n(a);var d=s&&null!=e&&e<=c&&u.lineNumber;u.changes&&(dr(u.changes,"gutter")>-1&&(d=!1),I(t,u,c,i)),d&&(kr(u.lineNumber),u.lineNumber.appendChild(document.createTextNode(k(t.options,c)))),a=u.node.nextSibling}else{var f=U(t,u,c,i);o.insertBefore(f,a)}c+=u.size}for(;a;)a=n(a)}function I(t,e,i,n){for(var r=0;r<e.changes.length;r++){var s=e.changes[r];"text"==s?O(t,e):"gutter"==s?z(t,e,i,n):"class"==s?H(e):"widget"==s&&R(e,n)}e.changes=null}function N(t){return t.node==t.text&&(t.node=wr("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),Qr&&Jr<8&&(t.node.style.zIndex=2)),t.node}function F(t){var e=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),t.background)e?t.background.className=e:(t.background.parentNode.removeChild(t.background),t.background=null);else if(e){var i=N(t);t.background=i.insertBefore(wr("div",null,e),i.firstChild)}}function P(t,e){var i=t.display.externalMeasured;return i&&i.line==e.line?(t.display.externalMeasured=null,e.measure=i.measure,i.built):vn(t,e)}function O(t,e){var i=e.text.className,n=P(t,e);e.text==e.node&&(e.node=n.pre),e.text.parentNode.replaceChild(n.pre,e.text),e.text=n.pre,n.bgClass!=e.bgClass||n.textClass!=e.textClass?(e.bgClass=n.bgClass,e.textClass=n.textClass,H(e)):i&&(e.text.className=i)}function H(t){F(t),t.line.wrapClass?N(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var e=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=e||""}function z(t,e,i,n){e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null);var r=e.line.gutterMarkers;if(t.options.lineNumbers||r){var s=N(e),o=e.gutter=s.insertBefore(wr("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),e.text);if(!t.options.lineNumbers||r&&r["CodeMirror-linenumbers"]||(e.lineNumber=o.appendChild(wr("div",k(t.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),r)for(var a=0;a<t.options.gutters.length;++a){var l=t.options.gutters[a],c=r.hasOwnProperty(l)&&r[l];c&&o.appendChild(wr("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function R(t,e){t.alignable&&(t.alignable=null);for(var i,n=t.node.firstChild;n;n=i){var i=n.nextSibling;"CodeMirror-linewidget"==n.className&&t.node.removeChild(n)}B(t,e)}function U(t,e,i,n){var r=P(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),H(e),z(t,e,i,n),B(e,n),e.node}function B(t,e){if(W(t.line,t,e,!0),t.rest)for(var i=0;i<t.rest.length;i++)W(t.rest[i],t,e,!1)}function W(t,e,i,n){if(t.widgets)for(var r=N(e),s=0,o=t.widgets;s<o.length;++s){var a=o[s],l=wr("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||(l.ignoreEvents=!0),j(a,l,e,i),n&&a.above?r.insertBefore(l,e.gutter||e.text):r.appendChild(l),ir(a,"redraw")}}function j(t,e,i,n){if(t.noHScroll){(i.alignable||(i.alignable=[])).push(e);var r=n.wrapperWidth;e.style.left=n.fixedPos+"px",t.coverGutter||(r-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function Y(t){return vs(t.line,t.ch)}function q(t,e){return ys(t,e)<0?e:t}function V(t,e){return ys(t,e)<0?t:e}function G(t,e){this.ranges=t,this.primIndex=e}function K(t,e){this.anchor=t,this.head=e}function X(t,e){var i=t[e];t.sort(function(t,e){return ys(t.from(),e.from())}),e=dr(t,i);for(var n=1;n<t.length;n++){var r=t[n],s=t[n-1];if(ys(s.to(),r.from())>=0){var o=V(s.from(),r.from()),a=q(s.to(),r.to()),l=s.empty()?r.from()==r.head:s.from()==s.head;n<=e&&--e,t.splice(--n,2,new K(l?a:o,l?o:a))}}return new G(t,e)}function Z(t,e){return new G([new K(t,e||t)],0)}function Q(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function J(t,e){if(e.line<t.first)return vs(t.first,0);var i=t.first+t.size-1;return e.line>i?vs(i,En(t,i).text.length):tt(e,En(t,e.line).text.length)}function tt(t,e){var i=t.ch;return null==i||i>e?vs(t.line,e):i<0?vs(t.line,0):t}function et(t,e){return e>=t.first&&e<t.first+t.size}function it(t,e){for(var i=[],n=0;n<e.length;n++)i[n]=J(t,e[n]);return i}function nt(t,e,i,n){if(t.cm&&t.cm.display.shift||t.extend){var r=e.anchor;if(n){var s=ys(i,r)<0;s!=ys(n,r)<0?(r=i,i=n):s!=ys(i,n)<0&&(i=n)}return new K(r,i)}return new K(n||i,i)}function rt(t,e,i,n){ht(t,new G([nt(t,t.sel.primary(),e,i)],0),n)}function st(t,e,i){for(var n=[],r=0;r<t.sel.ranges.length;r++)n[r]=nt(t,t.sel.ranges[r],e[r],null);ht(t,X(n,t.sel.primIndex),i)}function ot(t,e,i,n){var r=t.sel.ranges.slice(0);r[e]=i,ht(t,X(r,t.sel.primIndex),n)}function at(t,e,i,n){ht(t,Z(e,i),n)}function lt(t,e){var i={ranges:e.ranges,update:function(e){this.ranges=[];for(var i=0;i<e.length;i++)this.ranges[i]=new K(J(t,e[i].anchor),J(t,e[i].head))}};return ho(t,"beforeSelectionChange",t,i),t.cm&&ho(t.cm,"beforeSelectionChange",t.cm,i),i.ranges!=e.ranges?X(i.ranges,i.ranges.length-1):e}function ct(t,e,i){var n=t.history.done,r=ur(n);r&&r.ranges?(n[n.length-1]=e,ut(t,e,i)):ht(t,e,i)}function ht(t,e,i){ut(t,e,i),jn(t,t.sel,t.cm?t.cm.curOp.id:NaN,i)}function ut(t,e,i){(or(t,"beforeSelectionChange")||t.cm&&or(t.cm,"beforeSelectionChange"))&&(e=lt(t,e)),dt(t,pt(t,e,i&&i.bias||(ys(e.primary().head,t.sel.primary().head)<0?-1:1),!0)),i&&!1===i.scroll||!t.cm||yi(t.cm)}function dt(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,sr(t.cm)),ir(t,"cursorActivity",t))}function ft(t){dt(t,pt(t,t.sel,null,!1),mo)}function pt(t,e,i,n){for(var r,s=0;s<e.ranges.length;s++){var o=e.ranges[s],a=mt(t,o.anchor,i,n),l=mt(t,o.head,i,n);(r||a!=o.anchor||l!=o.head)&&(r||(r=e.ranges.slice(0,s)),r[s]=new K(a,l))}return r?X(r,e.primIndex):e}function mt(t,e,i,n){var r=!1,s=e,o=i||1;t.cantEdit=!1;t:for(;;){var a=En(t,s.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],h=c.marker;if((null==c.from||(h.inclusiveLeft?c.from<=s.ch:c.from<s.ch))&&(null==c.to||(h.inclusiveRight?c.to>=s.ch:c.to>s.ch))){if(n&&(ho(h,"beforeCursorEnter"),h.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!h.atomic)continue;var u=h.find(o<0?-1:1);if(0==ys(u,s)&&(u.ch+=o,u.ch<0?u=u.line>t.first?J(t,vs(u.line-1)):null:u.ch>a.text.length&&(u=u.line<t.first+t.size-1?vs(u.line+1,0):null),!u)){if(r)return n?(t.cantEdit=!0,vs(t.first,0)):mt(t,e,i,!0);r=!0,u=e,o=-o}s=u;continue t}}return s}}function gt(t){for(var e=t.display,i=t.doc,n={},r=n.cursors=document.createDocumentFragment(),s=n.selection=document.createDocumentFragment(),o=0;o<i.sel.ranges.length;o++){var a=i.sel.ranges[o],l=a.empty();(l||t.options.showCursorWhenSelecting)&&bt(t,a,r),l||wt(t,a,s)}if(t.options.moveInputWithCursor){var c=qt(t,i.sel.primary().head,"div"),h=e.wrapper.getBoundingClientRect(),u=e.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,c.top+u.top-h.top)),n.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,c.left+u.left-h.left))}return n}function vt(t,e){xr(t.display.cursorDiv,e.cursors),xr(t.display.selectionDiv,e.selection),null!=e.teTop&&(t.display.inputDiv.style.top=e.teTop+"px",t.display.inputDiv.style.left=e.teLeft+"px")}function yt(t){vt(t,gt(t))}function bt(t,e,i){var n=qt(t,e.head,"div",null,null,!t.options.singleCursorHeightPerLine),r=i.appendChild(wr("div","\xa0","CodeMirror-cursor"));if(r.style.left=n.left+"px",r.style.top=n.top+"px",r.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",n.other){var s=i.appendChild(wr("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=n.other.left+"px",s.style.top=n.other.top+"px",s.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function wt(t,e,i){function n(t,e,i,n){e<0&&(e=0),e=Math.round(e),n=Math.round(n),a.appendChild(wr("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==i?h-t:i)+"px; height: "+(n-e)+"px"))}function r(e,i,r){function s(i,n){return Yt(t,vs(e,i),"div",u,n)}var a,l,u=En(o,e),d=u.text.length;return Pr(On(u),i||0,null==r?d:r,function(t,e,o){var u,f,p,m=s(t,"left");if(t==e)u=m,f=p=m.left;else{if(u=s(e-1,"right"),"rtl"==o){var g=m;m=u,u=g}f=m.left,p=u.right}null==i&&0==t&&(f=c),u.top-m.top>3&&(n(f,m.top,null,m.bottom),f=c,m.bottom<u.top&&n(f,m.bottom,null,u.top)),null==r&&e==d&&(p=h),(!a||m.top<a.top||m.top==a.top&&m.left<a.left)&&(a=m),(!l||u.bottom>l.bottom||u.bottom==l.bottom&&u.right>l.right)&&(l=u),f<c+1&&(f=c),n(f,u.top,p-f,u.bottom)}),{start:a,end:l}}var s=t.display,o=t.doc,a=document.createDocumentFragment(),l=Mt(t.display),c=l.left,h=s.lineSpace.offsetWidth-l.right,u=e.from(),d=e.to();if(u.line==d.line)r(u.line,u.ch,d.ch);else{var f=En(o,u.line),p=En(o,d.line),m=Zi(f)==Zi(p),g=r(u.line,u.ch,m?f.text.length+1:null).end,v=r(d.line,m?0:null,d.ch).start;m&&(g.top<v.top-2?(n(g.right,g.top,null,g.bottom),n(c,v.top,v.left,v.bottom)):n(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&n(c,g.bottom,null,v.top)}i.appendChild(a)}function kt(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var i=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){e.cursorDiv.style.visibility=(i=!i)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function xt(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.viewTo&&t.state.highlight.set(e,gr(_t,t))}function _t(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.viewTo)){var i=+new Date+t.options.workTime,n=Rs(e.mode,Dt(t,e.frontier)),r=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.viewTo+500),function(s){if(e.frontier>=t.display.viewFrom){var o=s.styles,a=fn(t,s,n,!0);s.styles=a.styles;var l=s.styleClasses,c=a.classes;c?s.styleClasses=c:l&&(s.styleClasses=null);for(var h=!o||o.length!=s.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),u=0;!h&&u<o.length;++u)h=o[u]!=s.styles[u];h&&r.push(e.frontier),s.stateAfter=Rs(e.mode,n)}else mn(t,s.text,n),s.stateAfter=e.frontier%5==0?Rs(e.mode,n):null;if(++e.frontier,+new Date>i)return xt(t,t.options.workDelay),!0}),r.length&&le(t,function(){for(var e=0;e<r.length;e++)me(t,r[e],"text")})}}function Ct(t,e,i){for(var n,r,s=t.doc,o=i?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>o;--a){if(a<=s.first)return s.first;var l=En(s,a-1);if(l.stateAfter&&(!i||a<=s.frontier))return a;var c=yo(l.text,null,t.options.tabSize);(null==r||n>c)&&(r=a-1,n=c)}return r}function Dt(t,e,i){var n=t.doc,r=t.display;if(!n.mode.startState)return!0;var s=Ct(t,e,i),o=s>n.first&&En(n,s-1).stateAfter;return o=o?Rs(n.mode,o):Us(n.mode),n.iter(s,e,function(i){mn(t,i.text,o);var a=s==e-1||s%5==0||s>=r.viewFrom&&s<r.viewTo;i.stateAfter=a?Rs(n.mode,o):null,++s}),i&&(n.frontier=s),o}function St(t){return t.lineSpace.offsetTop}function Tt(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Mt(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=xr(t.measure,wr("pre","x")),i=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(t.cachedPaddingH=n),n}function Lt(t,e,i){var n=t.options.lineWrapping,r=n&&t.display.scroller.clientWidth;if(!e.measure.heights||n&&e.measure.width!=r){var s=e.measure.heights=[];if(n){e.measure.width=r;for(var o=e.text.firstChild.getClientRects(),a=0;a<o.length-1;a++){var l=o[a],c=o[a+1];Math.abs(l.bottom-c.bottom)>2&&s.push((l.bottom+c.top)/2-i.top)}}s.push(i.bottom-i.top)}}function Et(t,e,i){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var n=0;n<t.rest.length;n++)if(t.rest[n]==e)return{map:t.measure.maps[n],cache:t.measure.caches[n]};for(var n=0;n<t.rest.length;n++)if(Nn(t.rest[n])>i)return{map:t.measure.maps[n],cache:t.measure.caches[n],before:!0}}function $t(t,e){e=Zi(e);var i=Nn(e),n=t.display.externalMeasured=new de(t.doc,e,i);n.lineN=i;var r=n.built=vn(t,n);return n.text=r.pre,xr(t.display.lineMeasure,r.pre),n}function At(t,e,i,n){return Ft(t,Nt(t,e),i,n)}function It(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[ve(t,e)];var i=t.display.externalMeasured;return i&&e>=i.lineN&&e<i.lineN+i.size?i:void 0}function Nt(t,e){var i=Nn(e),n=It(t,i);n&&!n.text?n=null:n&&n.changes&&I(t,n,i,$(t)),n||(n=$t(t,e));var r=Et(n,e,i);return{line:e,view:n,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Ft(t,e,i,n,r){e.before&&(i=-1);var s,o=i+(n||"");return e.cache.hasOwnProperty(o)?s=e.cache[o]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(Lt(t,e.view,e.rect),e.hasHeights=!0),s=Pt(t,e,i,n),s.bogus||(e.cache[o]=s)),{left:s.left,right:s.right,top:r?s.rtop:s.top,bottom:r?s.rbottom:s.bottom}}function Pt(t,e,i,n){for(var r,s,o,a,l=e.map,c=0;c<l.length;c+=3){var h=l[c],u=l[c+1];if(i<h?(s=0,o=1,a="left"):i<u?(s=i-h,o=s+1):(c==l.length-3||i==u&&l[c+3]>i)&&(o=u-h,s=o-1,i>=u&&(a="right")),null!=s){if(r=l[c+2],h==u&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==s)for(;c&&l[c-2]==l[c-3]&&l[c-1].insertLeft;)r=l[2+(c-=3)],a="left";if("right"==n&&s==u-h)for(;c<l.length-3&&l[c+3]==l[c+4]&&!l[c+5].insertLeft;)r=l[(c+=3)+2],a="right";break}}var d;if(3==r.nodeType){for(var c=0;c<4;c++){for(;s&&br(e.line.text.charAt(h+s));)--s;for(;h+o<u&&br(e.line.text.charAt(h+o));)++o;if(Qr&&Jr<9&&0==s&&o==u-h)d=r.parentNode.getBoundingClientRect();else if(Qr&&t.options.lineWrapping){var f=ko(r,s,o).getClientRects();d=f.length?f["right"==n?f.length-1:0]:xs}else d=ko(r,s,o).getBoundingClientRect()||xs;if(d.left||d.right||0==s)break;o=s,s-=1,a="right"}Qr&&Jr<11&&(d=Ot(t.display.measure,d))}else{s>0&&(a=n="right");var f;d=t.options.lineWrapping&&(f=r.getClientRects()).length>1?f["right"==n?f.length-1:0]:r.getBoundingClientRect()}if(Qr&&Jr<9&&!s&&(!d||!d.left&&!d.right)){var p=r.parentNode.getClientRects()[0];d=p?{left:p.left,right:p.left+Qt(t.display),top:p.top,bottom:p.bottom}:xs}for(var m=d.top-e.rect.top,g=d.bottom-e.rect.top,v=(m+g)/2,y=e.view.measure.heights,c=0;c<y.length-1&&!(v<y[c]);c++);var b=c?y[c-1]:0,w=y[c],k={left:("right"==a?d.right:d.left)-e.rect.left,right:("left"==a?d.left:d.right)-e.rect.left,top:b,bottom:w};return d.left||d.right||(k.bogus=!0),t.options.singleCursorHeightPerLine||(k.rtop=m,k.rbottom=g),k}function Ot(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Fr(t))return e;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*i,right:e.right*i,top:e.top*n,bottom:e.bottom*n}}function Ht(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function zt(t){t.display.externalMeasure=null,kr(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Ht(t.display.view[e])}function Rt(t){zt(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Ut(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Bt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Wt(t,e,i,n){if(e.widgets)for(var r=0;r<e.widgets.length;++r)if(e.widgets[r].above){var s=sn(e.widgets[r]);i.top+=s,i.bottom+=s}if("line"==n)return i;n||(n="local");var o=Pn(e);if("local"==n?o+=St(t.display):o-=t.display.viewOffset,"page"==n||"window"==n){var a=t.display.lineSpace.getBoundingClientRect();o+=a.top+("window"==n?0:Bt());var l=a.left+("window"==n?0:Ut());i.left+=l,i.right+=l}return i.top+=o,i.bottom+=o,i}function jt(t,e,i){if("div"==i)return e;var n=e.left,r=e.top;if("page"==i)n-=Ut(),r-=Bt();else if("local"==i||!i){var s=t.display.sizer.getBoundingClientRect();n+=s.left,r+=s.top}var o=t.display.lineSpace.getBoundingClientRect();return{left:n-o.left,top:r-o.top}}function Yt(t,e,i,n,r){return n||(n=En(t.doc,e.line)),Wt(t,n,At(t,n,e.ch,r),i)}function qt(t,e,i,n,r,s){function o(e,o){var a=Ft(t,r,e,o?"right":"left",s);return o?a.left=a.right:a.right=a.left,Wt(t,n,a,i)}function a(t,e){var i=l[e],n=i.level%2;return t==Or(i)&&e&&i.level<l[e-1].level?(i=l[--e],t=Hr(i)-(i.level%2?0:1),n=!0):t==Hr(i)&&e<l.length-1&&i.level<l[e+1].level&&(i=l[++e],t=Or(i)-i.level%2,n=!1),n&&t==i.to&&t>i.from?o(t-1):o(t,n)}n=n||En(t.doc,e.line),r||(r=Nt(t,n));var l=On(n),c=e.ch;if(!l)return o(c);var h=Yr(l,c),u=a(c,h);return null!=Fo&&(u.other=a(c,Fo)),u}function Vt(t,e){var i=0,e=J(t.doc,e);t.options.lineWrapping||(i=Qt(t.display)*e.ch);var n=En(t.doc,e.line),r=Pn(n)+St(t.display);return{left:i,right:i,top:r,bottom:r+n.height}}function Gt(t,e,i,n){var r=vs(t,e);return r.xRel=n,i&&(r.outside=!0),r}function Kt(t,e,i){var n=t.doc;if((i+=t.display.viewOffset)<0)return Gt(n.first,0,!0,-1);var r=Fn(n,i),s=n.first+n.size-1;if(r>s)return Gt(n.first+n.size-1,En(n,s).text.length,!0,1);e<0&&(e=0);for(var o=En(n,r);;){var a=Xt(t,o,r,e,i),l=Ki(o),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;r=Nn(o=c.to.line)}}function Xt(t,e,i,n,r){function s(n){var r=qt(t,vs(i,n),"line",e,c);return a=!0,o>r.bottom?r.left-l:o<r.top?r.left+l:(a=!1,r.left)}var o=r-Pn(e),a=!1,l=2*t.display.wrapper.clientWidth,c=Nt(t,e),h=On(e),u=e.text.length,d=zr(e),f=Rr(e),p=s(d),m=a,g=s(f),v=a;if(n>g)return Gt(i,f,v,1);for(;;){if(h?f==d||f==Vr(e,d,1):f-d<=1){for(var y=n<p||n-p<=g-n?d:f,b=n-(y==d?p:g);br(e.text.charAt(y));)++y;return Gt(i,y,y==d?m:v,b<-1?-1:b>1?1:0)}var w=Math.ceil(u/2),k=d+w;if(h){k=d;for(var x=0;x<w;++x)k=Vr(e,k,1)}var _=s(k);_>n?(f=k,g=_,(v=a)&&(g+=1e3),u=w):(d=k,p=_,m=a,u-=w)}}function Zt(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==bs){bs=wr("pre");for(var e=0;e<49;++e)bs.appendChild(document.createTextNode("x")),bs.appendChild(wr("br"));bs.appendChild(document.createTextNode("x"))}xr(t.measure,bs);var i=bs.offsetHeight/50;return i>3&&(t.cachedTextHeight=i),kr(t.measure),i||1}function Qt(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=wr("span","xxxxxxxxxx"),i=wr("pre",[e]);xr(t.measure,i);var n=e.getBoundingClientRect(),r=(n.right-n.left)/10;return r>2&&(t.cachedCharWidth=r),r||10}function Jt(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++Cs},_s?_s.ops.push(t.curOp):t.curOp.ownsGroup=_s={ops:[t.curOp],delayedCallbacks:[]}}function te(t){var e=t.delayedCallbacks,i=0;do{for(;i<e.length;i++)e[i]();for(var n=0;n<t.ops.length;n++){var r=t.ops[n];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++](r.cm)}}while(i<e.length)}function ee(t){var e=t.curOp,i=e.ownsGroup;if(i)try{te(i)}finally{_s=null;for(var n=0;n<i.ops.length;n++)i.ops[n].cm.curOp=null;ie(i)}}function ie(t){for(var e=t.ops,i=0;i<e.length;i++)ne(e[i]);for(var i=0;i<e.length;i++)re(e[i]);for(var i=0;i<e.length;i++)se(e[i]);for(var i=0;i<e.length;i++)oe(e[i]);for(var i=0;i<e.length;i++)ae(e[i])}function ne(t){var e=t.cm,i=e.display;t.updateMaxLine&&f(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<i.viewFrom||t.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new _(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function re(t){t.updatedDisplay=t.mustUpdate&&C(t.cm,t.update)}function se(t){var e=t.cm,i=e.display;t.updatedDisplay&&L(e),t.barMeasure=g(e),i.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=At(e,i.maxLine,i.maxLine.text.length).left+3,t.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+t.adjustWidthTo+fo-i.scroller.clientWidth)),(t.updatedDisplay||t.selectionChanged)&&(t.newSelectionNodes=gt(e))}function oe(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Ue(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1),t.newSelectionNodes&&vt(e,t.newSelectionNodes),t.updatedDisplay&&T(e,t.barMeasure),(t.updatedDisplay||t.startHeight!=e.doc.height)&&v(e,t.barMeasure),t.selectionChanged&&kt(e),e.state.focused&&t.updateInput&&Ce(e,t.typing)}function ae(t){var e=t.cm,i=e.display,n=e.doc;if(null!=t.adjustWidthTo&&Math.abs(t.barMeasure.scrollWidth-e.display.scroller.scrollWidth)>1&&v(e),t.updatedDisplay&&D(e,t.update),null==i.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null!=t.scrollTop&&(i.scroller.scrollTop!=t.scrollTop||t.forceScroll)){var r=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,t.scrollTop));i.scroller.scrollTop=i.scrollbarV.scrollTop=n.scrollTop=r}if(null!=t.scrollLeft&&(i.scroller.scrollLeft!=t.scrollLeft||t.forceScroll)){var s=Math.max(0,Math.min(i.scroller.scrollWidth-i.scroller.clientWidth,t.scrollLeft));i.scroller.scrollLeft=i.scrollbarH.scrollLeft=n.scrollLeft=s,b(e)}if(t.scrollToPos){var o=pi(e,J(n,t.scrollToPos.from),J(n,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&fi(e,o)}var a=t.maybeHiddenMarkers,l=t.maybeUnhiddenMarkers;if(a)for(var c=0;c<a.length;++c)a[c].lines.length||ho(a[c],"hide");if(l)for(var c=0;c<l.length;++c)l[c].lines.length&&ho(l[c],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=e.display.scroller.scrollTop),t.updatedDisplay&&ts&&(e.options.lineWrapping&&M(e,t.barMeasure),t.barMeasure.scrollWidth>t.barMeasure.clientWidth&&t.barMeasure.scrollWidth<t.barMeasure.clientWidth+1&&!m(e)&&v(e)),t.changeObjs&&ho(e,"changes",e,t.changeObjs)}function le(t,e){if(t.curOp)return e();Jt(t);try{return e()}finally{ee(t)}}function ce(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Jt(t);try{return e.apply(t,arguments)}finally{ee(t)}}}function he(t){return function(){if(this.curOp)return t.apply(this,arguments);Jt(this);try{return t.apply(this,arguments)}finally{ee(this)}}}function ue(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Jt(e);try{return t.apply(this,arguments)}finally{ee(e)}}}function de(t,e,i){this.line=e,this.rest=Qi(e),this.size=this.rest?Nn(ur(this.rest))-i+1:1,this.node=this.text=null,this.hidden=en(t,e)}function fe(t,e,i){for(var n,r=[],s=e;s<i;s=n){var o=new de(t.doc,En(t.doc,s),s);n=s+o.size,r.push(o)}return r}function pe(t,e,i,n){null==e&&(e=t.doc.first),null==i&&(i=t.doc.first+t.doc.size),n||(n=0);var r=t.display;if(n&&i<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)gs&&Ji(t.doc,e)<r.viewTo&&ge(t);else if(i<=r.viewFrom)gs&&tn(t.doc,i+n)>r.viewFrom?ge(t):(r.viewFrom+=n,r.viewTo+=n);else if(e<=r.viewFrom&&i>=r.viewTo)ge(t);else if(e<=r.viewFrom){var s=ye(t,i,i+n,1);s?(r.view=r.view.slice(s.index),r.viewFrom=s.lineN,r.viewTo+=n):ge(t)}else if(i>=r.viewTo){var s=ye(t,e,e,-1);s?(r.view=r.view.slice(0,s.index),r.viewTo=s.lineN):ge(t)}else{var o=ye(t,e,e,-1),a=ye(t,i,i+n,1);o&&a?(r.view=r.view.slice(0,o.index).concat(fe(t,o.lineN,a.lineN)).concat(r.view.slice(a.index)),r.viewTo+=n):ge(t)}var l=r.externalMeasured;l&&(i<l.lineN?l.lineN+=n:e<l.lineN+l.size&&(r.externalMeasured=null))}function me(t,e,i){t.curOp.viewChanged=!0;var n=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(n.externalMeasured=null),!(e<n.viewFrom||e>=n.viewTo)){var s=n.view[ve(t,e)];if(null!=s.node){var o=s.changes||(s.changes=[]);-1==dr(o,i)&&o.push(i)}}}function ge(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function ve(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var i=t.display.view,n=0;n<i.length;n++)if((e-=i[n].size)<0)return n}function ye(t,e,i,n){var r,s=ve(t,e),o=t.display.view;if(!gs||i==t.doc.first+t.doc.size)return{index:s,lineN:i};for(var a=0,l=t.display.viewFrom;a<s;a++)l+=o[a].size;if(l!=e){if(n>0){if(s==o.length-1)return null;r=l+o[s].size-e,s++}else r=l-e;e+=r,i+=r}for(;Ji(t.doc,i)!=i;){if(s==(n<0?0:o.length-1))return null;i+=n*o[s-(n<0?1:0)].size,s+=n}return{index:s,lineN:i}}function be(t,e,i){var n=t.display;0==n.view.length||e>=n.viewTo||i<=n.viewFrom?(n.view=fe(t,e,i),n.viewFrom=e):(n.viewFrom>e?n.view=fe(t,e,n.viewFrom).concat(n.view):n.viewFrom<e&&(n.view=n.view.slice(ve(t,e))),n.viewFrom=e,n.viewTo<i?n.view=n.view.concat(fe(t,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,ve(t,i)))),n.viewTo=i}function we(t){for(var e=t.display.view,i=0,n=0;n<e.length;n++){var r=e[n];r.hidden||r.node&&!r.changes||++i}return i}function ke(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){_e(t),t.state.focused&&ke(t)})}function xe(t){function e(){_e(t)||i?(t.display.pollingFast=!1,ke(t)):(i=!0,t.display.poll.set(60,e))}var i=!1;t.display.pollingFast=!0,t.display.poll.set(20,e)}function _e(t){var e=t.display.input,i=t.display.prevInput,n=t.doc;if(!t.state.focused||$o(e)&&!i||Te(t)||t.options.disableInput)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var r=e.value;if(r==i&&!t.somethingSelected())return!1;if(Qr&&Jr>=9&&t.display.inputHasSelection===r||hs&&/[\uf700-\uf7ff]/.test(r))return Ce(t),!1;var s=!t.curOp;s&&Jt(t),t.display.shift=!1,8203!=r.charCodeAt(0)||n.sel!=t.display.selForContextMenu||i||(i="\u200b");for(var o=0,a=Math.min(i.length,r.length);o<a&&i.charCodeAt(o)==r.charCodeAt(o);)++o;var l=r.slice(o),c=Eo(l),h=null;t.state.pasteIncoming&&n.sel.ranges.length>1&&(Ds&&Ds.join("\n")==l?h=n.sel.ranges.length%Ds.length==0&&fr(Ds,Eo):c.length==n.sel.ranges.length&&(h=fr(c,function(t){return[t]})));for(var u=n.sel.ranges.length-1;u>=0;u--){var d=n.sel.ranges[u],f=d.from(),p=d.to();o<i.length?f=vs(f.line,f.ch-(i.length-o)):t.state.overwrite&&d.empty()&&!t.state.pasteIncoming&&(p=vs(p.line,Math.min(En(n,p.line).text.length,p.ch+ur(c).length)));var m=t.curOp.updateInput,g={from:f,to:p,text:h?h[u%h.length]:c,origin:t.state.pasteIncoming?"paste":t.state.cutIncoming?"cut":"+input"};if(oi(t.doc,g),ir(t,"inputRead",t,g),l&&!t.state.pasteIncoming&&t.options.electricChars&&t.options.smartIndent&&d.head.ch<100&&(!u||n.sel.ranges[u-1].head.line!=d.head.line)){var v=t.getModeAt(d.head),y=$s(g);if(v.electricChars){for(var b=0;b<v.electricChars.length;b++)if(l.indexOf(v.electricChars.charAt(b))>-1){wi(t,y.line,"smart");break}}else v.electricInput&&v.electricInput.test(En(n,y.line).text.slice(0,y.ch))&&wi(t,y.line,"smart")}}return yi(t),t.curOp.updateInput=m,t.curOp.typing=!0,r.length>1e3||r.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=r,s&&ee(t),t.state.pasteIncoming=t.state.cutIncoming=!1,!0}function Ce(t,e){var i,n,r=t.doc;if(t.somethingSelected()){t.display.prevInput="";var s=r.sel.primary();i=Ao&&(s.to().line-s.from().line>100||(n=t.getSelection()).length>1e3);var o=i?"-":n||t.getSelection();t.display.input.value=o,t.state.focused&&wo(t.display.input),Qr&&Jr>=9&&(t.display.inputHasSelection=o)}else e||(t.display.prevInput=t.display.input.value="",Qr&&Jr>=9&&(t.display.inputHasSelection=null));t.display.inaccurateSelection=i}function De(t){"nocursor"==t.options.readOnly||cs&&Cr()==t.display.input||t.display.input.focus()}function Se(t){t.state.focused||(De(t),Ze(t))}function Te(t){return t.options.readOnly||t.doc.cantEdit}function Me(t){function e(){t.state.focused&&setTimeout(gr(De,t),0)}function i(e){rr(t,e)||ao(e)}function n(e){if(t.somethingSelected())Ds=t.getSelections(),r.inaccurateSelection&&(r.prevInput="",r.inaccurateSelection=!1,r.input.value=Ds.join("\n"),wo(r.input));else{for(var i=[],n=[],s=0;s<t.doc.sel.ranges.length;s++){var o=t.doc.sel.ranges[s].head.line,a={anchor:vs(o,0),head:vs(o+1,0)};n.push(a),i.push(t.getRange(a.anchor,a.head))}"cut"==e.type?t.setSelections(n,null,mo):(r.prevInput="",r.input.value=i.join("\n"),wo(r.input)),Ds=i}"cut"==e.type&&(t.state.cutIncoming=!0)}var r=t.display;lo(r.scroller,"mousedown",ce(t,Ae)),Qr&&Jr<11?lo(r.scroller,"dblclick",ce(t,function(e){if(!rr(t,e)){var i=$e(t,e);if(i&&!Oe(t,e)&&!Ee(t.display,e)){so(e);var n=t.findWordAt(i);rt(t.doc,n.anchor,n.head)}}})):lo(r.scroller,"dblclick",function(e){rr(t,e)||so(e)}),lo(r.lineSpace,"selectstart",function(t){Ee(r,t)||so(t)}),ps||lo(r.scroller,"contextmenu",function(e){Je(t,e)}),lo(r.scroller,"scroll",function(){r.scroller.clientHeight&&(Re(t,r.scroller.scrollTop),Ue(t,r.scroller.scrollLeft,!0),ho(t,"scroll",t))}),lo(r.scrollbarV,"scroll",function(){r.scroller.clientHeight&&Re(t,r.scrollbarV.scrollTop)}),lo(r.scrollbarH,"scroll",function(){r.scroller.clientHeight&&Ue(t,r.scrollbarH.scrollLeft)}),lo(r.scroller,"mousewheel",function(e){Be(t,e)}),lo(r.scroller,"DOMMouseScroll",function(e){Be(t,e)}),lo(r.scrollbarH,"mousedown",e),lo(r.scrollbarV,"mousedown",e),lo(r.wrapper,"scroll",function(){r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),lo(r.input,"keyup",function(e){Ke.call(t,e)}),lo(r.input,"input",function(){Qr&&Jr>=9&&t.display.inputHasSelection&&(t.display.inputHasSelection=null),xe(t)}),lo(r.input,"keydown",ce(t,Ve)),lo(r.input,"keypress",ce(t,Xe)),lo(r.input,"focus",gr(Ze,t)),lo(r.input,"blur",gr(Qe,t)),t.options.dragDrop&&(lo(r.scroller,"dragstart",function(e){ze(t,e)}),lo(r.scroller,"dragenter",i),lo(r.scroller,"dragover",i),lo(r.scroller,"drop",ce(t,He))),lo(r.scroller,"paste",function(e){Ee(r,e)||(t.state.pasteIncoming=!0,De(t),xe(t))}),lo(r.input,"paste",function(){if(ts&&!t.state.fakedLastChar&&!(new Date-t.state.lastMiddleDown<200)){var e=r.input.selectionStart,i=r.input.selectionEnd;r.input.value+="$",r.input.selectionEnd=i,r.input.selectionStart=e,t.state.fakedLastChar=!0}t.state.pasteIncoming=!0,xe(t)}),lo(r.input,"cut",n),lo(r.input,"copy",n),ss&&lo(r.sizer,"mouseup",function(){Cr()==r.input&&r.input.blur(),De(t)})}function Le(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,t.setSize()}function Ee(t,e){for(var i=tr(e);i!=t.wrapper;i=i.parentNode)if(!i||i.ignoreEvents||i.parentNode==t.sizer&&i!=t.mover)return!0}function $e(t,e,i,n){var r=t.display;if(!i){var s=tr(e);if(s==r.scrollbarH||s==r.scrollbarV||s==r.scrollbarFiller||s==r.gutterFiller)return null}var o,a,l=r.lineSpace.getBoundingClientRect();try{o=e.clientX-l.left,a=e.clientY-l.top}catch(e){return null}var c,h=Kt(t,o,a);if(n&&1==h.xRel&&(c=En(t.doc,h.line).text).length==h.ch){var u=yo(c,c.length,t.options.tabSize)-c.length;h=vs(h.line,Math.max(0,Math.round((o-Mt(t.display).left)/Qt(t.display))-u))}return h}function Ae(t){if(!rr(this,t)){var e=this,i=e.display;if(i.shift=t.shiftKey,Ee(i,t))return void(ts||(i.scroller.draggable=!1,setTimeout(function(){i.scroller.draggable=!0},100)));if(!Oe(e,t)){var n=$e(e,t);switch(window.focus(),er(t)){case 1:n?Ie(e,t,n):tr(t)==i.scroller&&so(t);break;case 2:ts&&(e.state.lastMiddleDown=+new Date),n&&rt(e.doc,n),setTimeout(gr(De,e),20),so(t);break;case 3:ps&&Je(e,t)}}}}function Ie(t,e,i){setTimeout(gr(Se,t),0);var n,r=+new Date;ks&&ks.time>r-400&&0==ys(ks.pos,i)?n="triple":ws&&ws.time>r-400&&0==ys(ws.pos,i)?(n="double",ks={time:r,pos:i}):(n="single",ws={time:r,pos:i});var s=t.doc.sel,o=hs?e.metaKey:e.ctrlKey;t.options.dragDrop&&Lo&&!Te(t)&&"single"==n&&s.contains(i)>-1&&s.somethingSelected()?Ne(t,e,i,o):Fe(t,e,i,n,o)}function Ne(t,e,i,n){var r=t.display,s=ce(t,function(o){ts&&(r.scroller.draggable=!1),t.state.draggingText=!1,co(document,"mouseup",s),co(r.scroller,"drop",s),Math.abs(e.clientX-o.clientX)+Math.abs(e.clientY-o.clientY)<10&&(so(o),n||rt(t.doc,i),De(t),Qr&&9==Jr&&setTimeout(function(){document.body.focus(),De(t)},20))});ts&&(r.scroller.draggable=!0),t.state.draggingText=s,r.scroller.dragDrop&&r.scroller.dragDrop(),
lo(document,"mouseup",s),lo(r.scroller,"drop",s)}function Fe(t,e,i,n,r){function s(e){if(0!=ys(m,e))if(m=e,"rect"==n){for(var r=[],s=t.options.tabSize,o=yo(En(c,i.line).text,i.ch,s),a=yo(En(c,e.line).text,e.ch,s),l=Math.min(o,a),f=Math.max(o,a),p=Math.min(i.line,e.line),g=Math.min(t.lastLine(),Math.max(i.line,e.line));p<=g;p++){var v=En(c,p).text,y=cr(v,l,s);l==f?r.push(new K(vs(p,y),vs(p,y))):v.length>y&&r.push(new K(vs(p,y),vs(p,cr(v,f,s))))}r.length||r.push(new K(i,i)),ht(c,X(d.ranges.slice(0,u).concat(r),u),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b=h,w=b.anchor,k=e;if("single"!=n){if("double"==n)var x=t.findWordAt(e);else var x=new K(vs(e.line,0),J(c,vs(e.line+1,0)));ys(x.anchor,w)>0?(k=x.head,w=V(b.from(),x.anchor)):(k=x.anchor,w=q(b.to(),x.head))}var r=d.ranges.slice(0);r[u]=new K(J(c,w),k),ht(c,X(r,u),go)}}function o(e){var i=++v,r=$e(t,e,!0,"rect"==n);if(r)if(0!=ys(r,m)){Se(t),s(r);var a=y(l,c);(r.line>=a.to||r.line<a.from)&&setTimeout(ce(t,function(){v==i&&o(e)}),150)}else{var h=e.clientY<g.top?-20:e.clientY>g.bottom?20:0;h&&setTimeout(ce(t,function(){v==i&&(l.scroller.scrollTop+=h,o(e))}),50)}}function a(e){v=Infinity,so(e),De(t),co(document,"mousemove",b),co(document,"mouseup",w),c.history.lastSelOrigin=null}var l=t.display,c=t.doc;so(e);var h,u,d=c.sel;if(r&&!e.shiftKey?(u=c.sel.contains(i),h=u>-1?c.sel.ranges[u]:new K(i,i)):h=c.sel.primary(),e.altKey)n="rect",r||(h=new K(i,i)),i=$e(t,e,!0,!0),u=-1;else if("double"==n){var f=t.findWordAt(i);h=t.display.shift||c.extend?nt(c,h,f.anchor,f.head):f}else if("triple"==n){var p=new K(vs(i.line,0),J(c,vs(i.line+1,0)));h=t.display.shift||c.extend?nt(c,h,p.anchor,p.head):p}else h=nt(c,h,i);r?u>-1?ot(c,u,h,go):(u=c.sel.ranges.length,ht(c,X(c.sel.ranges.concat([h]),u),{scroll:!1,origin:"*mouse"})):(u=0,ht(c,new G([h],0),go),d=c.sel);var m=i,g=l.wrapper.getBoundingClientRect(),v=0,b=ce(t,function(t){er(t)?o(t):a(t)}),w=ce(t,a);lo(document,"mousemove",b),lo(document,"mouseup",w)}function Pe(t,e,i,n,r){try{var s=e.clientX,o=e.clientY}catch(e){return!1}if(s>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;n&&so(e);var a=t.display,l=a.lineDiv.getBoundingClientRect();if(o>l.bottom||!or(t,i))return Jn(e);o-=l.top-a.viewOffset;for(var c=0;c<t.options.gutters.length;++c){var h=a.gutters.childNodes[c];if(h&&h.getBoundingClientRect().right>=s){return r(t,i,t,Fn(t.doc,o),t.options.gutters[c],e),Jn(e)}}}function Oe(t,e){return Pe(t,e,"gutterClick",!0,ir)}function He(t){var e=this;if(!rr(e,t)&&!Ee(e.display,t)){so(t),Qr&&(Ss=+new Date);var i=$e(e,t,!0),n=t.dataTransfer.files;if(i&&!Te(e))if(n&&n.length&&window.FileReader&&window.File)for(var r=n.length,s=Array(r),o=0,a=function(t,n){var a=new FileReader;a.onload=ce(e,function(){if(s[n]=a.result,++o==r){i=J(e.doc,i);var t={from:i,to:i,text:Eo(s.join("\n")),origin:"paste"};oi(e.doc,t),ct(e.doc,Z(i,$s(t)))}}),a.readAsText(t)},l=0;l<r;++l)a(n[l],l);else{if(e.state.draggingText&&e.doc.sel.contains(i)>-1)return e.state.draggingText(t),void setTimeout(gr(De,e),20);try{var s=t.dataTransfer.getData("Text");if(s){if(e.state.draggingText&&!(hs?t.metaKey:t.ctrlKey))var c=e.listSelections();if(ut(e.doc,Z(i,i)),c)for(var l=0;l<c.length;++l)di(e.doc,"",c[l].anchor,c[l].head,"drag");e.replaceSelection(s,"around","paste"),De(e)}}catch(t){}}}}function ze(t,e){if(Qr&&(!t.state.draggingText||+new Date-Ss<100))return void ao(e);if(!rr(t,e)&&!Ee(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.setDragImage&&!rs)){var i=wr("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ns&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),e.dataTransfer.setDragImage(i,0,0),ns&&i.parentNode.removeChild(i)}}function Re(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,Kr||S(t,{top:e}),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),Kr&&S(t),xt(t,100))}function Ue(t,e,i){(i?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,b(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function Be(t,e){var i=e.wheelDeltaX,n=e.wheelDeltaY;null==i&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(i=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta);var r=t.display,s=r.scroller;if(i&&s.scrollWidth>s.clientWidth||n&&s.scrollHeight>s.clientHeight){if(n&&hs&&ts)t:for(var o=e.target,a=r.view;o!=s;o=o.parentNode)for(var l=0;l<a.length;l++)if(a[l].node==o){t.display.currentWheelTarget=o;break t}if(i&&!Kr&&!ns&&null!=Ms)return n&&Re(t,Math.max(0,Math.min(s.scrollTop+n*Ms,s.scrollHeight-s.clientHeight))),Ue(t,Math.max(0,Math.min(s.scrollLeft+i*Ms,s.scrollWidth-s.clientWidth))),so(e),void(r.wheelStartX=null);if(n&&null!=Ms){var c=n*Ms,h=t.doc.scrollTop,u=h+r.wrapper.clientHeight;c<0?h=Math.max(0,h+c-50):u=Math.min(t.doc.height,u+c+50),S(t,{top:h,bottom:u})}Ts<20&&(null==r.wheelStartX?(r.wheelStartX=s.scrollLeft,r.wheelStartY=s.scrollTop,r.wheelDX=i,r.wheelDY=n,setTimeout(function(){if(null!=r.wheelStartX){var t=s.scrollLeft-r.wheelStartX,e=s.scrollTop-r.wheelStartY,i=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,i&&(Ms=(Ms*Ts+i)/(Ts+1),++Ts)}},200)):(r.wheelDX+=i,r.wheelDY+=n))}}function We(t,e,i){if("string"==typeof e&&!(e=Bs[e]))return!1;t.display.pollingFast&&_e(t)&&(t.display.pollingFast=!1);var n=t.display.shift,r=!1;try{Te(t)&&(t.state.suppressEdits=!0),i&&(t.display.shift=!1),r=e(t)!=po}finally{t.display.shift=n,t.state.suppressEdits=!1}return r}function je(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function Ye(t,e){var i=Si(t.options.keyMap),n=i.auto;clearTimeout(Ls),n&&!Ys(e)&&(Ls=setTimeout(function(){Si(t.options.keyMap)==i&&(t.options.keyMap=n.call?n.call(null,t):n,a(t))},50));var r=qs(e,!0),s=!1;if(!r)return!1;var o=je(t);return s=e.shiftKey?js("Shift-"+r,o,function(e){return We(t,e,!0)})||js(r,o,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return We(t,e)}):js(r,o,function(e){return We(t,e)}),s&&(so(e),kt(t),ir(t,"keyHandled",t,r,e)),s}function qe(t,e,i){var n=js("'"+i+"'",je(t),function(e){return We(t,e,!0)});return n&&(so(e),kt(t),ir(t,"keyHandled",t,"'"+i+"'",e)),n}function Ve(t){var e=this;if(Se(e),!rr(e,t)){Qr&&Jr<11&&27==t.keyCode&&(t.returnValue=!1);var i=t.keyCode;e.display.shift=16==i||t.shiftKey;var n=Ye(e,t);ns&&(Es=n?i:null,!n&&88==i&&!Ao&&(hs?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||Ge(e)}}function Ge(t){function e(t){18!=t.keyCode&&t.altKey||(Sr(i,"CodeMirror-crosshair"),co(document,"keyup",e),co(document,"mouseover",e))}var i=t.display.lineDiv;Tr(i,"CodeMirror-crosshair"),lo(document,"keyup",e),lo(document,"mouseover",e)}function Ke(t){16==t.keyCode&&(this.doc.sel.shift=!1),rr(this,t)}function Xe(t){var e=this;if(!(rr(e,t)||t.ctrlKey&&!t.altKey||hs&&t.metaKey)){var i=t.keyCode,n=t.charCode;if(ns&&i==Es)return Es=null,void so(t);if(!(ns&&(!t.which||t.which<10)||ss)||!Ye(e,t)){qe(e,t,String.fromCharCode(null==n?i:n))||(Qr&&Jr>=9&&(e.display.inputHasSelection=null),xe(e))}}}function Ze(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(ho(t,"focus",t),t.state.focused=!0,Tr(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(Ce(t),ts&&setTimeout(gr(Ce,t,!0),0))),ke(t),kt(t))}function Qe(t){t.state.focused&&(ho(t,"blur",t),t.state.focused=!1,Sr(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150)}function Je(t,e){function i(){if(null!=r.input.selectionStart){var e=t.somethingSelected(),i=r.input.value="\u200b"+(e?r.input.value:"");r.prevInput=e?"":"\u200b",r.input.selectionStart=1,r.input.selectionEnd=i.length,r.selForContextMenu=t.doc.sel}}function n(){if(r.inputDiv.style.position="relative",r.input.style.cssText=a,Qr&&Jr<9&&(r.scrollbarV.scrollTop=r.scroller.scrollTop=o),ke(t),null!=r.input.selectionStart){(!Qr||Qr&&Jr<9)&&i();var e=0,n=function(){r.selForContextMenu==t.doc.sel&&0==r.input.selectionStart?ce(t,Bs.selectAll)(t):e++<10?r.detectingSelectAll=setTimeout(n,500):Ce(t)};r.detectingSelectAll=setTimeout(n,200)}}if(!rr(t,e,"contextmenu")){var r=t.display;if(!Ee(r,e)&&!ti(t,e)){var s=$e(t,e),o=r.scroller.scrollTop;if(s&&!ns){t.options.resetSelectionOnContextMenu&&-1==t.doc.sel.contains(s)&&ce(t,ht)(t.doc,Z(s),mo);var a=r.input.style.cssText;if(r.inputDiv.style.position="absolute",r.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(Qr?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ts)var l=window.scrollY;if(De(t),ts&&window.scrollTo(null,l),Ce(t),t.somethingSelected()||(r.input.value=r.prevInput=" "),r.selForContextMenu=t.doc.sel,clearTimeout(r.detectingSelectAll),Qr&&Jr>=9&&i(),ps){ao(e);var c=function(){co(window,"mouseup",c),setTimeout(n,20)};lo(window,"mouseup",c)}else setTimeout(n,50)}}}}function ti(t,e){return!!or(t,"gutterContextMenu")&&Pe(t,e,"gutterContextMenu",!1,ho)}function ei(t,e){if(ys(t,e.from)<0)return t;if(ys(t,e.to)<=0)return $s(e);var i=t.line+e.text.length-(e.to.line-e.from.line)-1,n=t.ch;return t.line==e.to.line&&(n+=$s(e).ch-e.to.ch),vs(i,n)}function ii(t,e){for(var i=[],n=0;n<t.sel.ranges.length;n++){var r=t.sel.ranges[n];i.push(new K(ei(r.anchor,e),ei(r.head,e)))}return X(i,t.sel.primIndex)}function ni(t,e,i){return t.line==e.line?vs(i.line,t.ch-e.ch+i.ch):vs(i.line+(t.line-e.line),t.ch)}function ri(t,e,i){for(var n=[],r=vs(t.first,0),s=r,o=0;o<e.length;o++){var a=e[o],l=ni(a.from,r,s),c=ni($s(a),r,s);if(r=a.to,s=c,"around"==i){var h=t.sel.ranges[o],u=ys(h.head,h.anchor)<0;n[o]=new K(u?c:l,u?l:c)}else n[o]=new K(l,l)}return new G(n,t.sel.primIndex)}function si(t,e,i){var n={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return i&&(n.update=function(e,i,n,r){e&&(this.from=J(t,e)),i&&(this.to=J(t,i)),n&&(this.text=n),r!==undefined&&(this.origin=r)}),ho(t,"beforeChange",t,n),t.cm&&ho(t.cm,"beforeChange",t.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function oi(t,e,i){if(t.cm){if(!t.cm.curOp)return ce(t.cm,oi)(t,e,i);if(t.cm.state.suppressEdits)return}if(!(or(t,"beforeChange")||t.cm&&or(t.cm,"beforeChange"))||(e=si(t,e,!0))){var n=ms&&!i&&Ui(t,e.from,e.to);if(n)for(var r=n.length-1;r>=0;--r)ai(t,{from:n[r].from,to:n[r].to,text:r?[""]:e.text});else ai(t,e)}}function ai(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ys(e.from,e.to)){var i=ii(t,e);Bn(t,e,i,t.cm?t.cm.curOp.id:NaN),hi(t,e,i,Hi(t,e));var n=[];Mn(t,function(t,i){i||-1!=dr(n,t.history)||(Qn(t.history,e),n.push(t.history)),hi(t,e,null,Hi(t,e))})}}function li(t,e,i){if(!t.cm||!t.cm.state.suppressEdits){for(var n,r=t.history,s=t.sel,o="undo"==e?r.done:r.undone,a="undo"==e?r.undone:r.done,l=0;l<o.length&&(n=o[l],i?!n.ranges||n.equals(t.sel):n.ranges);l++);if(l!=o.length){for(r.lastOrigin=r.lastSelOrigin=null;n=o.pop(),n.ranges;){if(Yn(n,a),i&&!n.equals(t.sel))return void ht(t,n,{clearRedo:!1});s=n}var c=[];Yn(s,a),a.push({changes:c,generation:r.generation}),r.generation=n.generation||++r.maxGeneration;for(var h=or(t,"beforeChange")||t.cm&&or(t.cm,"beforeChange"),l=n.changes.length-1;l>=0;--l){var u=n.changes[l];if(u.origin=e,h&&!si(t,u,!1))return void(o.length=0);c.push(zn(t,u));var d=l?ii(t,u):ur(o);hi(t,u,d,Ri(t,u)),!l&&t.cm&&t.cm.scrollIntoView({from:u.from,to:$s(u)});var f=[];Mn(t,function(t,e){e||-1!=dr(f,t.history)||(Qn(t.history,u),f.push(t.history)),hi(t,u,null,Ri(t,u))})}}}}function ci(t,e){if(0!=e&&(t.first+=e,t.sel=new G(fr(t.sel.ranges,function(t){return new K(vs(t.anchor.line+e,t.anchor.ch),vs(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){pe(t.cm,t.first,t.first-e,e);for(var i=t.cm.display,n=i.viewFrom;n<i.viewTo;n++)me(t.cm,n,"gutter")}}function hi(t,e,i,n){if(t.cm&&!t.cm.curOp)return ce(t.cm,hi)(t,e,i,n);if(e.to.line<t.first)return void ci(t,e.text.length-1-(e.to.line-e.from.line));if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);ci(t,r),e={from:vs(t.first,0),to:vs(e.to.line+r,e.to.ch),text:[ur(e.text)],origin:e.origin}}var s=t.lastLine();e.to.line>s&&(e={from:e.from,to:vs(s,En(t,s).text.length),text:[e.text[0]],origin:e.origin}),e.removed=$n(t,e.from,e.to),i||(i=ii(t,e)),t.cm?ui(t.cm,e,n):Dn(t,e,n),ut(t,i,mo)}}function ui(t,e,i){var n=t.doc,r=t.display,o=e.from,a=e.to,l=!1,c=o.line;t.options.lineWrapping||(c=Nn(Zi(En(n,o.line))),n.iter(c,a.line+1,function(t){if(t==r.maxLine)return l=!0,!0})),n.sel.contains(e.from,e.to)>-1&&sr(t),Dn(n,e,i,s(t)),t.options.lineWrapping||(n.iter(c,o.line+e.text.length,function(t){var e=d(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,l=!1)}),l&&(t.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,o.line),xt(t,400);var h=e.text.length-(a.line-o.line)-1;o.line!=a.line||1!=e.text.length||Cn(t.doc,e)?pe(t,o.line,a.line+1,h):me(t,o.line,"text");var u=or(t,"changes"),f=or(t,"change");if(f||u){var p={from:o,to:a,text:e.text,removed:e.removed,origin:e.origin};f&&ir(t,"change",t,p),u&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(p)}t.display.selForContextMenu=null}function di(t,e,i,n,r){if(n||(n=i),ys(n,i)<0){var s=n;n=i,i=s}"string"==typeof e&&(e=Eo(e)),oi(t,{from:i,to:n,text:e,origin:r})}function fi(t,e){var i=t.display,n=i.sizer.getBoundingClientRect(),r=null;if(e.top+n.top<0?r=!0:e.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!as){var s=wr("div","\u200b",null,"position: absolute; top: "+(e.top-i.viewOffset-St(t.display))+"px; height: "+(e.bottom-e.top+fo)+"px; left: "+e.left+"px; width: 2px;");t.display.lineSpace.appendChild(s),s.scrollIntoView(r),t.display.lineSpace.removeChild(s)}}function pi(t,e,i,n){null==n&&(n=0);for(var r=0;r<5;r++){var s=!1,o=qt(t,e),a=i&&i!=e?qt(t,i):o,l=gi(t,Math.min(o.left,a.left),Math.min(o.top,a.top)-n,Math.max(o.left,a.left),Math.max(o.bottom,a.bottom)+n),c=t.doc.scrollTop,h=t.doc.scrollLeft;if(null!=l.scrollTop&&(Re(t,l.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(s=!0)),null!=l.scrollLeft&&(Ue(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-h)>1&&(s=!0)),!s)return o}}function mi(t,e,i,n,r){var s=gi(t,e,i,n,r);null!=s.scrollTop&&Re(t,s.scrollTop),null!=s.scrollLeft&&Ue(t,s.scrollLeft)}function gi(t,e,i,n,r){var s=t.display,o=Zt(t.display);i<0&&(i=0);var a=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:s.scroller.scrollTop,l=s.scroller.clientHeight-fo,c={};r-i>l&&(r=i+l);var h=t.doc.height+Tt(s),u=i<o,d=r>h-o;if(i<a)c.scrollTop=u?0:i;else if(r>a+l){var f=Math.min(i,(d?h:r)-l);f!=a&&(c.scrollTop=f)}var p=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:s.scroller.scrollLeft,m=s.scroller.clientWidth-fo-s.gutters.offsetWidth,g=n-e>m;return g&&(n=e+m),e<10?c.scrollLeft=0:e<p?c.scrollLeft=Math.max(0,e-(g?0:10)):n>m+p-3&&(c.scrollLeft=n+(g?0:10)-m),c}function vi(t,e,i){null==e&&null==i||bi(t),null!=e&&(t.curOp.scrollLeft=(null==t.curOp.scrollLeft?t.doc.scrollLeft:t.curOp.scrollLeft)+e),null!=i&&(t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+i)}function yi(t){bi(t);var e=t.getCursor(),i=e,n=e;t.options.lineWrapping||(i=e.ch?vs(e.line,e.ch-1):e,n=vs(e.line,e.ch+1)),t.curOp.scrollToPos={from:i,to:n,margin:t.options.cursorScrollMargin,isCursor:!0}}function bi(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var i=Vt(t,e.from),n=Vt(t,e.to),r=gi(t,Math.min(i.left,n.left),Math.min(i.top,n.top)-e.margin,Math.max(i.right,n.right),Math.max(i.bottom,n.bottom)+e.margin);t.scrollTo(r.scrollLeft,r.scrollTop)}}function wi(t,e,i,n){var r,s=t.doc;null==i&&(i="add"),"smart"==i&&(s.mode.indent?r=Dt(t,e):i="prev");var o=t.options.tabSize,a=En(s,e),l=yo(a.text,null,o);a.stateAfter&&(a.stateAfter=null);var c,h=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==i&&((c=s.mode.indent(r,a.text.slice(h.length),a.text))==po||c>150)){if(!n)return;i="prev"}}else c=0,i="not";"prev"==i?c=e>s.first?yo(En(s,e-1).text,null,o):0:"add"==i?c=l+t.options.indentUnit:"subtract"==i?c=l-t.options.indentUnit:"number"==typeof i&&(c=l+i),c=Math.max(0,c);var u="",d=0;if(t.options.indentWithTabs)for(var f=Math.floor(c/o);f;--f)d+=o,u+="\t";if(d<c&&(u+=hr(c-d)),u!=h)di(s,u,vs(e,0),vs(e,h.length),"+input");else for(var f=0;f<s.sel.ranges.length;f++){var p=s.sel.ranges[f];if(p.head.line==e&&p.head.ch<h.length){var d=vs(e,h.length);ot(s,f,new K(d,d));break}}a.stateAfter=null}function ki(t,e,i,n){var r=e,s=e;return"number"==typeof e?s=En(t,Q(t,e)):r=Nn(e),null==r?null:(n(s,r)&&t.cm&&me(t.cm,r,i),s)}function xi(t,e){for(var i=t.doc.sel.ranges,n=[],r=0;r<i.length;r++){for(var s=e(i[r]);n.length&&ys(s.from,ur(n).to)<=0;){var o=n.pop();if(ys(o.from,s.from)<0){s.from=o.from;break}}n.push(s)}le(t,function(){for(var e=n.length-1;e>=0;e--)di(t.doc,"",n[e].from,n[e].to,"+delete");yi(t)})}function _i(t,e,i,n,r){function s(){var e=a+i;return e<t.first||e>=t.first+t.size?u=!1:(a=e,h=En(t,e))}function o(t){var e=(r?Vr:Gr)(h,l,i,!0);if(null==e){if(t||!s())return u=!1;l=r?(i<0?Rr:zr)(h):i<0?h.text.length:0}else l=e;return!0}var a=e.line,l=e.ch,c=i,h=En(t,a),u=!0;if("char"==n)o();else if("column"==n)o(!0);else if("word"==n||"group"==n)for(var d=null,f="group"==n,p=t.cm&&t.cm.getHelper(e,"wordChars"),m=!0;!(i<0)||o(!m);m=!1){var g=h.text.charAt(l)||"\n",v=vr(g,p)?"w":f&&"\n"==g?"n":!f||/\s/.test(g)?null:"p";if(!f||m||v||(v="s"),d&&d!=v){i<0&&(i=1,o());break}if(v&&(d=v),i>0&&!o(!m))break}var y=mt(t,vs(a,l),c,!0);return u||(y.hitSide=!0),y}function Ci(t,e,i,n){var r,s=t.doc,o=e.left;if("page"==n){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=e.top+i*(a-(i<0?1.5:.5)*Zt(t.display))}else"line"==n&&(r=i>0?e.bottom+3:e.top-3);for(;;){var l=Kt(t,o,r);if(!l.outside)break;if(i<0?r<=0:r>=s.height){l.hitSide=!0;break}r+=5*i}return l}function Di(e,i,n,r){t.defaults[e]=i,n&&(Is[e]=r?function(t,e,i){i!=Ns&&n(t,e,i)}:n)}function Si(t){return"string"==typeof t?Ws[t]:t}function Ti(t,e,i,n,r){if(n&&n.shared)return Mi(t,e,i,n,r);if(t.cm&&!t.cm.curOp)return ce(t.cm,Ti)(t,e,i,n,r);var s=new Gs(t,r),o=ys(e,i);if(n&&mr(n,s,!1),o>0||0==o&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=wr("span",[s.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||(s.widgetNode.ignoreEvents=!0),n.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(Xi(t,e.line,e,i,s)||e.line!=i.line&&Xi(t,i.line,e,i,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");gs=!0}s.addToHistory&&Bn(t,{from:e,to:i,origin:"markText"},t.sel,NaN);var a,l=e.line,c=t.cm;if(t.iter(l,i.line+1,function(t){c&&s.collapsed&&!c.options.lineWrapping&&Zi(t)==c.display.maxLine&&(a=!0),s.collapsed&&l!=e.line&&In(t,0),Fi(t,new Ai(s,l==e.line?e.ch:null,l==i.line?i.ch:null)),++l}),s.collapsed&&t.iter(e.line,i.line+1,function(e){en(t,e)&&In(e,0)}),s.clearOnEnter&&lo(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(ms=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),s.collapsed&&(s.id=++Ks,s.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),s.collapsed)pe(c,e.line,i.line+1);else if(s.className||s.title||s.startStyle||s.endStyle)for(var h=e.line;h<=i.line;h++)me(c,h,"text");s.atomic&&ft(c.doc),ir(c,"markerAdded",c,s)}return s}function Mi(t,e,i,n,r){n=mr(n),n.shared=!1;var s=[Ti(t,e,i,n,r)],o=s[0],a=n.widgetNode;return Mn(t,function(t){a&&(n.widgetNode=a.cloneNode(!0)),s.push(Ti(t,J(t,e),J(t,i),n,r));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;o=ur(s)}),new Xs(s,o)}function Li(t){return t.findMarks(vs(t.first,0),t.clipPos(vs(t.lastLine())),function(t){return t.parent})}function Ei(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=n.find(),s=t.clipPos(r.from),o=t.clipPos(r.to);if(ys(s,o)){var a=Ti(t,s,o,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}function $i(t){for(var e=0;e<t.length;e++){var i=t[e],n=[i.primary.doc];Mn(i.primary.doc,function(t){n.push(t)});for(var r=0;r<i.markers.length;r++){var s=i.markers[r];-1==dr(n,s.doc)&&(s.parent=null,i.markers.splice(r--,1))}}}function Ai(t,e,i){this.marker=t,this.from=e,this.to=i}function Ii(t,e){if(t)for(var i=0;i<t.length;++i){var n=t[i];if(n.marker==e)return n}}function Ni(t,e){for(var i,n=0;n<t.length;++n)t[n]!=e&&(i||(i=[])).push(t[n]);return i}function Fi(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Pi(t,e,i){if(t)for(var n,r=0;r<t.length;++r){var s=t[r],o=s.marker,a=null==s.from||(o.inclusiveLeft?s.from<=e:s.from<e);if(a||s.from==e&&"bookmark"==o.type&&(!i||!s.marker.insertLeft)){var l=null==s.to||(o.inclusiveRight?s.to>=e:s.to>e);(n||(n=[])).push(new Ai(o,s.from,l?null:s.to))}}return n}function Oi(t,e,i){if(t)for(var n,r=0;r<t.length;++r){var s=t[r],o=s.marker,a=null==s.to||(o.inclusiveRight?s.to>=e:s.to>e);if(a||s.from==e&&"bookmark"==o.type&&(!i||s.marker.insertLeft)){var l=null==s.from||(o.inclusiveLeft?s.from<=e:s.from<e);(n||(n=[])).push(new Ai(o,l?null:s.from-e,null==s.to?null:s.to-e))}}return n}function Hi(t,e){var i=et(t,e.from.line)&&En(t,e.from.line).markedSpans,n=et(t,e.to.line)&&En(t,e.to.line).markedSpans;if(!i&&!n)return null;var r=e.from.ch,s=e.to.ch,o=0==ys(e.from,e.to),a=Pi(i,r,o),l=Oi(n,s,o),c=1==e.text.length,h=ur(e.text).length+(c?r:0);if(a)for(var u=0;u<a.length;++u){var d=a[u];if(null==d.to){var f=Ii(l,d.marker);f?c&&(d.to=null==f.to?null:f.to+h):d.to=r}}if(l)for(var u=0;u<l.length;++u){var d=l[u];if(null!=d.to&&(d.to+=h),null==d.from){var f=Ii(a,d.marker);f||(d.from=h,c&&(a||(a=[])).push(d))}else d.from+=h,c&&(a||(a=[])).push(d)}a&&(a=zi(a)),l&&l!=a&&(l=zi(l));var p=[a];if(!c){var m,g=e.text.length-2;if(g>0&&a)for(var u=0;u<a.length;++u)null==a[u].to&&(m||(m=[])).push(new Ai(a[u].marker,null,null));for(var u=0;u<g;++u)p.push(m);p.push(l)}return p}function zi(t){for(var e=0;e<t.length;++e){var i=t[e];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Ri(t,e){var i=Gn(t,e),n=Hi(t,e);if(!i)return n;if(!n)return i;for(var r=0;r<i.length;++r){var s=i[r],o=n[r];if(s&&o)t:for(var a=0;a<o.length;++a){for(var l=o[a],c=0;c<s.length;++c)if(s[c].marker==l.marker)continue t;s.push(l)}else o&&(i[r]=o)}return i}function Ui(t,e,i){var n=null;if(t.iter(e.line,i.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var i=t.markedSpans[e].marker;!i.readOnly||n&&-1!=dr(n,i)||(n||(n=[])).push(i)}}),!n)return null;for(var r=[{from:e,to:i}],s=0;s<n.length;++s)for(var o=n[s],a=o.find(0),l=0;l<r.length;++l){var c=r[l];if(!(ys(c.to,a.from)<0||ys(c.from,a.to)>0)){var h=[l,1],u=ys(c.from,a.from),d=ys(c.to,a.to);(u<0||!o.inclusiveLeft&&!u)&&h.push({from:c.from,to:a.from}),(d>0||!o.inclusiveRight&&!d)&&h.push({from:a.to,to:c.to}),r.splice.apply(r,h),l+=h.length-1}}return r}function Bi(t){var e=t.markedSpans;if(e){for(var i=0;i<e.length;++i)e[i].marker.detachLine(t);t.markedSpans=null}}function Wi(t,e){if(e){for(var i=0;i<e.length;++i)e[i].marker.attachLine(t);t.markedSpans=e}}function ji(t){return t.inclusiveLeft?-1:0}function Yi(t){return t.inclusiveRight?1:0}function qi(t,e){var i=t.lines.length-e.lines.length;if(0!=i)return i;var n=t.find(),r=e.find(),s=ys(n.from,r.from)||ji(t)-ji(e);if(s)return-s;var o=ys(n.to,r.to)||Yi(t)-Yi(e);return o||e.id-t.id}function Vi(t,e){var i,n=gs&&t.markedSpans;if(n)for(var r,s=0;s<n.length;++s)r=n[s],r.marker.collapsed&&null==(e?r.from:r.to)&&(!i||qi(i,r.marker)<0)&&(i=r.marker);return i}function Gi(t){return Vi(t,!0)}function Ki(t){return Vi(t,!1)}function Xi(t,e,i,n,r){var s=En(t,e),o=gs&&s.markedSpans;if(o)for(var a=0;a<o.length;++a){var l=o[a];if(l.marker.collapsed){var c=l.marker.find(0),h=ys(c.from,i)||ji(l.marker)-ji(r),u=ys(c.to,n)||Yi(l.marker)-Yi(r);if(!(h>=0&&u<=0||h<=0&&u>=0)&&(h<=0&&(ys(c.to,i)>0||l.marker.inclusiveRight&&r.inclusiveLeft)||h>=0&&(ys(c.from,n)<0||l.marker.inclusiveLeft&&r.inclusiveRight)))return!0}}}function Zi(t){for(var e;e=Gi(t);)t=e.find(-1,!0).line;return t}function Qi(t){for(var e,i;e=Ki(t);)t=e.find(1,!0).line,(i||(i=[])).push(t);return i}function Ji(t,e){var i=En(t,e),n=Zi(i);return i==n?e:Nn(n)}function tn(t,e){if(e>t.lastLine())return e;var i,n=En(t,e);if(!en(t,n))return e;for(;i=Ki(n);)n=i.find(1,!0).line;return Nn(n)+1}function en(t,e){var i=gs&&e.markedSpans;if(i)for(var n,r=0;r<i.length;++r)if(n=i[r],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&nn(t,e,n))return!0}}function nn(t,e,i){if(null==i.to){var n=i.marker.find(1,!0);return nn(t,n.line,Ii(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==e.text.length)return!0;for(var r,s=0;s<e.markedSpans.length;++s)if(r=e.markedSpans[s],r.marker.collapsed&&!r.marker.widgetNode&&r.from==i.to&&(null==r.to||r.to!=i.from)&&(r.marker.inclusiveLeft||i.marker.inclusiveRight)&&nn(t,e,r))return!0}function rn(t,e,i){Pn(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&vi(t,null,i)}function sn(t){if(null!=t.height)return t.height;if(!_r(document.body,t.node)){var e="position: relative;";t.coverGutter&&(e+="margin-left: -"+t.cm.getGutterElement().offsetWidth+"px;"),xr(t.cm.display.measure,wr("div",[t.node],null,e))}return t.height=t.node.offsetHeight}function on(t,e,i,n){var r=new Zs(t,i,n);return r.noHScroll&&(t.display.alignWidgets=!0),ki(t.doc,e,"widget",function(e){var i=e.widgets||(e.widgets=[]);if(null==r.insertAt?i.push(r):i.splice(Math.min(i.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,!en(t.doc,e)){var n=Pn(e)<t.doc.scrollTop;In(e,e.height+sn(r)),n&&vi(t,null,r.height),t.curOp.forceUpdate=!0}return!0}),r}function an(t,e,i,n){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Bi(t),Wi(t,i);var r=n?n(t):1;r!=t.height&&In(t,r)}function ln(t){t.parent=null,Bi(t)}function cn(t,e){if(t)for(;;){var i=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;t=t.slice(0,i.index)+t.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==e[n]?e[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(e[n])||(e[n]+=" "+i[2])}return t}function hn(e,i){if(e.blankLine)return e.blankLine(i);if(e.innerMode){var n=t.innerMode(e,i);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function un(t,e,i){for(var n=0;n<10;n++){var r=t.token(e,i);if(e.pos>e.start)return r}throw new Error("Mode "+t.name+" failed to advance stream.")}function dn(e,i,n,r,s,o,a){var l=n.flattenSpans;null==l&&(l=e.options.flattenSpans);var c,h=0,u=null,d=new Vs(i,e.options.tabSize);for(""==i&&cn(hn(n,r),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(l=!1,a&&mn(e,i,r,d.pos),d.pos=i.length,c=null):c=cn(un(n,d,r),o),e.options.addModeClass){var f=t.innerMode(n,r).mode.name;f&&(c="m-"+(c?f+" "+c:f))}l&&u==c||(h<d.start&&s(d.start,u),h=d.start,u=c),d.start=d.pos}for(;h<d.pos;){var p=Math.min(d.pos,h+5e4);s(p,u),h=p}}function fn(t,e,i,n){var r=[t.state.modeGen],s={};dn(t,e.text,t.doc.mode,i,function(t,e){r.push(t,e)},s,n);for(var o=0;o<t.state.overlays.length;++o){var a=t.state.overlays[o],l=1,c=0;dn(t,e.text,a.mode,!0,function(t,e){for(var i=l;c<t;){var n=r[l];n>t&&r.splice(l,1,t,r[l+1],n),l+=2,c=Math.min(t,n)}if(e)if(a.opaque)r.splice(i,l-i,t,"cm-overlay "+e),l=i+2;else for(;i<l;i+=2){var s=r[i+1];r[i+1]=(s?s+" ":"")+"cm-overlay "+e}},s)}return{styles:r,classes:s.bgClass||s.textClass?s:null}}function pn(t,e){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=fn(t,e,e.stateAfter=Dt(t,Nn(e)));e.styles=i.styles,i.classes?e.styleClasses=i.classes:e.styleClasses&&(e.styleClasses=null)}return e.styles}function mn(t,e,i,n){var r=t.doc.mode,s=new Vs(e,t.options.tabSize);for(s.start=s.pos=n||0,""==e&&hn(r,i);!s.eol()&&s.pos<=t.options.maxHighlightLength;)un(r,s,i),s.start=s.pos}function gn(t,e){if(!t||/^\s*$/.test(t))return null;var i=e.addModeClass?to:Js;return i[t]||(i[t]=t.replace(/\S+/g,"cm-$&"))}function vn(t,e){var i=wr("span",null,null,ts?"padding-right: .1px":null),n={pre:wr("pre",[i]),content:i,col:0,pos:0,cm:t};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var s,o=r?e.rest[r-1]:e.line;n.pos=0,n.addToken=bn,(Qr||ts)&&t.getOption("lineWrapping")&&(n.addToken=wn(n.addToken)),Nr(t.display.measure)&&(s=On(o))&&(n.addToken=kn(n.addToken,s)),n.map=[],_n(o,n,pn(t,o)),o.styleClasses&&(o.styleClasses.bgClass&&(n.bgClass=Mr(o.styleClasses.bgClass,n.bgClass||"")),o.styleClasses.textClass&&(n.textClass=Mr(o.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Ir(t.display.measure))),0==r?(e.measure.map=n.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(n.map),(e.measure.caches||(e.measure.caches=[])).push({}))}return ho(t,"renderLine",t,e.line,n.pre),n.pre.className&&(n.textClass=Mr(n.pre.className,n.textClass||"")),n}function yn(t){var e=wr("span","\u2022","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e}function bn(t,e,i,n,r,s){if(e){var o=t.cm.options.specialChars,a=!1;if(o.test(e))for(var l=document.createDocumentFragment(),c=0;;){o.lastIndex=c;var h=o.exec(e),u=h?h.index-c:e.length-c;if(u){var d=document.createTextNode(e.slice(c,c+u));Qr&&Jr<9?l.appendChild(wr("span",[d])):l.appendChild(d),t.map.push(t.pos,t.pos+u,d),t.col+=u,t.pos+=u}if(!h)break;if(c+=u+1,"\t"==h[0]){var f=t.cm.options.tabSize,p=f-t.col%f,d=l.appendChild(wr("span",hr(p),"cm-tab"));t.col+=p}else{var d=t.cm.options.specialCharPlaceholder(h[0]);Qr&&Jr<9?l.appendChild(wr("span",[d])):l.appendChild(d),t.col+=1}t.map.push(t.pos,t.pos+1,d),t.pos++}else{t.col+=e.length;var l=document.createTextNode(e);t.map.push(t.pos,t.pos+e.length,l),Qr&&Jr<9&&(a=!0),t.pos+=e.length}if(i||n||r||a){var m=i||"";n&&(m+=n),r&&(m+=r);var g=wr("span",[l],m);return s&&(g.title=s),t.content.appendChild(g)}t.content.appendChild(l)}}function wn(t){function e(t){for(var e=" ",i=0;i<t.length-2;++i)e+=i%2?" ":"\xa0";return e+=" "}return function(i,n,r,s,o,a){t(i,n.replace(/ {3,}/g,e),r,s,o,a)}}function kn(t,e){return function(i,n,r,s,o,a){r=r?r+" cm-force-border":"cm-force-border";for(var l=i.pos,c=l+n.length;;){for(var h=0;h<e.length;h++){var u=e[h];if(u.to>l&&u.from<=l)break}if(u.to>=c)return t(i,n,r,s,o,a);t(i,n.slice(0,u.to-l),r,s,null,a),s=null,n=n.slice(u.to-l),l=u.to}}}function xn(t,e,i,n){var r=!n&&i.widgetNode;r&&(t.map.push(t.pos,t.pos+e,r),t.content.appendChild(r)),t.pos+=e}function _n(t,e,i){var n=t.markedSpans,r=t.text,s=0;if(n)for(var o,a,l,c,h,u,d=r.length,f=0,p=1,m="",g=0;;){if(g==f){a=l=c=h="",u=null,g=Infinity;for(var v=[],y=0;y<n.length;++y){var b=n[y],w=b.marker;b.from<=f&&(null==b.to||b.to>f)?(null!=b.to&&g>b.to&&(g=b.to,l=""),w.className&&(a+=" "+w.className),w.startStyle&&b.from==f&&(c+=" "+w.startStyle),w.endStyle&&b.to==g&&(l+=" "+w.endStyle),w.title&&!h&&(h=w.title),w.collapsed&&(!u||qi(u.marker,w)<0)&&(u=b)):b.from>f&&g>b.from&&(g=b.from),"bookmark"==w.type&&b.from==f&&w.widgetNode&&v.push(w)}if(u&&(u.from||0)==f&&(xn(e,(null==u.to?d+1:u.to)-f,u.marker,null==u.from),null==u.to))return;if(!u&&v.length)for(var y=0;y<v.length;++y)xn(e,0,v[y])}if(f>=d)break;for(var k=Math.min(d,g);;){if(m){var x=f+m.length;if(!u){var _=x>k?m.slice(0,k-f):m;e.addToken(e,_,o?o+a:a,c,f+_.length==g?l:"",h)}if(x>=k){m=m.slice(k-f),f=k;break}f=x,c=""}m=r.slice(s,s=i[p++]),o=gn(i[p++],e.cm.options)}}else for(var p=1;p<i.length;p+=2)e.addToken(e,r.slice(s,s=i[p]),gn(i[p+1],e.cm.options))}function Cn(t,e){return 0==e.from.ch&&0==e.to.ch&&""==ur(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Dn(t,e,i,n){function r(t){return i?i[t]:null}function s(t,i,r){an(t,i,r,n),ir(t,"change",t,e)}var o=e.from,a=e.to,l=e.text,c=En(t,o.line),h=En(t,a.line),u=ur(l),d=r(l.length-1),f=a.line-o.line;if(Cn(t,e)){for(var p=0,m=[];p<l.length-1;++p)m.push(new Qs(l[p],r(p),n));s(h,h.text,d),f&&t.remove(o.line,f),m.length&&t.insert(o.line,m)}else if(c==h)if(1==l.length)s(c,c.text.slice(0,o.ch)+u+c.text.slice(a.ch),d);else{for(var m=[],p=1;p<l.length-1;++p)m.push(new Qs(l[p],r(p),n));m.push(new Qs(u+c.text.slice(a.ch),d,n)),s(c,c.text.slice(0,o.ch)+l[0],r(0)),t.insert(o.line+1,m)}else if(1==l.length)s(c,c.text.slice(0,o.ch)+l[0]+h.text.slice(a.ch),r(0)),t.remove(o.line+1,f);else{s(c,c.text.slice(0,o.ch)+l[0],r(0)),s(h,u+h.text.slice(a.ch),d);for(var p=1,m=[];p<l.length-1;++p)m.push(new Qs(l[p],r(p),n));f>1&&t.remove(o.line+1,f-1),t.insert(o.line+1,m)}
ir(t,"change",t,e)}function Sn(t){this.lines=t,this.parent=null;for(var e=0,i=0;e<t.length;++e)t[e].parent=this,i+=t[e].height;this.height=i}function Tn(t){this.children=t;for(var e=0,i=0,n=0;n<t.length;++n){var r=t[n];e+=r.chunkSize(),i+=r.height,r.parent=this}this.size=e,this.height=i,this.parent=null}function Mn(t,e,i){function n(t,r,s){if(t.linked)for(var o=0;o<t.linked.length;++o){var a=t.linked[o];if(a.doc!=r){var l=s&&a.sharedHist;i&&!l||(e(a.doc,l),n(a.doc,t,l))}}}n(t,null,!0)}function Ln(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,o(t),i(t),t.options.lineWrapping||f(t),t.options.mode=e.modeOption,pe(t)}function En(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var i=t;!i.lines;)for(var n=0;;++n){var r=i.children[n],s=r.chunkSize();if(e<s){i=r;break}e-=s}return i.lines[e]}function $n(t,e,i){var n=[],r=e.line;return t.iter(e.line,i.line+1,function(t){var s=t.text;r==i.line&&(s=s.slice(0,i.ch)),r==e.line&&(s=s.slice(e.ch)),n.push(s),++r}),n}function An(t,e,i){var n=[];return t.iter(e,i,function(t){n.push(t.text)}),n}function In(t,e){var i=e-t.height;if(i)for(var n=t;n;n=n.parent)n.height+=i}function Nn(t){if(null==t.parent)return null;for(var e=t.parent,i=dr(e.lines,t),n=e.parent;n;e=n,n=n.parent)for(var r=0;n.children[r]!=e;++r)i+=n.children[r].chunkSize();return i+e.first}function Fn(t,e){var i=t.first;t:do{for(var n=0;n<t.children.length;++n){var r=t.children[n],s=r.height;if(e<s){t=r;continue t}e-=s,i+=r.chunkSize()}return i}while(!t.lines);for(var n=0;n<t.lines.length;++n){var o=t.lines[n],a=o.height;if(e<a)break;e-=a}return i+n}function Pn(t){t=Zi(t);for(var e=0,i=t.parent,n=0;n<i.lines.length;++n){var r=i.lines[n];if(r==t)break;e+=r.height}for(var s=i.parent;s;i=s,s=i.parent)for(var n=0;n<s.children.length;++n){var o=s.children[n];if(o==i)break;e+=o.height}return e}function On(t){var e=t.order;return null==e&&(e=t.order=Po(t.text)),e}function Hn(t){this.done=[],this.undone=[],this.undoDepth=Infinity,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function zn(t,e){var i={from:Y(e.from),to:$s(e),text:$n(t,e.from,e.to)};return qn(t,i,e.from.line,e.to.line+1),Mn(t,function(t){qn(t,i,e.from.line,e.to.line+1)},!0),i}function Rn(t){for(;t.length;){if(!ur(t).ranges)break;t.pop()}}function Un(t,e){return e?(Rn(t.done),ur(t.done)):t.done.length&&!ur(t.done).ranges?ur(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),ur(t.done)):void 0}function Bn(t,e,i,n){var r=t.history;r.undone.length=0;var s,o=+new Date;if((r.lastOp==n||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&r.lastModTime>o-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(s=Un(r,r.lastOp==n))){var a=ur(s.changes);0==ys(e.from,e.to)&&0==ys(e.from,a.to)?a.to=$s(e):s.changes.push(zn(t,e))}else{var l=ur(r.done);for(l&&l.ranges||Yn(t.sel,r.done),s={changes:[zn(t,e)],generation:r.generation},r.done.push(s);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(i),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=o,r.lastOp=r.lastSelOp=n,r.lastOrigin=r.lastSelOrigin=e.origin,a||ho(t,"historyAdded")}function Wn(t,e,i,n){var r=e.charAt(0);return"*"==r||"+"==r&&i.ranges.length==n.ranges.length&&i.somethingSelected()==n.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function jn(t,e,i,n){var r=t.history,s=n&&n.origin;i==r.lastSelOp||s&&r.lastSelOrigin==s&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==s||Wn(t,s,ur(r.done),e))?r.done[r.done.length-1]=e:Yn(e,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=s,r.lastSelOp=i,n&&!1!==n.clearRedo&&Rn(r.undone)}function Yn(t,e){var i=ur(e);i&&i.ranges&&i.equals(t)||e.push(t)}function qn(t,e,i,n){var r=e["spans_"+t.id],s=0;t.iter(Math.max(t.first,i),Math.min(t.first+t.size,n),function(i){i.markedSpans&&((r||(r=e["spans_"+t.id]={}))[s]=i.markedSpans),++s})}function Vn(t){if(!t)return null;for(var e,i=0;i<t.length;++i)t[i].marker.explicitlyCleared?e||(e=t.slice(0,i)):e&&e.push(t[i]);return e?e.length?e:null:t}function Gn(t,e){var i=e["spans_"+t.id];if(!i)return null;for(var n=0,r=[];n<e.text.length;++n)r.push(Vn(i[n]));return r}function Kn(t,e,i){for(var n=0,r=[];n<t.length;++n){var s=t[n];if(s.ranges)r.push(i?G.prototype.deepCopy.call(s):s);else{var o=s.changes,a=[];r.push({changes:a});for(var l=0;l<o.length;++l){var c,h=o[l];if(a.push({from:h.from,to:h.to,text:h.text}),e)for(var u in h)(c=u.match(/^spans_(\d+)$/))&&dr(e,Number(c[1]))>-1&&(ur(a)[u]=h[u],delete h[u])}}}return r}function Xn(t,e,i,n){i<t.line?t.line+=n:e<t.line&&(t.line=e,t.ch=0)}function Zn(t,e,i,n){for(var r=0;r<t.length;++r){var s=t[r],o=!0;if(s.ranges){s.copied||(s=t[r]=s.deepCopy(),s.copied=!0);for(var a=0;a<s.ranges.length;a++)Xn(s.ranges[a].anchor,e,i,n),Xn(s.ranges[a].head,e,i,n)}else{for(var a=0;a<s.changes.length;++a){var l=s.changes[a];if(i<l.from.line)l.from=vs(l.from.line+n,l.from.ch),l.to=vs(l.to.line+n,l.to.ch);else if(e<=l.to.line){o=!1;break}}o||(t.splice(0,r+1),r=0)}}}function Qn(t,e){var i=e.from.line,n=e.to.line,r=e.text.length-(n-i)-1;Zn(t.done,i,n,r),Zn(t.undone,i,n,r)}function Jn(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function tr(t){return t.target||t.srcElement}function er(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),hs&&t.ctrlKey&&1==e&&(e=3),e}function ir(t,e){function i(t){return function(){t.apply(null,s)}}var n=t._handlers&&t._handlers[e];if(n){var r,s=Array.prototype.slice.call(arguments,2);_s?r=_s.delayedCallbacks:uo?r=uo:(r=uo=[],setTimeout(nr,0));for(var o=0;o<n.length;++o)r.push(i(n[o]))}}function nr(){var t=uo;uo=null;for(var e=0;e<t.length;++e)t[e]()}function rr(t,e,i){return ho(t,i||e.type,t,e),Jn(e)||e.codemirrorIgnore}function sr(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var i=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),n=0;n<e.length;++n)-1==dr(i,e[n])&&i.push(e[n])}function or(t,e){var i=t._handlers&&t._handlers[e];return i&&i.length>0}function ar(t){t.prototype.on=function(t,e){lo(this,t,e)},t.prototype.off=function(t,e){co(this,t,e)}}function lr(){this.id=null}function cr(t,e,i){for(var n=0,r=0;;){var s=t.indexOf("\t",n);-1==s&&(s=t.length);var o=s-n;if(s==t.length||r+o>=e)return n+Math.min(o,e-r);if(r+=s-n,r+=i-r%i,n=s+1,r>=e)return n}}function hr(t){for(;bo.length<=t;)bo.push(ur(bo)+" ");return bo[t]}function ur(t){return t[t.length-1]}function dr(t,e){for(var i=0;i<t.length;++i)if(t[i]==e)return i;return-1}function fr(t,e){for(var i=[],n=0;n<t.length;n++)i[n]=e(t[n],n);return i}function pr(t,e){var i;if(Object.create)i=Object.create(t);else{var n=function(){};n.prototype=t,i=new n}return e&&mr(e,i),i}function mr(t,e,i){e||(e={});for(var n in t)!t.hasOwnProperty(n)||!1===i&&e.hasOwnProperty(n)||(e[n]=t[n]);return e}function gr(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function vr(t,e){return e?!!(e.source.indexOf("\\w")>-1&&_o(t))||e.test(t):_o(t)}function yr(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function br(t){return t.charCodeAt(0)>=768&&Co.test(t)}function wr(t,e,i,n){var r=document.createElement(t);if(i&&(r.className=i),n&&(r.style.cssText=n),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var s=0;s<e.length;++s)r.appendChild(e[s]);return r}function kr(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function xr(t,e){return kr(t).appendChild(e)}function _r(t,e){if(t.contains)return t.contains(e);for(;e=e.parentNode;)if(e==t)return!0}function Cr(){return document.activeElement}function Dr(t){return new RegExp("\\b"+t+"\\b\\s*")}function Sr(t,e){var i=Dr(e);i.test(t.className)&&(t.className=t.className.replace(i,""))}function Tr(t,e){Dr(e).test(t.className)||(t.className+=" "+e)}function Mr(t,e){for(var i=t.split(" "),n=0;n<i.length;n++)i[n]&&!Dr(i[n]).test(e)&&(e+=" "+i[n]);return e}function Lr(t){if(document.body.getElementsByClassName)for(var e=document.body.getElementsByClassName("CodeMirror"),i=0;i<e.length;i++){var n=e[i].CodeMirror;n&&t(n)}}function Er(){Mo||($r(),Mo=!0)}function $r(){var t;lo(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Do=null,Lr(Le)},100))}),lo(window,"blur",function(){Lr(Qe)})}function Ar(t){if(null!=Do)return Do;var e=wr("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return xr(t,e),e.offsetWidth&&(Do=e.offsetHeight-e.clientHeight),Do||0}function Ir(t){if(null==So){var e=wr("span","\u200b");xr(t,wr("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(So=e.offsetWidth<=1&&e.offsetHeight>2&&!(Qr&&Jr<8))}return So?wr("span","\u200b"):wr("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px")}function Nr(t){if(null!=To)return To;var e=xr(t,document.createTextNode("A\u062eA")),i=ko(e,0,1).getBoundingClientRect();if(!i||i.left==i.right)return!1;var n=ko(e,1,2).getBoundingClientRect();return To=n.right-i.right<3}function Fr(t){if(null!=Io)return Io;var e=xr(t,wr("span","x")),i=e.getBoundingClientRect(),n=ko(e,0,1).getBoundingClientRect();return Io=Math.abs(i.left-n.left)>1}function Pr(t,e,i,n){if(!t)return n(e,i,"ltr");for(var r=!1,s=0;s<t.length;++s){var o=t[s];(o.from<i&&o.to>e||e==i&&o.to==e)&&(n(Math.max(o.from,e),Math.min(o.to,i),1==o.level?"rtl":"ltr"),r=!0)}r||n(e,i,"ltr")}function Or(t){return t.level%2?t.to:t.from}function Hr(t){return t.level%2?t.from:t.to}function zr(t){var e=On(t);return e?Or(e[0]):0}function Rr(t){var e=On(t);return e?Hr(ur(e)):t.text.length}function Ur(t,e){var i=En(t.doc,e),n=Zi(i);n!=i&&(e=Nn(n));var r=On(n),s=r?r[0].level%2?Rr(n):zr(n):0;return vs(e,s)}function Br(t,e){for(var i,n=En(t.doc,e);i=Ki(n);)n=i.find(1,!0).line,e=null;var r=On(n),s=r?r[0].level%2?zr(n):Rr(n):n.text.length;return vs(null==e?Nn(n):e,s)}function Wr(t,e){var i=Ur(t,e.line),n=En(t.doc,i.line),r=On(n);if(!r||0==r[0].level){var s=Math.max(0,n.text.search(/\S/)),o=e.line==i.line&&e.ch<=s&&e.ch;return vs(i.line,o?0:s)}return i}function jr(t,e,i){var n=t[0].level;return e==n||i!=n&&e<i}function Yr(t,e){Fo=null;for(var i,n=0;n<t.length;++n){var r=t[n];if(r.from<e&&r.to>e)return n;if(r.from==e||r.to==e){if(null!=i)return jr(t,r.level,t[i].level)?(r.from!=r.to&&(Fo=i),n):(r.from!=r.to&&(Fo=n),i);i=n}}return i}function qr(t,e,i,n){if(!n)return e+i;do{e+=i}while(e>0&&br(t.text.charAt(e)));return e}function Vr(t,e,i,n){var r=On(t);if(!r)return Gr(t,e,i,n);for(var s=Yr(r,e),o=r[s],a=qr(t,e,o.level%2?-i:i,n);;){if(a>o.from&&a<o.to)return a;if(a==o.from||a==o.to)return Yr(r,a)==s?a:(o=r[s+=i],i>0==o.level%2?o.to:o.from);if(!(o=r[s+=i]))return null;a=i>0==o.level%2?qr(t,o.to,-1,n):qr(t,o.from,1,n)}}function Gr(t,e,i,n){var r=e+i;if(n)for(;r>0&&br(t.text.charAt(r));)r+=i;return r<0||r>t.text.length?null:r}var Kr=/gecko\/\d/i.test(navigator.userAgent),Xr=/MSIE \d/.test(navigator.userAgent),Zr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Qr=Xr||Zr,Jr=Qr&&(Xr?document.documentMode||6:Zr[1]),ts=/WebKit\//.test(navigator.userAgent),es=ts&&/Qt\/\d+\.\d+/.test(navigator.userAgent),is=/Chrome\//.test(navigator.userAgent),ns=/Opera\//.test(navigator.userAgent),rs=/Apple Computer/.test(navigator.vendor),ss=/KHTML\//.test(navigator.userAgent),os=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),as=/PhantomJS/.test(navigator.userAgent),ls=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),cs=ls||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),hs=ls||/Mac/.test(navigator.platform),us=/win/i.test(navigator.platform),ds=ns&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);ds&&(ds=Number(ds[1])),ds&&ds>=15&&(ns=!1,ts=!0);var fs=hs&&(es||ns&&(null==ds||ds<12.11)),ps=Kr||Qr&&Jr>=9,ms=!1,gs=!1,vs=t.Pos=function(t,e){if(!(this instanceof vs))return new vs(t,e);this.line=t,this.ch=e},ys=t.cmpPos=function(t,e){return t.line-e.line||t.ch-e.ch};G.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var i=this.ranges[e],n=t.ranges[e];if(0!=ys(i.anchor,n.anchor)||0!=ys(i.head,n.head))return!1}return!0},deepCopy:function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new K(Y(this.ranges[e].anchor),Y(this.ranges[e].head));return new G(t,this.primIndex)},somethingSelected:function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},contains:function(t,e){e||(e=t);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(ys(e,n.from())>=0&&ys(t,n.to())<=0)return i}return-1}},K.prototype={from:function(){return V(this.anchor,this.head)},to:function(){return q(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var bs,ws,ks,xs={left:0,right:0,top:0,bottom:0},_s=null,Cs=0,Ds=null,Ss=0,Ts=0,Ms=null;Qr?Ms=-.53:Kr?Ms=15:is?Ms=-.7:rs&&(Ms=-1/3);var Ls,Es=null,$s=t.changeEnd=function(t){return t.text?vs(t.from.line+t.text.length-1,ur(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};t.prototype={constructor:t,focus:function(){window.focus(),De(this),xe(this)},setOption:function(t,e){var i=this.options,n=i[t];i[t]==e&&"mode"!=t||(i[t]=e,Is.hasOwnProperty(t)&&ce(this,Is[t])(this,e,n))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,i=0;i<e.length;++i)if(e[i]==t||"string"!=typeof e[i]&&e[i].name==t)return e.splice(i,1),!0},addOverlay:he(function(e,i){var n=e.token?e:t.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:i&&i.opaque}),this.state.modeGen++,pe(this)}),removeOverlay:he(function(t){for(var e=this.state.overlays,i=0;i<e.length;++i){var n=e[i].modeSpec;if(n==t||"string"==typeof t&&n.name==t)return e.splice(i,1),this.state.modeGen++,void pe(this)}}),indentLine:he(function(t,e,i){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),et(this.doc,t)&&wi(this,t,e,i)}),indentSelection:he(function(t){for(var e=this.doc.sel.ranges,i=-1,n=0;n<e.length;n++){var r=e[n];if(r.empty())r.head.line>i&&(wi(this,r.head.line,t,!0),i=r.head.line,n==this.doc.sel.primIndex&&yi(this));else{var s=r.from(),o=r.to(),a=Math.max(i,s.line);i=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var l=a;l<i;++l)wi(this,l,t);var c=this.doc.sel.ranges;0==s.ch&&e.length==c.length&&c[n].from().ch>0&&ot(this.doc,n,new K(s,c[n].to()),mo)}}}),getTokenAt:function(t,e){var i=this.doc;t=J(i,t);for(var n=Dt(this,t.line,e),r=this.doc.mode,s=En(i,t.line),o=new Vs(s.text,this.options.tabSize);o.pos<t.ch&&!o.eol();){o.start=o.pos;var a=un(r,o,n)}return{start:o.start,end:o.pos,string:o.current(),type:a||null,state:n}},getTokenTypeAt:function(t){t=J(this.doc,t);var e,i=pn(this,En(this.doc,t.line)),n=0,r=(i.length-1)/2,s=t.ch;if(0==s)e=i[2];else for(;;){var o=n+r>>1;if((o?i[2*o-1]:0)>=s)r=o;else{if(!(i[2*o+1]<s)){e=i[2*o+2];break}n=o+1}}var a=e?e.indexOf("cm-overlay "):-1;return a<0?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var i=this.doc.mode;return i.innerMode?t.innerMode(i,this.getTokenAt(e).state).mode:i},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var i=[];if(!zs.hasOwnProperty(e))return zs;var n=zs[e],r=this.getModeAt(t);if("string"==typeof r[e])n[r[e]]&&i.push(n[r[e]]);else if(r[e])for(var s=0;s<r[e].length;s++){var o=n[r[e][s]];o&&i.push(o)}else r.helperType&&n[r.helperType]?i.push(n[r.helperType]):n[r.name]&&i.push(n[r.name]);for(var s=0;s<n._global.length;s++){var a=n._global[s];a.pred(r,this)&&-1==dr(i,a.val)&&i.push(a.val)}return i},getStateAfter:function(t,e){var i=this.doc;return t=Q(i,null==t?i.first+i.size-1:t),Dt(this,t+1,e)},cursorCoords:function(t,e){var i,n=this.doc.sel.primary();return i=null==t?n.head:"object"==typeof t?J(this.doc,t):t?n.from():n.to(),qt(this,i,e||"page")},charCoords:function(t,e){return Yt(this,J(this.doc,t),e||"page")},coordsChar:function(t,e){return t=jt(this,t,e||"page"),Kt(this,t.left,t.top)},lineAtHeight:function(t,e){return t=jt(this,{top:t,left:0},e||"page").top,Fn(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var i=!1,n=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>n&&(t=n,i=!0);var r=En(this.doc,t);return Wt(this,r,{top:0,left:0},e||"page").top+(i?this.doc.height-Pn(r):0)},defaultTextHeight:function(){return Zt(this.display)},defaultCharWidth:function(){return Qt(this.display)},setGutterMarker:he(function(t,e,i){return ki(this.doc,t,"gutter",function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[e]=i,!i&&yr(n)&&(t.gutterMarkers=null),!0})}),clearGutter:he(function(t){var e=this,i=e.doc,n=i.first;i.iter(function(i){i.gutterMarkers&&i.gutterMarkers[t]&&(i.gutterMarkers[t]=null,me(e,n,"gutter"),yr(i.gutterMarkers)&&(i.gutterMarkers=null)),++n})}),addLineWidget:he(function(t,e,i){return on(this,t,e,i)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!et(this.doc,t))return null;var e=t;if(!(t=En(this.doc,t)))return null}else{var e=Nn(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,i,n,r){var s=this.display;t=qt(this,J(this.doc,t));var o=t.bottom,a=t.left;if(e.style.position="absolute",s.sizer.appendChild(e),"over"==n)o=t.top;else if("above"==n||"near"==n){var l=Math.max(s.wrapper.clientHeight,this.doc.height),c=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==n||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?o=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(o=t.bottom),a+e.offsetWidth>c&&(a=c-e.offsetWidth)}e.style.top=o+"px",e.style.left=e.style.right="","right"==r?(a=s.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(s.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),i&&mi(this,a,o,a+e.offsetWidth,o+e.offsetHeight)},triggerOnKeyDown:he(Ve),triggerOnKeyPress:he(Xe),triggerOnKeyUp:Ke,execCommand:function(t){if(Bs.hasOwnProperty(t))return Bs[t](this)},findPosH:function(t,e,i,n){var r=1;e<0&&(r=-1,e=-e);for(var s=0,o=J(this.doc,t);s<e&&(o=_i(this.doc,o,r,i,n),!o.hitSide);++s);return o},moveH:he(function(t,e){var i=this;i.extendSelectionsBy(function(n){return i.display.shift||i.doc.extend||n.empty()?_i(i.doc,n.head,t,e,i.options.rtlMoveVisually):t<0?n.from():n.to()},vo)}),deleteH:he(function(t,e){var i=this.doc.sel,n=this.doc;i.somethingSelected()?n.replaceSelection("",null,"+delete"):xi(this,function(i){var r=_i(n,i.head,t,e,!1);return t<0?{from:r,to:i.head}:{from:i.head,to:r}})}),findPosV:function(t,e,i,n){var r=1,s=n;e<0&&(r=-1,e=-e);for(var o=0,a=J(this.doc,t);o<e;++o){var l=qt(this,a,"div");if(null==s?s=l.left:l.left=s,a=Ci(this,l,r,i),a.hitSide)break}return a},moveV:he(function(t,e){var i=this,n=this.doc,r=[],s=!i.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(o){if(s)return t<0?o.from():o.to();var a=qt(i,o.head,"div");null!=o.goalColumn&&(a.left=o.goalColumn),r.push(a.left);var l=Ci(i,a,t,e);return"page"==e&&o==n.sel.primary()&&vi(i,null,Yt(i,l,"div").top-a.top),l},vo),r.length)for(var o=0;o<n.sel.ranges.length;o++)n.sel.ranges[o].goalColumn=r[o]}),findWordAt:function(t){var e=this.doc,i=En(e,t.line).text,n=t.ch,r=t.ch;if(i){var s=this.getHelper(t,"wordChars");(t.xRel<0||r==i.length)&&n?--n:++r;for(var o=i.charAt(n),a=vr(o,s)?function(t){return vr(t,s)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!vr(t)};n>0&&a(i.charAt(n-1));)--n;for(;r<i.length&&a(i.charAt(r));)++r}return new K(vs(t.line,n),vs(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Tr(this.display.cursorDiv,"CodeMirror-overwrite"):Sr(this.display.cursorDiv,"CodeMirror-overwrite"),ho(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return Cr()==this.display.input},scrollTo:he(function(t,e){null==t&&null==e||bi(this),null!=t&&(this.curOp.scrollLeft=t),null!=e&&(this.curOp.scrollTop=e)}),getScrollInfo:function(){var t=this.display.scroller,e=fo;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:he(function(t,e){if(null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:vs(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line)bi(this),this.curOp.scrollToPos=t;else{var i=gi(this,Math.min(t.from.left,t.to.left),Math.min(t.from.top,t.to.top)-t.margin,Math.max(t.from.right,t.to.right),Math.max(t.from.bottom,t.to.bottom)+t.margin);this.scrollTo(i.scrollLeft,i.scrollTop)}}),setSize:he(function(t,e){function i(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}var n=this;null!=t&&(n.display.wrapper.style.width=i(t)),null!=e&&(n.display.wrapper.style.height=i(e)),n.options.lineWrapping&&zt(this);var r=n.display.viewFrom;n.doc.iter(r,n.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){me(n,r,"widget");break}++r}),n.curOp.forceUpdate=!0,ho(n,"refresh",this)}),operation:function(t){return le(this,t)},refresh:he(function(){var t=this.display.cachedTextHeight;pe(this),this.curOp.forceUpdate=!0,Rt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),u(this),(null==t||Math.abs(t-Zt(this.display))>.5)&&o(this),ho(this,"refresh",this)}),swapDoc:he(function(t){var e=this.doc;return e.cm=null,Ln(this,t),Rt(this),Ce(this),this.scrollTo(t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,ir(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ar(t);var As=t.defaults={},Is=t.optionHandlers={},Ns=t.Init={toString:function(){return"CodeMirror.Init"}};Di("value","",function(t,e){t.setValue(e)},!0),Di("mode",null,function(t,e){t.doc.modeOption=e,i(t)},!0),Di("indentUnit",2,i,!0),Di("indentWithTabs",!1),Di("smartIndent",!0),Di("tabSize",4,function(t){n(t),Rt(t),pe(t)},!0),Di("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e){t.options.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),t.refresh()},!0),Di("specialCharPlaceholder",yn,function(t){t.refresh()},!0),Di("electricChars",!0),Di("rtlMoveVisually",!us),Di("wholeLineUpdateBefore",!0),Di("theme","default",function(t){l(t),c(t)},!0),Di("keyMap","default",a),Di("extraKeys",null),Di("lineWrapping",!1,r,!0),Di("gutters",[],function(t){p(t.options),c(t)},!0),Di("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?x(t.display)+"px":"0",t.refresh()},!0),Di("coverGutterNextToScrollbar",!1,v,!0),Di("lineNumbers",!1,function(t){p(t.options),c(t)},!0),Di("firstLineNumber",1,c,!0),Di("lineNumberFormatter",function(t){return t},c,!0),Di("showCursorWhenSelecting",!1,yt,!0),Di("resetSelectionOnContextMenu",!0),Di("readOnly",!1,function(t,e){"nocursor"==e?(Qe(t),t.display.input.blur(),t.display.disabled=!0):(t.display.disabled=!1,e||Ce(t))}),Di("disableInput",!1,function(t,e){e||Ce(t)},!0),Di("dragDrop",!0),Di("cursorBlinkRate",530),Di("cursorScrollMargin",0),Di("cursorHeight",1,yt,!0),Di("singleCursorHeightPerLine",!0,yt,!0),Di("workTime",100),Di("workDelay",100),Di("flattenSpans",!0,n,!0),Di("addModeClass",!1,n,!0),Di("pollInterval",100),Di("undoDepth",200,function(t,e){t.doc.history.undoDepth=e}),Di("historyEventDelay",1250),Di("viewportMargin",10,function(t){t.refresh()},!0),Di("maxHighlightLength",1e4,n,!0),Di("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),Di("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),Di("autofocus",null);var Fs=t.modes={},Ps=t.mimeModes={};t.defineMode=function(e,i){t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2&&(i.dependencies=Array.prototype.slice.call(arguments,2)),Fs[e]=i},t.defineMIME=function(t,e){Ps[t]=e},t.resolveMode=function(e){if("string"==typeof e&&Ps.hasOwnProperty(e))e=Ps[e];else if(e&&"string"==typeof e.name&&Ps.hasOwnProperty(e.name)){var i=Ps[e.name];"string"==typeof i&&(i={name:i}),e=pr(i,e),e.name=i.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,i){var i=t.resolveMode(i),n=Fs[i.name];if(!n)return t.getMode(e,"text/plain");var r=n(e,i);if(Os.hasOwnProperty(i.name)){var s=Os[i.name];for(var o in s)s.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=s[o])}if(r.name=i.name,i.helperType&&(r.helperType=i.helperType),i.modeProps)for(var o in i.modeProps)r[o]=i.modeProps[o];return r},t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var Os=t.modeExtensions={};t.extendMode=function(t,e){mr(e,Os.hasOwnProperty(t)?Os[t]:Os[t]={})},t.defineExtension=function(e,i){t.prototype[e]=i},t.defineDocExtension=function(t,e){io.prototype[t]=e},t.defineOption=Di;var Hs=[];t.defineInitHook=function(t){Hs.push(t)};var zs=t.helpers={};t.registerHelper=function(e,i,n){zs.hasOwnProperty(e)||(zs[e]=t[e]={_global:[]}),zs[e][i]=n},t.registerGlobalHelper=function(e,i,n,r){t.registerHelper(e,i,r),zs[e]._global.push({pred:n,val:r})};var Rs=t.copyState=function(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var i={};for(var n in e){var r=e[n];r instanceof Array&&(r=r.concat([])),i[n]=r}return i},Us=t.startState=function(t,e,i){return!t.startState||t.startState(e,i)};t.innerMode=function(t,e){for(;t.innerMode;){var i=t.innerMode(e);if(!i||i.mode==t)break;e=i.state,t=i.mode}return i||{mode:t,state:e}};var Bs=t.commands={selectAll:function(t){t.setSelection(vs(t.firstLine(),0),vs(t.lastLine()),mo)},singleSelection:function(t){t.setSelection(t.getCursor("anchor"),t.getCursor("head"),mo)},killLine:function(t){xi(t,function(e){if(e.empty()){var i=En(t.doc,e.head.line).text.length;return e.head.ch==i&&e.head.line<t.lastLine()?{from:e.head,to:vs(e.head.line+1,0)}:{from:e.head,to:vs(e.head.line,i)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){xi(t,function(e){return{from:vs(e.from().line,0),to:J(t.doc,vs(e.to().line+1,0))}})},delLineLeft:function(t){xi(t,function(t){return{from:vs(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){xi(t,function(e){var i=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:i},"div"),to:e.from()}})},delWrappedLineRight:function(t){xi(t,function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:i},"div");return{from:e.from(),to:n}})},undo:function(t){t.undo()},redo:function(t){t.redo()},undoSelection:function(t){t.undoSelection()},redoSelection:function(t){t.redoSelection()},goDocStart:function(t){t.extendSelection(vs(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(vs(t.lastLine()))},goLineStart:function(t){t.extendSelectionsBy(function(e){return Ur(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){t.extendSelectionsBy(function(e){return Wr(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){t.extendSelectionsBy(function(e){return Br(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){t.extendSelectionsBy(function(e){var i=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:i},"div")},vo)},goLineLeft:function(t){t.extendSelectionsBy(function(e){var i=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:i},"div")},vo)},goLineLeftSmart:function(t){t.extendSelectionsBy(function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:i},"div");return n.ch<t.getLine(n.line).search(/\S/)?Wr(t,e.head):n},vo)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],i=t.listSelections(),n=t.options.tabSize,r=0;r<i.length;r++){var s=i[r].from(),o=yo(t.getLine(s.line),s.ch,n);e.push(new Array(n-o%n+1).join(" "))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){le(t,function(){for(var e=t.listSelections(),i=[],n=0;n<e.length;n++){var r=e[n].head,s=En(t.doc,r.line).text;if(s)if(r.ch==s.length&&(r=new vs(r.line,r.ch-1)),r.ch>0)r=new vs(r.line,r.ch+1),t.replaceRange(s.charAt(r.ch-1)+s.charAt(r.ch-2),vs(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var o=En(t.doc,r.line-1).text;o&&t.replaceRange(s.charAt(0)+"\n"+o.charAt(o.length-1),vs(r.line-1,o.length-1),vs(r.line,1),"+transpose")}i.push(new K(r,r))}t.setSelections(i)})},newlineAndIndent:function(t){le(t,function(){for(var e=t.listSelections().length,i=0;i<e;i++){var n=t.listSelections()[i];t.replaceRange("\n",n.anchor,n.head,"+input"),t.indentLine(n.from().line+1,null,!0),yi(t)}})},toggleOverwrite:function(t){t.toggleOverwrite()}},Ws=t.keyMap={};Ws.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ws.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ws.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ws.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},
Ws["default"]=hs?Ws.macDefault:Ws.pcDefault;var js=t.lookupKey=function(t,e,i){function n(e){e=Si(e);var r=e[t];if(!1===r)return"stop";if(null!=r&&i(r))return!0;if(e.nofallthrough)return"stop";var s=e.fallthrough;if(null==s)return!1;if("[object Array]"!=Object.prototype.toString.call(s))return n(s);for(var o=0;o<s.length;++o){var a=n(s[o]);if(a)return a}return!1}for(var r=0;r<e.length;++r){var s=n(e[r]);if(s)return"stop"!=s}},Ys=t.isModifierKey=function(t){var e=No[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e},qs=t.keyName=function(t,e){if(ns&&34==t.keyCode&&t["char"])return!1;var i=No[t.keyCode];return null!=i&&!t.altGraphKey&&(t.altKey&&(i="Alt-"+i),(fs?t.metaKey:t.ctrlKey)&&(i="Ctrl-"+i),(fs?t.ctrlKey:t.metaKey)&&(i="Cmd-"+i),!e&&t.shiftKey&&(i="Shift-"+i),i)};t.fromTextArea=function(e,i){function n(){e.value=l.getValue()}if(i||(i={}),i.value=e.value,!i.tabindex&&e.tabindex&&(i.tabindex=e.tabindex),!i.placeholder&&e.placeholder&&(i.placeholder=e.placeholder),null==i.autofocus){var r=Cr();i.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}if(e.form&&(lo(e.form,"submit",n),!i.leaveSubmitMethodAlone)){var s=e.form,o=s.submit;try{var a=s.submit=function(){n(),s.submit=o,s.submit(),s.submit=a}}catch(t){}}e.style.display="none";var l=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},i);return l.save=n,l.getTextArea=function(){return e},l.toTextArea=function(){l.toTextArea=isNaN,n(),e.parentNode.removeChild(l.getWrapperElement()),e.style.display="",e.form&&(co(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=o))},l};var Vs=t.StringStream=function(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Vs.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var i=e==t;else var i=e&&(t.test?t.test(e):t(e));if(i)return++this.pos,e},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=yo(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?yo(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return yo(this.string,null,this.tabSize)-(this.lineStart?yo(this.string,this.lineStart,this.tabSize):0)},match:function(t,e,i){if("string"!=typeof t){var n=this.string.slice(this.pos).match(t);return n&&n.index>0?null:(n&&!1!==e&&(this.pos+=n[0].length),n)}var r=function(t){return i?t.toLowerCase():t};if(r(this.string.substr(this.pos,t.length))==r(t))return!1!==e&&(this.pos+=t.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}}};var Gs=t.TextMarker=function(t,e){this.lines=[],this.type=e,this.doc=t};ar(Gs),Gs.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Jt(t),or(this,"clear")){var i=this.find();i&&ir(this,"clear",i.from,i.to)}for(var n=null,r=null,s=0;s<this.lines.length;++s){var o=this.lines[s],a=Ii(o.markedSpans,this);t&&!this.collapsed?me(t,Nn(o),"text"):t&&(null!=a.to&&(r=Nn(o)),null!=a.from&&(n=Nn(o))),o.markedSpans=Ni(o.markedSpans,a),null==a.from&&this.collapsed&&!en(this.doc,o)&&t&&In(o,Zt(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var l=Zi(this.lines[s]),c=d(l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=n&&t&&this.collapsed&&pe(t,n,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&ft(t.doc)),t&&ir(t,"markerCleared",t,this),e&&ee(t),this.parent&&this.parent.clear()}},Gs.prototype.find=function(t,e){null==t&&"bookmark"==this.type&&(t=1);for(var i,n,r=0;r<this.lines.length;++r){var s=this.lines[r],o=Ii(s.markedSpans,this);if(null!=o.from&&(i=vs(e?s:Nn(s),o.from),-1==t))return i;if(null!=o.to&&(n=vs(e?s:Nn(s),o.to),1==t))return n}return i&&{from:i,to:n}},Gs.prototype.changed=function(){var t=this.find(-1,!0),e=this,i=this.doc.cm;t&&i&&le(i,function(){var n=t.line,r=Nn(t.line),s=It(i,r);if(s&&(Ht(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!en(e.doc,n)&&null!=e.height){var o=e.height;e.height=null;var a=sn(e)-o;a&&In(n,n.height+a)}})},Gs.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=dr(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Gs.prototype.detachLine=function(t){if(this.lines.splice(dr(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}};var Ks=0,Xs=t.SharedTextMarker=function(t,e){this.markers=t,this.primary=e;for(var i=0;i<t.length;++i)t[i].parent=this};ar(Xs),Xs.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ir(this,"clear")}},Xs.prototype.find=function(t,e){return this.primary.find(t,e)};var Zs=t.LineWidget=function(t,e,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.cm=t,this.node=e};ar(Zs),Zs.prototype.clear=function(){var t=this.cm,e=this.line.widgets,i=this.line,n=Nn(i);if(null!=n&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(i.widgets=null);var s=sn(this);le(t,function(){rn(t,i,-s),me(t,n,"widget"),In(i,Math.max(0,i.height-s))})}},Zs.prototype.changed=function(){var t=this.height,e=this.cm,i=this.line;this.height=null;var n=sn(this)-t;n&&le(e,function(){e.curOp.forceUpdate=!0,rn(e,i,n),In(i,i.height+n)})};var Qs=t.Line=function(t,e,i){this.text=t,Wi(this,e),this.height=i?i(this):1};ar(Qs),Qs.prototype.lineNo=function(){return Nn(this)};var Js={},to={};Sn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var i=t,n=t+e;i<n;++i){var r=this.lines[i];this.height-=r.height,ln(r),ir(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,i){this.height+=i,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0;n<e.length;++n)e[n].parent=this},iterN:function(t,e,i){for(var n=t+e;t<n;++t)if(i(this.lines[t]))return!0}},Tn.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var i=0;i<this.children.length;++i){var n=this.children[i],r=n.chunkSize();if(t<r){var s=Math.min(e,r-t),o=n.height;if(n.removeInner(t,s),this.height-=o-n.height,r==s&&(this.children.splice(i--,1),n.parent=null),0==(e-=s))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof Sn))){var a=[];this.collapse(a),this.children=[new Sn(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,i){this.size+=e.length,this.height+=i;for(var n=0;n<this.children.length;++n){var r=this.children[n],s=r.chunkSize();if(t<=s){if(r.insertInner(t,e,i),r.lines&&r.lines.length>50){for(;r.lines.length>50;){var o=r.lines.splice(r.lines.length-25,25),a=new Sn(o);r.height-=a.height,this.children.splice(n+1,0,a),a.parent=this}this.maybeSpill()}break}t-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),i=new Tn(e);if(t.parent){t.size-=i.size,t.height-=i.height;var n=dr(t.parent.children,t);t.parent.children.splice(n+1,0,i)}else{var r=new Tn(t.children);r.parent=t,t.children=[r,i],t=r}i.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,i){for(var n=0;n<this.children.length;++n){var r=this.children[n],s=r.chunkSize();if(t<s){var o=Math.min(e,s-t);if(r.iterN(t,o,i))return!0;if(0==(e-=o))break;t=0}else t-=s}}};var eo=0,io=t.Doc=function(t,e,i){if(!(this instanceof io))return new io(t,e,i);null==i&&(i=0),Tn.call(this,[new Sn([new Qs("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=i;var n=vs(i,0);this.sel=Z(n),this.history=new Hn(null),this.id=++eo,this.modeOption=e,"string"==typeof t&&(t=Eo(t)),Dn(this,{from:n,to:n,text:t}),ht(this,Z(n),mo)};io.prototype=pr(Tn.prototype,{constructor:io,iter:function(t,e,i){i?this.iterN(t-this.first,e-t,i):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var i=0,n=0;n<e.length;++n)i+=e[n].height;this.insertInner(t-this.first,e,i)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=An(this,this.first,this.first+this.size);return!1===t?e:e.join(t||"\n")},setValue:ue(function(t){var e=vs(this.first,0),i=this.first+this.size-1;oi(this,{from:e,to:vs(i,En(this,i).text.length),text:Eo(t),origin:"setValue"},!0),ht(this,Z(e))}),replaceRange:function(t,e,i,n){e=J(this,e),i=i?J(this,i):e,di(this,t,e,i,n)},getRange:function(t,e,i){var n=$n(this,J(this,t),J(this,e));return!1===i?n:n.join(i||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(et(this,t))return En(this,t)},getLineNumber:function(t){return Nn(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=En(this,t)),Zi(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return J(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ue(function(t,e,i){at(this,J(this,"number"==typeof t?vs(t,e||0):t),null,i)}),setSelection:ue(function(t,e,i){at(this,J(this,t),J(this,e||t),i)}),extendSelection:ue(function(t,e,i){rt(this,J(this,t),e&&J(this,e),i)}),extendSelections:ue(function(t,e){st(this,it(this,t,e))}),extendSelectionsBy:ue(function(t,e){st(this,fr(this.sel.ranges,t),e)}),setSelections:ue(function(t,e,i){if(t.length){for(var n=0,r=[];n<t.length;n++)r[n]=new K(J(this,t[n].anchor),J(this,t[n].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),ht(this,X(r,e),i)}}),addSelection:ue(function(t,e,i){var n=this.sel.ranges.slice(0);n.push(new K(J(this,t),J(this,e||t))),ht(this,X(n,n.length-1),i)}),getSelection:function(t){for(var e,i=this.sel.ranges,n=0;n<i.length;n++){var r=$n(this,i[n].from(),i[n].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||"\n")},getSelections:function(t){for(var e=[],i=this.sel.ranges,n=0;n<i.length;n++){var r=$n(this,i[n].from(),i[n].to());!1!==t&&(r=r.join(t||"\n")),e[n]=r}return e},replaceSelection:function(t,e,i){for(var n=[],r=0;r<this.sel.ranges.length;r++)n[r]=t;this.replaceSelections(n,e,i||"+input")},replaceSelections:ue(function(t,e,i){for(var n=[],r=this.sel,s=0;s<r.ranges.length;s++){var o=r.ranges[s];n[s]={from:o.from(),to:o.to(),text:Eo(t[s]),origin:i}}for(var a=e&&"end"!=e&&ri(this,n,e),s=n.length-1;s>=0;s--)oi(this,n[s]);a?ct(this,a):this.cm&&yi(this.cm)}),undo:ue(function(){li(this,"undo")}),redo:ue(function(){li(this,"redo")}),undoSelection:ue(function(){li(this,"undo",!0)}),redoSelection:ue(function(){li(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,i=0,n=0;n<t.done.length;n++)t.done[n].ranges||++e;for(var n=0;n<t.undone.length;n++)t.undone[n].ranges||++i;return{undo:e,redo:i}},clearHistory:function(){this.history=new Hn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Kn(this.history.done),undone:Kn(this.history.undone)}},setHistory:function(t){var e=this.history=new Hn(this.history.maxGeneration);e.done=Kn(t.done.slice(0),null,!0),e.undone=Kn(t.undone.slice(0),null,!0)},addLineClass:ue(function(t,e,i){return ki(this,t,"class",function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[n]){if(new RegExp("(?:^|\\s)"+i+"(?:$|\\s)").test(t[n]))return!1;t[n]+=" "+i}else t[n]=i;return!0})}),removeLineClass:ue(function(t,e,i){return ki(this,t,"class",function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",r=t[n];if(!r)return!1;if(null==i)t[n]=null;else{var s=r.match(new RegExp("(?:^|\\s+)"+i+"(?:$|\\s+)"));if(!s)return!1;var o=s.index+s[0].length;t[n]=r.slice(0,s.index)+(s.index&&o!=r.length?" ":"")+r.slice(o)||null}return!0})}),markText:function(t,e,i){return Ti(this,J(this,t),J(this,e),i,"range")},setBookmark:function(t,e){var i={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared};return t=J(this,t),Ti(this,t,t,i,"bookmark")},findMarksAt:function(t){t=J(this,t);var e=[],i=En(this,t.line).markedSpans;if(i)for(var n=0;n<i.length;++n){var r=i[n];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,i){t=J(this,t),e=J(this,e);var n=[],r=t.line;return this.iter(t.line,e.line+1,function(s){var o=s.markedSpans;if(o)for(var a=0;a<o.length;a++){var l=o[a];r==t.line&&t.ch>l.to||null==l.from&&r!=t.line||r==e.line&&l.from>e.ch||i&&!i(l.marker)||n.push(l.marker.parent||l.marker)}++r}),n},getAllMarks:function(){var t=[];return this.iter(function(e){var i=e.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&t.push(i[n].marker)}),t},posFromIndex:function(t){var e,i=this.first;return this.iter(function(n){var r=n.text.length+1;if(r>t)return e=t,!0;t-=r,++i}),J(this,vs(i,e))},indexFromPos:function(t){t=J(this,t);var e=t.ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new io(An(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,i=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<i&&(i=t.to);var n=new io(An(this,e,i),t.mode||this.modeOption,e);return t.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:t.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],Ei(n,Li(this)),n},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var i=0;i<this.linked.length;++i){var n=this.linked[i];if(n.doc==e){this.linked.splice(i,1),e.unlinkDoc(this),$i(Li(this));break}}if(e.history==this.history){var r=[e.id];Mn(e,function(t){r.push(t.id)},!0),e.history=new Hn(null),e.history.done=Kn(this.history.done,r),e.history.undone=Kn(this.history.undone,r)}},iterLinkedDocs:function(t){Mn(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),io.prototype.eachLine=io.prototype.iter;var no="iter insert remove copy getEditor".split(" ");for(var ro in io.prototype)io.prototype.hasOwnProperty(ro)&&dr(no,ro)<0&&(t.prototype[ro]=function(t){return function(){return t.apply(this.doc,arguments)}}(io.prototype[ro]));ar(io);var so=t.e_preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},oo=t.e_stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},ao=t.e_stop=function(t){so(t),oo(t)},lo=t.on=function(t,e,i){if(t.addEventListener)t.addEventListener(e,i,!1);else if(t.attachEvent)t.attachEvent("on"+e,i);else{var n=t._handlers||(t._handlers={}),r=n[e]||(n[e]=[]);r.push(i)}},co=t.off=function(t,e,i){if(t.removeEventListener)t.removeEventListener(e,i,!1);else if(t.detachEvent)t.detachEvent("on"+e,i);else{var n=t._handlers&&t._handlers[e];if(!n)return;for(var r=0;r<n.length;++r)if(n[r]==i){n.splice(r,1);break}}},ho=t.signal=function(t,e){var i=t._handlers&&t._handlers[e];if(i)for(var n=Array.prototype.slice.call(arguments,2),r=0;r<i.length;++r)i[r].apply(null,n)},uo=null,fo=30,po=t.Pass={toString:function(){return"CodeMirror.Pass"}},mo={scroll:!1},go={origin:"*mouse"},vo={origin:"+move"};lr.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var yo=t.countColumn=function(t,e,i,n,r){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var s=n||0,o=r||0;;){var a=t.indexOf("\t",s);if(a<0||a>=e)return o+(e-s);o+=a-s,o+=i-o%i,s=a+1}},bo=[""],wo=function(t){t.select()};ls?wo=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:Qr&&(wo=function(t){try{t.select()}catch(t){}}),[].indexOf&&(dr=function(t,e){return t.indexOf(e)}),[].map&&(fr=function(t,e){return t.map(e)});var ko,xo=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,_o=t.isWordChar=function(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||xo.test(t))},Co=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;ko=document.createRange?function(t,e,i){var n=document.createRange();return n.setEnd(t,i),n.setStart(t,e),n}:function(t,e,i){var n=document.body.createTextRange();return n.moveToElementText(t.parentNode),n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n},Qr&&Jr<11&&(Cr=function(){try{return document.activeElement}catch(t){return document.body}});var Do,So,To,Mo=!1,Lo=function(){if(Qr&&Jr<9)return!1;var t=wr("div");return"draggable"in t||"dragDrop"in t}(),Eo=t.splitLines=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,i=[],n=t.length;e<=n;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var s=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),o=s.indexOf("\r");-1!=o?(i.push(s.slice(0,o)),e+=o+1):(i.push(s),e=r+1)}return i}:function(t){return t.split(/\r\n?|\n/)},$o=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Ao=function(){var t=wr("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),Io=null,No={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};t.keyNames=No,function(){for(var t=0;t<10;t++)No[t+48]=No[t+96]=String(t);for(var t=65;t<=90;t++)No[t]=String.fromCharCode(t);for(var t=1;t<=12;t++)No[t+111]=No[t+63235]="F"+t}();var Fo,Po=function(){function t(t){return t<=247?i.charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1773?n.charAt(t-1536):1774<=t&&t<=2220?"r":8192<=t&&t<=8203?"w":8204==t?"b":"L"}function e(t,e,i){this.level=t,this.from=e,this.to=i}var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,s=/[stwN]/,o=/[LRr]/,a=/[Lb1n]/,l=/[1n]/,c="L";return function(i){if(!r.test(i))return!1;for(var n,h=i.length,u=[],d=0;d<h;++d)u.push(n=t(i.charCodeAt(d)));for(var d=0,f=c;d<h;++d){var n=u[d];"m"==n?u[d]=f:f=n}for(var d=0,p=c;d<h;++d){var n=u[d];"1"==n&&"r"==p?u[d]="n":o.test(n)&&(p=n,"r"==n&&(u[d]="R"))}for(var d=1,f=u[0];d<h-1;++d){var n=u[d];"+"==n&&"1"==f&&"1"==u[d+1]?u[d]="1":","!=n||f!=u[d+1]||"1"!=f&&"n"!=f||(u[d]=f),f=n}for(var d=0;d<h;++d){var n=u[d];if(","==n)u[d]="N";else if("%"==n){for(var m=d+1;m<h&&"%"==u[m];++m);for(var g=d&&"!"==u[d-1]||m<h&&"1"==u[m]?"1":"N",v=d;v<m;++v)u[v]=g;d=m-1}}for(var d=0,p=c;d<h;++d){var n=u[d];"L"==p&&"1"==n?u[d]="L":o.test(n)&&(p=n)}for(var d=0;d<h;++d)if(s.test(u[d])){for(var m=d+1;m<h&&s.test(u[m]);++m);for(var y="L"==(d?u[d-1]:c),b="L"==(m<h?u[m]:c),g=y||b?"L":"R",v=d;v<m;++v)u[v]=g;d=m-1}for(var w,k=[],d=0;d<h;)if(a.test(u[d])){var x=d;for(++d;d<h&&a.test(u[d]);++d);k.push(new e(0,x,d))}else{var _=d,C=k.length;for(++d;d<h&&"L"!=u[d];++d);for(var v=_;v<d;)if(l.test(u[v])){_<v&&k.splice(C,0,new e(1,_,v));var D=v;for(++v;v<d&&l.test(u[v]);++v);k.splice(C,0,new e(2,D,v)),_=v}else++v;_<d&&k.splice(C,0,new e(1,_,d))}return 1==k[0].level&&(w=i.match(/^\s+/))&&(k[0].from=w[0].length,k.unshift(new e(0,0,w[0].length))),1==ur(k).level&&(w=i.match(/\s+$/))&&(ur(k).to-=w[0].length,k.push(new e(0,h-w[0].length,h))),k[0].level!=ur(k).level&&k.push(new e(k[0].level,h,h)),k}}();return t.version="4.7.0",t}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("javascript",function(e,i){function n(t){for(var e,i=!1,n=!1;null!=(e=t.next());){if(!i){if("/"==e&&!n)return;"["==e?n=!0:n&&"]"==e&&(n=!1)}i=!i&&"\\"==e}}function r(t,e,i){return pt=t,mt=i,e}function s(t,e){var i=t.next();if('"'==i||"'"==i)return e.tokenize=o(i),e.tokenize(t,e);if("."==i&&t.match(/^\d+(?:[eE][+\-]?\d+)?/))return r("number","number");if("."==i&&t.match(".."))return r("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return r(i);if("="==i&&t.eat(">"))return r("=>","operator");if("0"==i&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),r("number","number");if(/\d/.test(i))return t.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),r("number","number");if("/"==i)return t.eat("*")?(e.tokenize=a,a(t,e)):t.eat("/")?(t.skipToEnd(),r("comment","comment")):"operator"==e.lastType||"keyword c"==e.lastType||"sof"==e.lastType||/^[\[{}\(,;:]$/.test(e.lastType)?(n(t),t.eatWhile(/[gimy]/),r("regexp","string-2")):(t.eatWhile(_t),r("operator","operator",t.current()));if("`"==i)return e.tokenize=l,l(t,e);if("#"==i)return t.skipToEnd(),r("error","error");if(_t.test(i))return t.eatWhile(_t),r("operator","operator",t.current());if(kt.test(i)){t.eatWhile(kt);var s=t.current(),c=xt.propertyIsEnumerable(s)&&xt[s];return c&&"."!=e.lastType?r(c.type,c.style,s):r("variable","variable",s)}}function o(t){return function(e,i){var n,o=!1;if(yt&&"@"==e.peek()&&e.match(Ct))return i.tokenize=s,r("jsonld-keyword","meta");for(;null!=(n=e.next())&&(n!=t||o);)o=!o&&"\\"==n;return o||(i.tokenize=s),r("string","string")}}function a(t,e){for(var i,n=!1;i=t.next();){if("/"==i&&n){e.tokenize=s;break}n="*"==i}return r("comment","comment")}function l(t,e){for(var i,n=!1;null!=(i=t.next());){if(!n&&("`"==i||"$"==i&&t.eat("{"))){e.tokenize=s;break}n=!n&&"\\"==i}return r("quasi","string-2",t.current())}function c(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var i=t.string.indexOf("=>",t.start);if(!(i<0)){for(var n=0,r=!1,s=i-1;s>=0;--s){var o=t.string.charAt(s),a=Dt.indexOf(o);if(a>=0&&a<3){if(!n){++s;break}if(0==--n)break}else if(a>=3&&a<6)++n;else if(kt.test(o))r=!0;else if(r&&!n){++s;break}}r&&!n&&(e.fatArrowAt=s)}}function h(t,e,i,n,r,s){this.indented=t,this.column=e,this.type=i,this.prev=r,this.info=s,null!=n&&(this.align=n)}function u(t,e){for(var i=t.localVars;i;i=i.next)if(i.name==e)return!0;for(var n=t.context;n;n=n.prev)for(var i=n.vars;i;i=i.next)if(i.name==e)return!0}function d(t,e,i,n,r){var s=t.cc;for(Tt.state=t,Tt.stream=r,Tt.marked=null,Tt.cc=s,Tt.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){if((s.length?s.pop():bt?x:k)(i,n)){for(;s.length&&s[s.length-1].lex;)s.pop()();return Tt.marked?Tt.marked:"variable"==i&&u(t,n)?"variable-2":e}}}function f(){for(var t=arguments.length-1;t>=0;t--)Tt.cc.push(arguments[t])}function p(){return f.apply(null,arguments),!0}function m(t){function e(e){for(var i=e;i;i=i.next)if(i.name==t)return!0;return!1}var n=Tt.state;if(n.context){if(Tt.marked="def",e(n.localVars))return;n.localVars={name:t,next:n.localVars}}else{if(e(n.globalVars))return;i.globalVars&&(n.globalVars={name:t,next:n.globalVars})}}function g(){Tt.state.context={prev:Tt.state.context,vars:Tt.state.localVars},Tt.state.localVars=Mt}function v(){Tt.state.localVars=Tt.state.context.vars,Tt.state.context=Tt.state.context.prev}function y(t,e){var i=function(){var i=Tt.state,n=i.indented;if("stat"==i.lexical.type)n=i.lexical.indented;else for(var r=i.lexical;r&&")"==r.type&&r.align;r=r.prev)n=r.indented;i.lexical=new h(n,Tt.stream.column(),t,null,i.lexical,e)};return i.lex=!0,i}function b(){var t=Tt.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function w(t){function e(i){return i==t?p():";"==t?f():p(e)}return e}function k(t,e){return"var"==t?p(y("vardef",e.length),W,w(";"),b):"keyword a"==t?p(y("form"),x,k,b):"keyword b"==t?p(y("form"),k,b):"{"==t?p(y("}"),R,b):";"==t?p():"if"==t?("else"==Tt.state.lexical.info&&Tt.state.cc[Tt.state.cc.length-1]==b&&Tt.state.cc.pop()(),p(y("form"),x,k,b,G)):"function"==t?p(tt):"for"==t?p(y("form"),K,k,b):"variable"==t?p(y("stat"),I):"switch"==t?p(y("form"),x,y("}","switch"),w("{"),R,b,b):"case"==t?p(x,w(":")):"default"==t?p(w(":")):"catch"==t?p(y("form"),g,w("("),et,w(")"),k,b,v):"module"==t?p(y("form"),g,ot,v,b):"class"==t?p(y("form"),it,b):"export"==t?p(y("form"),at,b):"import"==t?p(y("form"),lt,b):f(y("stat"),x,w(";"),b)}function x(t){return C(t,!1)}function _(t){return C(t,!0)}function C(t,e){if(Tt.state.fatArrowAt==Tt.stream.start){var i=e?A:$;if("("==t)return p(g,y(")"),H(j,")"),b,w("=>"),i,v);if("variable"==t)return f(g,j,w("=>"),i,v)}var n=e?M:T;return St.hasOwnProperty(t)?p(n):"function"==t?p(tt,n):"keyword c"==t?p(e?S:D):"("==t?p(y(")"),D,ft,w(")"),b,n):"operator"==t||"spread"==t?p(e?_:x):"["==t?p(y("]"),ut,b,n):"{"==t?z(F,"}",null,n):"quasi"==t?f(L,n):p()}function D(t){return t.match(/[;\}\)\],]/)?f():f(x)}function S(t){return t.match(/[;\}\)\],]/)?f():f(_)}function T(t,e){return","==t?p(x):M(t,e,!1)}function M(t,e,i){var n=0==i?T:M,r=0==i?x:_;return"=>"==t?p(g,i?A:$,v):"operator"==t?/\+\+|--/.test(e)?p(n):"?"==e?p(x,w(":"),r):p(r):"quasi"==t?f(L,n):";"!=t?"("==t?z(_,")","call",n):"."==t?p(N,n):"["==t?p(y("]"),D,w("]"),b,n):void 0:void 0}function L(t,e){return"quasi"!=t?f():"${"!=e.slice(e.length-2)?p(L):p(x,E)}function E(t){if("}"==t)return Tt.marked="string-2",Tt.state.tokenize=l,p(L)}function $(t){return c(Tt.stream,Tt.state),f("{"==t?k:x)}function A(t){return c(Tt.stream,Tt.state),f("{"==t?k:_)}function I(t){return":"==t?p(b,k):f(T,w(";"),b)}function N(t){if("variable"==t)return Tt.marked="property",p()}function F(t,e){return"variable"==t||"keyword"==Tt.style?(Tt.marked="property",p("get"==e||"set"==e?P:O)):"number"==t||"string"==t?(Tt.marked=yt?"property":Tt.style+" property",p(O)):"jsonld-keyword"==t?p(O):"["==t?p(x,w("]"),O):void 0}function P(t){return"variable"!=t?f(O):(Tt.marked="property",p(tt))}function O(t){return":"==t?p(_):"("==t?f(tt):void 0}function H(t,e){function i(n){if(","==n){var r=Tt.state.lexical;return"call"==r.info&&(r.pos=(r.pos||0)+1),p(t,i)}return n==e?p():p(w(e))}return function(n){return n==e?p():f(t,i)}}function z(t,e,i){for(var n=3;n<arguments.length;n++)Tt.cc.push(arguments[n]);return p(y(e,i),H(t,e),b)}function R(t){return"}"==t?p():f(k,R)}function U(t){if(wt&&":"==t)return p(B)}function B(t){if("variable"==t)return Tt.marked="variable-3",p()}function W(){return f(j,U,q,V)}function j(t,e){return"variable"==t?(m(e),p()):"["==t?z(j,"]"):"{"==t?z(Y,"}"):void 0}function Y(t,e){return"variable"!=t||Tt.stream.match(/^\s*:/,!1)?("variable"==t&&(Tt.marked="property"),p(w(":"),j,q)):(m(e),p(q))}function q(t,e){if("="==e)return p(_)}function V(t){if(","==t)return p(W)}function G(t,e){if("keyword b"==t&&"else"==e)return p(y("form","else"),k,b)}function K(t){if("("==t)return p(y(")"),X,w(")"),b)}function X(t){return"var"==t?p(W,w(";"),Q):";"==t?p(Q):"variable"==t?p(Z):f(x,w(";"),Q)}function Z(t,e){return"in"==e||"of"==e?(Tt.marked="keyword",p(x)):p(T,Q)}function Q(t,e){return";"==t?p(J):"in"==e||"of"==e?(Tt.marked="keyword",p(x)):f(x,w(";"),J)}function J(t){")"!=t&&p(x)}function tt(t,e){return"*"==e?(Tt.marked="keyword",p(tt)):"variable"==t?(m(e),p(tt)):"("==t?p(g,y(")"),H(et,")"),b,k,v):void 0}function et(t){return"spread"==t?p(et):f(j,U)}function it(t,e){if("variable"==t)return m(e),p(nt)}function nt(t,e){return"extends"==e?p(x,nt):"{"==t?p(y("}"),rt,b):void 0}function rt(t,e){return"variable"==t||"keyword"==Tt.style?(Tt.marked="property","get"==e||"set"==e?p(st,tt,rt):p(tt,rt)):"*"==e?(Tt.marked="keyword",p(rt)):";"==t?p(rt):"}"==t?p():void 0}function st(t){return"variable"!=t?f():(Tt.marked="property",p())}function ot(t,e){return"string"==t?p(k):"variable"==t?(m(e),p(ht)):void 0}function at(t,e){return"*"==e?(Tt.marked="keyword",p(ht,w(";"))):"default"==e?(Tt.marked="keyword",p(x,w(";"))):f(k)}function lt(t){return"string"==t?p():f(ct,ht)}function ct(t,e){return"{"==t?z(ct,"}"):("variable"==t&&m(e),p())}function ht(t,e){if("from"==e)return Tt.marked="keyword",p(x)}function ut(t){return"]"==t?p():f(_,dt)}function dt(t){return"for"==t?f(ft,w("]")):","==t?p(H(S,"]")):f(H(_,"]"))}function ft(t){return"for"==t?p(K,ft):"if"==t?p(x,ft):void 0}var pt,mt,gt=e.indentUnit,vt=i.statementIndent,yt=i.jsonld,bt=i.json||yt,wt=i.typescript,kt=i.wordCharacters||/[\w$\xa1-\uffff]/,xt=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),i=t("keyword b"),n=t("keyword c"),r=t("operator"),s={type:"atom",style:"atom"},o={"if":t("if"),"while":e,"with":e,"else":i,"do":i,"try":i,"finally":i,"return":n,"break":n,"continue":n,"new":n,"delete":n,"throw":n,"debugger":n,"var":t("var"),"const":t("var"),"let":t("var"),"function":t("function"),"catch":t("catch"),"for":t("for"),"switch":t("switch"),"case":t("case"),"default":t("default"),"in":r,
"typeof":r,"instanceof":r,"true":s,"false":s,"null":s,undefined:s,NaN:s,Infinity:s,"this":t("this"),module:t("module"),"class":t("class"),"super":t("atom"),"yield":n,"export":t("export"),"import":t("import"),"extends":n};if(wt){var a={type:"variable",style:"variable-3"},l={"interface":t("interface"),"extends":t("extends"),constructor:t("constructor"),"public":t("public"),"private":t("private"),"protected":t("protected"),"static":t("static"),string:a,number:a,bool:a,any:a};for(var c in l)o[c]=l[c]}return o}(),_t=/[+\-*&%=<>!?|~^]/,Ct=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Dt="([{}])",St={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Tt={state:null,column:null,marked:null,cc:null},Mt={name:"this",next:{name:"arguments"}};return b.lex=!0,{startState:function(t){var e={tokenize:s,lastType:"sof",cc:[],lexical:new h((t||0)-gt,0,"block",!1),localVars:i.localVars,context:i.localVars&&{vars:i.localVars},indented:0};return i.globalVars&&"object"==typeof i.globalVars&&(e.globalVars=i.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),c(t,e)),e.tokenize!=a&&t.eatSpace())return null;var i=e.tokenize(t,e);return"comment"==pt?i:(e.lastType="operator"!=pt||"++"!=mt&&"--"!=mt?pt:"incdec",d(e,i,pt,mt,t))},indent:function(e,n){if(e.tokenize==a)return t.Pass;if(e.tokenize!=s)return 0;var r=n&&n.charAt(0),o=e.lexical;if(!/^\s*else\b/.test(n))for(var l=e.cc.length-1;l>=0;--l){var c=e.cc[l];if(c==b)o=o.prev;else if(c!=G)break}"stat"==o.type&&"}"==r&&(o=o.prev),vt&&")"==o.type&&"stat"==o.prev.type&&(o=o.prev);var h=o.type,u=r==h;return"vardef"==h?o.indented+("operator"==e.lastType||","==e.lastType?o.info+1:0):"form"==h&&"{"==r?o.indented:"form"==h?o.indented+gt:"stat"==h?o.indented+("operator"==e.lastType||","==e.lastType?vt||gt:0):"switch"!=o.info||u||0==i.doubleIndentSwitch?o.align?o.column+(u?0:1):o.indented+(u?0:gt):o.indented+(/^(?:case|default)\b/.test(n)?gt:2*gt)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:bt?null:"/*",blockCommentEnd:bt?null:"*/",lineComment:bt?null:"//",fold:"brace",helperType:bt?"json":"javascript",jsonldMode:yt,jsonMode:bt}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})});